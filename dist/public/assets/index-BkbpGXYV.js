var OL=Object.defineProperty;var I1=n=>{throw TypeError(n)};var FL=(n,e,t)=>e in n?OL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var te=(n,e,t)=>FL(n,typeof e!="symbol"?e+"":e,t),Vv=(n,e,t)=>e.has(n)||I1("Cannot "+t);var c=(n,e,t)=>(Vv(n,e,"read from private field"),t?t.call(n):e.get(n)),_=(n,e,t)=>e.has(n)?I1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),A=(n,e,t,s)=>(Vv(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),E=(n,e,t)=>(Vv(n,e,"access private method"),t);var Tt=(n,e,t,s)=>({set _(r){A(n,e,r,t)},get _(){return c(n,e,s)}});function HL(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function Iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var EE={exports:{}},Xg={},CE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=Symbol.for("react.element"),zL=Symbol.for("react.portal"),$L=Symbol.for("react.fragment"),BL=Symbol.for("react.strict_mode"),UL=Symbol.for("react.profiler"),VL=Symbol.for("react.provider"),WL=Symbol.for("react.context"),GL=Symbol.for("react.forward_ref"),qL=Symbol.for("react.suspense"),KL=Symbol.for("react.memo"),XL=Symbol.for("react.lazy"),D1=Symbol.iterator;function YL(n){return n===null||typeof n!="object"?null:(n=D1&&n[D1]||n["@@iterator"],typeof n=="function"?n:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TE=Object.assign,NE={};function od(n,e,t){this.props=n,this.context=e,this.refs=NE,this.updater=t||_E}od.prototype.isReactComponent={};od.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};od.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function PE(){}PE.prototype=od.prototype;function Dw(n,e,t){this.props=n,this.context=e,this.refs=NE,this.updater=t||_E}var Ow=Dw.prototype=new PE;Ow.constructor=Dw;TE(Ow,od.prototype);Ow.isPureReactComponent=!0;var O1=Array.isArray,kE=Object.prototype.hasOwnProperty,Fw={current:null},RE={key:!0,ref:!0,__self:!0,__source:!0};function LE(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)kE.call(e,s)&&!RE.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Zf,type:n,key:i,ref:o,props:r,_owner:Fw.current}}function QL(n,e){return{$$typeof:Zf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Hw(n){return typeof n=="object"&&n!==null&&n.$$typeof===Zf}function ZL(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var F1=/\/+/g;function Wv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?ZL(""+n.key):e.toString(36)}function Xp(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Zf:case zL:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+Wv(o,0):s,O1(r)?(t="",n!=null&&(t=n.replace(F1,"$&/")+"/"),Xp(r,e,t,"",function(u){return u})):r!=null&&(Hw(r)&&(r=QL(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(F1,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",O1(n))for(var a=0;a<n.length;a++){i=n[a];var l=s+Wv(i,a);o+=Xp(i,e,t,l,r)}else if(l=YL(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=s+Wv(i,a++),o+=Xp(i,e,t,l,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vp(n,e,t){if(n==null)return n;var s=[],r=0;return Xp(n,s,"","",function(i){return e.call(t,i,r++)}),s}function JL(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var vn={current:null},Yp={transition:null},eM={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Yp,ReactCurrentOwner:Fw};function ME(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:vp,forEach:function(n,e,t){vp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return vp(n,function(){e++}),e},toArray:function(n){return vp(n,function(e){return e})||[]},only:function(n){if(!Hw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};me.Component=od;me.Fragment=$L;me.Profiler=UL;me.PureComponent=Dw;me.StrictMode=BL;me.Suspense=qL;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eM;me.act=ME;me.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=TE({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fw.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)kE.call(e,l)&&!RE.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:Zf,type:n.type,key:r,ref:i,props:s,_owner:o}};me.createContext=function(n){return n={$$typeof:WL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:VL,_context:n},n.Consumer=n};me.createElement=LE;me.createFactory=function(n){var e=LE.bind(null,n);return e.type=n,e};me.createRef=function(){return{current:null}};me.forwardRef=function(n){return{$$typeof:GL,render:n}};me.isValidElement=Hw;me.lazy=function(n){return{$$typeof:XL,_payload:{_status:-1,_result:n},_init:JL}};me.memo=function(n,e){return{$$typeof:KL,type:n,compare:e===void 0?null:e}};me.startTransition=function(n){var e=Yp.transition;Yp.transition={};try{n()}finally{Yp.transition=e}};me.unstable_act=ME;me.useCallback=function(n,e){return vn.current.useCallback(n,e)};me.useContext=function(n){return vn.current.useContext(n)};me.useDebugValue=function(){};me.useDeferredValue=function(n){return vn.current.useDeferredValue(n)};me.useEffect=function(n,e){return vn.current.useEffect(n,e)};me.useId=function(){return vn.current.useId()};me.useImperativeHandle=function(n,e,t){return vn.current.useImperativeHandle(n,e,t)};me.useInsertionEffect=function(n,e){return vn.current.useInsertionEffect(n,e)};me.useLayoutEffect=function(n,e){return vn.current.useLayoutEffect(n,e)};me.useMemo=function(n,e){return vn.current.useMemo(n,e)};me.useReducer=function(n,e,t){return vn.current.useReducer(n,e,t)};me.useRef=function(n){return vn.current.useRef(n)};me.useState=function(n){return vn.current.useState(n)};me.useSyncExternalStore=function(n,e,t){return vn.current.useSyncExternalStore(n,e,t)};me.useTransition=function(){return vn.current.useTransition()};me.version="18.3.1";CE.exports=me;var w=CE.exports;const ji=Iw(w),zw=HL({__proto__:null,default:ji},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tM=w,nM=Symbol.for("react.element"),sM=Symbol.for("react.fragment"),rM=Object.prototype.hasOwnProperty,iM=tM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oM={key:!0,ref:!0,__self:!0,__source:!0};function jE(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)rM.call(e,s)&&!oM.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:nM,type:n,key:i,ref:o,props:r,_owner:iM.current}}Xg.Fragment=sM;Xg.jsx=jE;Xg.jsxs=jE;EE.exports=Xg;var h=EE.exports,IE={exports:{}},es={},DE={exports:{}},OE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,z){var G=L.length;L.push(z);e:for(;0<G;){var X=G-1>>>1,Z=L[X];if(0<r(Z,z))L[X]=z,L[G]=Z,G=X;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var z=L[0],G=L.pop();if(G!==z){L[0]=G;e:for(var X=0,Z=L.length,ie=Z>>>1;X<ie;){var be=2*(X+1)-1,tt=L[be],pe=be+1,U=L[pe];if(0>r(tt,G))pe<Z&&0>r(U,tt)?(L[X]=U,L[pe]=G,X=pe):(L[X]=tt,L[be]=G,X=be);else if(pe<Z&&0>r(U,G))L[X]=U,L[pe]=G,X=pe;else break e}}return z}function r(L,z){var G=L.sortIndex-z.sortIndex;return G!==0?G:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,p=3,m=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var z=t(u);z!==null;){if(z.callback===null)s(u);else if(z.startTime<=L)s(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(u)}}function C(L){if(v=!1,b(L),!y)if(t(l)!==null)y=!0,H(T);else{var z=t(u);z!==null&&F(C,z.startTime-L)}}function T(L,z){y=!1,v&&(v=!1,g(k),k=-1),m=!0;var G=p;try{for(b(z),f=t(l);f!==null&&(!(f.expirationTime>z)||L&&!D());){var X=f.callback;if(typeof X=="function"){f.callback=null,p=f.priorityLevel;var Z=X(f.expirationTime<=z);z=n.unstable_now(),typeof Z=="function"?f.callback=Z:f===t(l)&&s(l),b(z)}else s(l);f=t(l)}if(f!==null)var ie=!0;else{var be=t(u);be!==null&&F(C,be.startTime-z),ie=!1}return ie}finally{f=null,p=G,m=!1}}var N=!1,P=null,k=-1,M=5,j=-1;function D(){return!(n.unstable_now()-j<M)}function R(){if(P!==null){var L=n.unstable_now();j=L;var z=!0;try{z=P(!0,L)}finally{z?O():(N=!1,P=null)}}else N=!1}var O;if(typeof x=="function")O=function(){x(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=R,O=function(){B.postMessage(null)}}else O=function(){S(R,0)};function H(L){P=L,N||(N=!0,O())}function F(L,z){k=S(function(){L(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,H(T))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var G=p;p=z;try{return L()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=p;p=L;try{return z()}finally{p=G}},n.unstable_scheduleCallback=function(L,z,G){var X=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=G+Z,L={id:d++,callback:z,priorityLevel:L,startTime:G,expirationTime:Z,sortIndex:-1},G>X?(L.sortIndex=G,e(u,L),t(l)===null&&L===t(u)&&(v?(g(k),k=-1):v=!0,F(C,G-X))):(L.sortIndex=Z,e(l,L),y||m||(y=!0,H(T))),L},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(L){var z=p;return function(){var G=p;p=z;try{return L.apply(this,arguments)}finally{p=G}}}})(OE);DE.exports=OE;var aM=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lM=w,Jn=aM;function $(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FE=new Set,dh={};function Ol(n,e){Gu(n,e),Gu(n+"Capture",e)}function Gu(n,e){for(dh[n]=e,n=0;n<e.length;n++)FE.add(e[n])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zy=Object.prototype.hasOwnProperty,cM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H1={},z1={};function uM(n){return zy.call(z1,n)?!0:zy.call(H1,n)?!1:cM.test(n)?z1[n]=!0:(H1[n]=!0,!1)}function dM(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function hM(n,e,t,s){if(e===null||typeof e>"u"||dM(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ut[n]=new yn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ut[e]=new yn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ut[n]=new yn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ut[n]=new yn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ut[n]=new yn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ut[n]=new yn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ut[n]=new yn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ut[n]=new yn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ut[n]=new yn(n,5,!1,n.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Bw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($w,Bw);Ut[e]=new yn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($w,Bw);Ut[e]=new yn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($w,Bw);Ut[e]=new yn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ut[n]=new yn(n,1,!1,n.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ut[n]=new yn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Uw(n,e,t,s){var r=Ut.hasOwnProperty(e)?Ut[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hM(e,t,r,s)&&(t=null),s||r===null?uM(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Pi=lM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yp=Symbol.for("react.element"),oc=Symbol.for("react.portal"),ac=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),$y=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),zE=Symbol.for("react.context"),Ww=Symbol.for("react.forward_ref"),By=Symbol.for("react.suspense"),Uy=Symbol.for("react.suspense_list"),Gw=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),$E=Symbol.for("react.offscreen"),$1=Symbol.iterator;function md(n){return n===null||typeof n!="object"?null:(n=$1&&n[$1]||n["@@iterator"],typeof n=="function"?n:null)}var et=Object.assign,Gv;function Nd(n){if(Gv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gv=e&&e[1]||""}return`
`+Gv+n}var qv=!1;function Kv(n,e){if(!n||qv)return"";qv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{qv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Nd(n):""}function fM(n){switch(n.tag){case 5:return Nd(n.type);case 16:return Nd("Lazy");case 13:return Nd("Suspense");case 19:return Nd("SuspenseList");case 0:case 2:case 15:return n=Kv(n.type,!1),n;case 11:return n=Kv(n.type.render,!1),n;case 1:return n=Kv(n.type,!0),n;default:return""}}function Vy(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ac:return"Fragment";case oc:return"Portal";case $y:return"Profiler";case Vw:return"StrictMode";case By:return"Suspense";case Uy:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case zE:return(n.displayName||"Context")+".Consumer";case HE:return(n._context.displayName||"Context")+".Provider";case Ww:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Gw:return e=n.displayName||null,e!==null?e:Vy(n.type)||"Memo";case Hi:e=n._payload,n=n._init;try{return Vy(n(e))}catch{}}return null}function pM(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vy(e);case 8:return e===Vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function BE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mM(n){var e=BE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function xp(n){n._valueTracker||(n._valueTracker=mM(n))}function UE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=BE(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Wm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Wy(n,e){var t=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function B1(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Oo(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function VE(n,e){e=e.checked,e!=null&&Uw(n,"checked",e,!1)}function Gy(n,e){VE(n,e);var t=Oo(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?qy(n,e.type,t):e.hasOwnProperty("defaultValue")&&qy(n,e.type,Oo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function U1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function qy(n,e,t){(e!=="number"||Wm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Pd=Array.isArray;function wc(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Oo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Ky(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function V1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($(92));if(Pd(t)){if(1<t.length)throw Error($(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Oo(t)}}function WE(n,e){var t=Oo(e.value),s=Oo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function W1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function GE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xy(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?GE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wp,qE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(wp=wp||document.createElement("div"),wp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function hh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gM=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(n){gM.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yd[e]=Yd[n]})});function KE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yd.hasOwnProperty(n)&&Yd[n]?(""+e).trim():e+"px"}function XE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=KE(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var vM=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yy(n,e){if(e){if(vM[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Qy(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zy=null;function qw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jy=null,bc=null,Sc=null;function G1(n){if(n=tp(n)){if(typeof Jy!="function")throw Error($(280));var e=n.stateNode;e&&(e=ev(e),Jy(n.stateNode,n.type,e))}}function YE(n){bc?Sc?Sc.push(n):Sc=[n]:bc=n}function QE(){if(bc){var n=bc,e=Sc;if(Sc=bc=null,G1(n),e)for(n=0;n<e.length;n++)G1(e[n])}}function ZE(n,e){return n(e)}function JE(){}var Xv=!1;function eC(n,e,t){if(Xv)return n(e,t);Xv=!0;try{return ZE(n,e,t)}finally{Xv=!1,(bc!==null||Sc!==null)&&(JE(),QE())}}function fh(n,e){var t=n.stateNode;if(t===null)return null;var s=ev(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($(231,e,typeof t));return t}var ex=!1;if(bi)try{var gd={};Object.defineProperty(gd,"passive",{get:function(){ex=!0}}),window.addEventListener("test",gd,gd),window.removeEventListener("test",gd,gd)}catch{ex=!1}function yM(n,e,t,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Qd=!1,Gm=null,qm=!1,tx=null,xM={onError:function(n){Qd=!0,Gm=n}};function wM(n,e,t,s,r,i,o,a,l){Qd=!1,Gm=null,yM.apply(xM,arguments)}function bM(n,e,t,s,r,i,o,a,l){if(wM.apply(this,arguments),Qd){if(Qd){var u=Gm;Qd=!1,Gm=null}else throw Error($(198));qm||(qm=!0,tx=u)}}function Fl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function tC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function q1(n){if(Fl(n)!==n)throw Error($(188))}function SM(n){var e=n.alternate;if(!e){if(e=Fl(n),e===null)throw Error($(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return q1(r),n;if(i===s)return q1(r),e;i=i.sibling}throw Error($(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(t.alternate!==s)throw Error($(190))}if(t.tag!==3)throw Error($(188));return t.stateNode.current===t?n:e}function nC(n){return n=SM(n),n!==null?sC(n):null}function sC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=sC(n);if(e!==null)return e;n=n.sibling}return null}var rC=Jn.unstable_scheduleCallback,K1=Jn.unstable_cancelCallback,AM=Jn.unstable_shouldYield,EM=Jn.unstable_requestPaint,ct=Jn.unstable_now,CM=Jn.unstable_getCurrentPriorityLevel,Kw=Jn.unstable_ImmediatePriority,iC=Jn.unstable_UserBlockingPriority,Km=Jn.unstable_NormalPriority,_M=Jn.unstable_LowPriority,oC=Jn.unstable_IdlePriority,Yg=null,Er=null;function TM(n){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Yg,n,void 0,(n.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:kM,NM=Math.log,PM=Math.LN2;function kM(n){return n>>>=0,n===0?32:31-(NM(n)/PM|0)|0}var bp=64,Sp=4194304;function kd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xm(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=kd(a):(i&=o,i!==0&&(s=kd(i)))}else o=t&~r,o!==0?s=kd(o):i!==0&&(s=kd(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Ws(e),r=1<<t,s|=n[t],e&=~r;return s}function RM(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LM(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Ws(i),a=1<<o,l=r[o];l===-1?(!(a&t)||a&s)&&(r[o]=RM(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function nx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function aC(){var n=bp;return bp<<=1,!(bp&4194240)&&(bp=64),n}function Yv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Jf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ws(e),n[e]=t}function MM(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Ws(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function Xw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Ws(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Me=0;function lC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var cC,Yw,uC,dC,hC,sx=!1,Ap=[],Po=null,ko=null,Ro=null,ph=new Map,mh=new Map,$i=[],jM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X1(n,e){switch(n){case"focusin":case"focusout":Po=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(e.pointerId)}}function vd(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=tp(e),e!==null&&Yw(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function IM(n,e,t,s,r){switch(e){case"focusin":return Po=vd(Po,n,e,t,s,r),!0;case"dragenter":return ko=vd(ko,n,e,t,s,r),!0;case"mouseover":return Ro=vd(Ro,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return ph.set(i,vd(ph.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,mh.set(i,vd(mh.get(i)||null,n,e,t,s,r)),!0}return!1}function fC(n){var e=da(n.target);if(e!==null){var t=Fl(e);if(t!==null){if(e=t.tag,e===13){if(e=tC(t),e!==null){n.blockedOn=e,hC(n.priority,function(){uC(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=rx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);Zy=s,t.target.dispatchEvent(s),Zy=null}else return e=tp(t),e!==null&&Yw(e),n.blockedOn=t,!1;e.shift()}return!0}function Y1(n,e,t){Qp(n)&&t.delete(e)}function DM(){sx=!1,Po!==null&&Qp(Po)&&(Po=null),ko!==null&&Qp(ko)&&(ko=null),Ro!==null&&Qp(Ro)&&(Ro=null),ph.forEach(Y1),mh.forEach(Y1)}function yd(n,e){n.blockedOn===e&&(n.blockedOn=null,sx||(sx=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,DM)))}function gh(n){function e(r){return yd(r,n)}if(0<Ap.length){yd(Ap[0],n);for(var t=1;t<Ap.length;t++){var s=Ap[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Po!==null&&yd(Po,n),ko!==null&&yd(ko,n),Ro!==null&&yd(Ro,n),ph.forEach(e),mh.forEach(e),t=0;t<$i.length;t++)s=$i[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<$i.length&&(t=$i[0],t.blockedOn===null);)fC(t),t.blockedOn===null&&$i.shift()}var Ac=Pi.ReactCurrentBatchConfig,Ym=!0;function OM(n,e,t,s){var r=Me,i=Ac.transition;Ac.transition=null;try{Me=1,Qw(n,e,t,s)}finally{Me=r,Ac.transition=i}}function FM(n,e,t,s){var r=Me,i=Ac.transition;Ac.transition=null;try{Me=4,Qw(n,e,t,s)}finally{Me=r,Ac.transition=i}}function Qw(n,e,t,s){if(Ym){var r=rx(n,e,t,s);if(r===null)oy(n,e,s,Qm,t),X1(n,s);else if(IM(r,n,e,t,s))s.stopPropagation();else if(X1(n,s),e&4&&-1<jM.indexOf(n)){for(;r!==null;){var i=tp(r);if(i!==null&&cC(i),i=rx(n,e,t,s),i===null&&oy(n,e,s,Qm,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else oy(n,e,s,null,t)}}var Qm=null;function rx(n,e,t,s){if(Qm=null,n=qw(s),n=da(n),n!==null)if(e=Fl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=tC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Qm=n,null}function pC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CM()){case Kw:return 1;case iC:return 4;case Km:case _M:return 16;case oC:return 536870912;default:return 16}default:return 16}}var To=null,Zw=null,Zp=null;function mC(){if(Zp)return Zp;var n,e=Zw,t=e.length,s,r="value"in To?To.value:To.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return Zp=r.slice(n,1<s?1-s:void 0)}function Jp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ep(){return!0}function Q1(){return!1}function ts(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ep:Q1,this.isPropagationStopped=Q1,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ep)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ep)},persist:function(){},isPersistent:Ep}),e}var ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jw=ts(ad),ep=et({},ad,{view:0,detail:0}),HM=ts(ep),Qv,Zv,xd,Qg=et({},ep,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xd&&(xd&&n.type==="mousemove"?(Qv=n.screenX-xd.screenX,Zv=n.screenY-xd.screenY):Zv=Qv=0,xd=n),Qv)},movementY:function(n){return"movementY"in n?n.movementY:Zv}}),Z1=ts(Qg),zM=et({},Qg,{dataTransfer:0}),$M=ts(zM),BM=et({},ep,{relatedTarget:0}),Jv=ts(BM),UM=et({},ad,{animationName:0,elapsedTime:0,pseudoElement:0}),VM=ts(UM),WM=et({},ad,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),GM=ts(WM),qM=et({},ad,{data:0}),J1=ts(qM),KM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QM(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=YM[n])?!!e[n]:!1}function eb(){return QM}var ZM=et({},ep,{key:function(n){if(n.key){var e=KM[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Jp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XM[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eb,charCode:function(n){return n.type==="keypress"?Jp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JM=ts(ZM),e2=et({},Qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eS=ts(e2),t2=et({},ep,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eb}),n2=ts(t2),s2=et({},ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),r2=ts(s2),i2=et({},Qg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),o2=ts(i2),a2=[9,13,27,32],tb=bi&&"CompositionEvent"in window,Zd=null;bi&&"documentMode"in document&&(Zd=document.documentMode);var l2=bi&&"TextEvent"in window&&!Zd,gC=bi&&(!tb||Zd&&8<Zd&&11>=Zd),tS=" ",nS=!1;function vC(n,e){switch(n){case"keyup":return a2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var lc=!1;function c2(n,e){switch(n){case"compositionend":return yC(e);case"keypress":return e.which!==32?null:(nS=!0,tS);case"textInput":return n=e.data,n===tS&&nS?null:n;default:return null}}function u2(n,e){if(lc)return n==="compositionend"||!tb&&vC(n,e)?(n=mC(),Zp=Zw=To=null,lc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gC&&e.locale!=="ko"?null:e.data;default:return null}}var d2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!d2[n.type]:e==="textarea"}function xC(n,e,t,s){YE(s),e=Zm(e,"onChange"),0<e.length&&(t=new Jw("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Jd=null,vh=null;function h2(n){kC(n,0)}function Zg(n){var e=dc(n);if(UE(e))return n}function f2(n,e){if(n==="change")return e}var wC=!1;if(bi){var ey;if(bi){var ty="oninput"in document;if(!ty){var rS=document.createElement("div");rS.setAttribute("oninput","return;"),ty=typeof rS.oninput=="function"}ey=ty}else ey=!1;wC=ey&&(!document.documentMode||9<document.documentMode)}function iS(){Jd&&(Jd.detachEvent("onpropertychange",bC),vh=Jd=null)}function bC(n){if(n.propertyName==="value"&&Zg(vh)){var e=[];xC(e,vh,n,qw(n)),eC(h2,e)}}function p2(n,e,t){n==="focusin"?(iS(),Jd=e,vh=t,Jd.attachEvent("onpropertychange",bC)):n==="focusout"&&iS()}function m2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zg(vh)}function g2(n,e){if(n==="click")return Zg(e)}function v2(n,e){if(n==="input"||n==="change")return Zg(e)}function y2(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qs=typeof Object.is=="function"?Object.is:y2;function yh(n,e){if(qs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!zy.call(e,r)||!qs(n[r],e[r]))return!1}return!0}function oS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function aS(n,e){var t=oS(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=oS(t)}}function SC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?SC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function AC(){for(var n=window,e=Wm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Wm(n.document)}return e}function nb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function x2(n){var e=AC(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&SC(t.ownerDocument.documentElement,t)){if(s!==null&&nb(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=aS(t,i);var o=aS(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var w2=bi&&"documentMode"in document&&11>=document.documentMode,cc=null,ix=null,eh=null,ox=!1;function lS(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ox||cc==null||cc!==Wm(s)||(s=cc,"selectionStart"in s&&nb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),eh&&yh(eh,s)||(eh=s,s=Zm(ix,"onSelect"),0<s.length&&(e=new Jw("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=cc)))}function Cp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var uc={animationend:Cp("Animation","AnimationEnd"),animationiteration:Cp("Animation","AnimationIteration"),animationstart:Cp("Animation","AnimationStart"),transitionend:Cp("Transition","TransitionEnd")},ny={},EC={};bi&&(EC=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Jg(n){if(ny[n])return ny[n];if(!uc[n])return n;var e=uc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in EC)return ny[n]=e[t];return n}var CC=Jg("animationend"),_C=Jg("animationiteration"),TC=Jg("animationstart"),NC=Jg("transitionend"),PC=new Map,cS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(n,e){PC.set(n,e),Ol(e,[n])}for(var sy=0;sy<cS.length;sy++){var ry=cS[sy],b2=ry.toLowerCase(),S2=ry[0].toUpperCase()+ry.slice(1);Ko(b2,"on"+S2)}Ko(CC,"onAnimationEnd");Ko(_C,"onAnimationIteration");Ko(TC,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(NC,"onTransitionEnd");Gu("onMouseEnter",["mouseout","mouseover"]);Gu("onMouseLeave",["mouseout","mouseover"]);Gu("onPointerEnter",["pointerout","pointerover"]);Gu("onPointerLeave",["pointerout","pointerover"]);Ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rd));function uS(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,bM(s,e,void 0,n),n.currentTarget=null}function kC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;uS(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;uS(r,a,u),i=l}}}if(qm)throw n=tx,qm=!1,tx=null,n}function Be(n,e){var t=e[dx];t===void 0&&(t=e[dx]=new Set);var s=n+"__bubble";t.has(s)||(RC(e,n,2,!1),t.add(s))}function iy(n,e,t){var s=0;e&&(s|=4),RC(t,n,s,e)}var _p="_reactListening"+Math.random().toString(36).slice(2);function xh(n){if(!n[_p]){n[_p]=!0,FE.forEach(function(t){t!=="selectionchange"&&(A2.has(t)||iy(t,!1,n),iy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[_p]||(e[_p]=!0,iy("selectionchange",!1,e))}}function RC(n,e,t,s){switch(pC(e)){case 1:var r=OM;break;case 4:r=FM;break;default:r=Qw}t=r.bind(null,e,t,n),r=void 0,!ex||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function oy(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=da(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}eC(function(){var u=i,d=qw(t),f=[];e:{var p=PC.get(n);if(p!==void 0){var m=Jw,y=n;switch(n){case"keypress":if(Jp(t)===0)break e;case"keydown":case"keyup":m=JM;break;case"focusin":y="focus",m=Jv;break;case"focusout":y="blur",m=Jv;break;case"beforeblur":case"afterblur":m=Jv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Z1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n2;break;case CC:case _C:case TC:m=VM;break;case NC:m=r2;break;case"scroll":m=HM;break;case"wheel":m=o2;break;case"copy":case"cut":case"paste":m=GM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=eS}var v=(e&4)!==0,S=!v&&n==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,b;x!==null;){b=x;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,g!==null&&(C=fh(x,g),C!=null&&v.push(wh(x,C,b)))),S)break;x=x.return}0<v.length&&(p=new m(p,y,null,t,d),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Zy&&(y=t.relatedTarget||t.fromElement)&&(da(y)||y[Si]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?da(y):null,y!==null&&(S=Fl(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(v=Z1,C="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(v=eS,C="onPointerLeave",g="onPointerEnter",x="pointer"),S=m==null?p:dc(m),b=y==null?p:dc(y),p=new v(C,x+"leave",m,t,d),p.target=S,p.relatedTarget=b,C=null,da(d)===u&&(v=new v(g,x+"enter",y,t,d),v.target=b,v.relatedTarget=S,C=v),S=C,m&&y)t:{for(v=m,g=y,x=0,b=v;b;b=ql(b))x++;for(b=0,C=g;C;C=ql(C))b++;for(;0<x-b;)v=ql(v),x--;for(;0<b-x;)g=ql(g),b--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=ql(v),g=ql(g)}v=null}else v=null;m!==null&&dS(f,p,m,v,!1),y!==null&&S!==null&&dS(f,S,y,v,!0)}}e:{if(p=u?dc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=f2;else if(sS(p))if(wC)T=v2;else{T=m2;var N=p2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=g2);if(T&&(T=T(n,u))){xC(f,T,t,d);break e}N&&N(n,p,u),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&qy(p,"number",p.value)}switch(N=u?dc(u):window,n){case"focusin":(sS(N)||N.contentEditable==="true")&&(cc=N,ix=u,eh=null);break;case"focusout":eh=ix=cc=null;break;case"mousedown":ox=!0;break;case"contextmenu":case"mouseup":case"dragend":ox=!1,lS(f,t,d);break;case"selectionchange":if(w2)break;case"keydown":case"keyup":lS(f,t,d)}var P;if(tb)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else lc?vC(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(gC&&t.locale!=="ko"&&(lc||k!=="onCompositionStart"?k==="onCompositionEnd"&&lc&&(P=mC()):(To=d,Zw="value"in To?To.value:To.textContent,lc=!0)),N=Zm(u,k),0<N.length&&(k=new J1(k,n,null,t,d),f.push({event:k,listeners:N}),P?k.data=P:(P=yC(t),P!==null&&(k.data=P)))),(P=l2?c2(n,t):u2(n,t))&&(u=Zm(u,"onBeforeInput"),0<u.length&&(d=new J1("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:u}),d.data=P))}kC(f,e)})}function wh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Zm(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=fh(n,t),i!=null&&s.unshift(wh(n,i,r)),i=fh(n,e),i!=null&&s.push(wh(n,i,r))),n=n.return}return s}function ql(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function dS(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=fh(t,i),l!=null&&o.unshift(wh(t,l,a))):r||(l=fh(t,i),l!=null&&o.push(wh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var E2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function hS(n){return(typeof n=="string"?n:""+n).replace(E2,`
`).replace(C2,"")}function Tp(n,e,t){if(e=hS(e),hS(n)!==e&&t)throw Error($(425))}function Jm(){}var ax=null,lx=null;function cx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ux=typeof setTimeout=="function"?setTimeout:void 0,_2=typeof clearTimeout=="function"?clearTimeout:void 0,fS=typeof Promise=="function"?Promise:void 0,T2=typeof queueMicrotask=="function"?queueMicrotask:typeof fS<"u"?function(n){return fS.resolve(null).then(n).catch(N2)}:ux;function N2(n){setTimeout(function(){throw n})}function ay(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),gh(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);gh(e)}function Lo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function pS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ld=Math.random().toString(36).slice(2),Sr="__reactFiber$"+ld,bh="__reactProps$"+ld,Si="__reactContainer$"+ld,dx="__reactEvents$"+ld,P2="__reactListeners$"+ld,k2="__reactHandles$"+ld;function da(n){var e=n[Sr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Si]||t[Sr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=pS(n);n!==null;){if(t=n[Sr])return t;n=pS(n)}return e}n=t,t=n.parentNode}return null}function tp(n){return n=n[Sr]||n[Si],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function dc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($(33))}function ev(n){return n[bh]||null}var hx=[],hc=-1;function Xo(n){return{current:n}}function Ve(n){0>hc||(n.current=hx[hc],hx[hc]=null,hc--)}function ze(n,e){hc++,hx[hc]=n.current,n.current=e}var Fo={},sn=Xo(Fo),kn=Xo(!1),bl=Fo;function qu(n,e){var t=n.type.contextTypes;if(!t)return Fo;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Rn(n){return n=n.childContextTypes,n!=null}function eg(){Ve(kn),Ve(sn)}function mS(n,e,t){if(sn.current!==Fo)throw Error($(168));ze(sn,e),ze(kn,t)}function LC(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error($(108,pM(n)||"Unknown",r));return et({},t,s)}function tg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fo,bl=sn.current,ze(sn,n),ze(kn,kn.current),!0}function gS(n,e,t){var s=n.stateNode;if(!s)throw Error($(169));t?(n=LC(n,e,bl),s.__reactInternalMemoizedMergedChildContext=n,Ve(kn),Ve(sn),ze(sn,n)):Ve(kn),ze(kn,t)}var Or=null,tv=!1,ly=!1;function MC(n){Or===null?Or=[n]:Or.push(n)}function R2(n){tv=!0,MC(n)}function Yo(){if(!ly&&Or!==null){ly=!0;var n=0,e=Me;try{var t=Or;for(Me=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Or=null,tv=!1}catch(r){throw Or!==null&&(Or=Or.slice(n+1)),rC(Kw,Yo),r}finally{Me=e,ly=!1}}return null}var fc=[],pc=0,ng=null,sg=0,ds=[],hs=0,Sl=null,ui=1,di="";function sa(n,e){fc[pc++]=sg,fc[pc++]=ng,ng=n,sg=e}function jC(n,e,t){ds[hs++]=ui,ds[hs++]=di,ds[hs++]=Sl,Sl=n;var s=ui;n=di;var r=32-Ws(s)-1;s&=~(1<<r),t+=1;var i=32-Ws(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,ui=1<<32-Ws(e)+r|t<<r|s,di=i+n}else ui=1<<i|t<<r|s,di=n}function sb(n){n.return!==null&&(sa(n,1),jC(n,1,0))}function rb(n){for(;n===ng;)ng=fc[--pc],fc[pc]=null,sg=fc[--pc],fc[pc]=null;for(;n===Sl;)Sl=ds[--hs],ds[hs]=null,di=ds[--hs],ds[hs]=null,ui=ds[--hs],ds[hs]=null}var Yn=null,Xn=null,qe=!1,$s=null;function IC(n,e){var t=ms(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function vS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Yn=n,Xn=Lo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Yn=n,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Sl!==null?{id:ui,overflow:di}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ms(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Yn=n,Xn=null,!0):!1;default:return!1}}function fx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function px(n){if(qe){var e=Xn;if(e){var t=e;if(!vS(n,e)){if(fx(n))throw Error($(418));e=Lo(t.nextSibling);var s=Yn;e&&vS(n,e)?IC(s,t):(n.flags=n.flags&-4097|2,qe=!1,Yn=n)}}else{if(fx(n))throw Error($(418));n.flags=n.flags&-4097|2,qe=!1,Yn=n}}}function yS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Yn=n}function Np(n){if(n!==Yn)return!1;if(!qe)return yS(n),qe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!cx(n.type,n.memoizedProps)),e&&(e=Xn)){if(fx(n))throw DC(),Error($(418));for(;e;)IC(n,e),e=Lo(e.nextSibling)}if(yS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Xn=Lo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Xn=null}}else Xn=Yn?Lo(n.stateNode.nextSibling):null;return!0}function DC(){for(var n=Xn;n;)n=Lo(n.nextSibling)}function Ku(){Xn=Yn=null,qe=!1}function ib(n){$s===null?$s=[n]:$s.push(n)}var L2=Pi.ReactCurrentBatchConfig;function wd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($(309));var s=t.stateNode}if(!s)throw Error($(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error($(284));if(!t._owner)throw Error($(290,n))}return n}function Pp(n,e){throw n=Object.prototype.toString.call(e),Error($(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function xS(n){var e=n._init;return e(n._payload)}function OC(n){function e(g,x){if(n){var b=g.deletions;b===null?(g.deletions=[x],g.flags|=16):b.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function s(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=Do(g,x),g.index=0,g.sibling=null,g}function i(g,x,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<x?(g.flags|=2,x):b):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,b,C){return x===null||x.tag!==6?(x=my(b,g.mode,C),x.return=g,x):(x=r(x,b),x.return=g,x)}function l(g,x,b,C){var T=b.type;return T===ac?d(g,x,b.props.children,C,b.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Hi&&xS(T)===x.type)?(C=r(x,b.props),C.ref=wd(g,x,b),C.return=g,C):(C=om(b.type,b.key,b.props,null,g.mode,C),C.ref=wd(g,x,b),C.return=g,C)}function u(g,x,b,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=gy(b,g.mode,C),x.return=g,x):(x=r(x,b.children||[]),x.return=g,x)}function d(g,x,b,C,T){return x===null||x.tag!==7?(x=yl(b,g.mode,C,T),x.return=g,x):(x=r(x,b),x.return=g,x)}function f(g,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=my(""+x,g.mode,b),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yp:return b=om(x.type,x.key,x.props,null,g.mode,b),b.ref=wd(g,null,x),b.return=g,b;case oc:return x=gy(x,g.mode,b),x.return=g,x;case Hi:var C=x._init;return f(g,C(x._payload),b)}if(Pd(x)||md(x))return x=yl(x,g.mode,b,null),x.return=g,x;Pp(g,x)}return null}function p(g,x,b,C){var T=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:a(g,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yp:return b.key===T?l(g,x,b,C):null;case oc:return b.key===T?u(g,x,b,C):null;case Hi:return T=b._init,p(g,x,T(b._payload),C)}if(Pd(b)||md(b))return T!==null?null:d(g,x,b,C,null);Pp(g,b)}return null}function m(g,x,b,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(b)||null,a(x,g,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case yp:return g=g.get(C.key===null?b:C.key)||null,l(x,g,C,T);case oc:return g=g.get(C.key===null?b:C.key)||null,u(x,g,C,T);case Hi:var N=C._init;return m(g,x,b,N(C._payload),T)}if(Pd(C)||md(C))return g=g.get(b)||null,d(x,g,C,T,null);Pp(x,C)}return null}function y(g,x,b,C){for(var T=null,N=null,P=x,k=x=0,M=null;P!==null&&k<b.length;k++){P.index>k?(M=P,P=null):M=P.sibling;var j=p(g,P,b[k],C);if(j===null){P===null&&(P=M);break}n&&P&&j.alternate===null&&e(g,P),x=i(j,x,k),N===null?T=j:N.sibling=j,N=j,P=M}if(k===b.length)return t(g,P),qe&&sa(g,k),T;if(P===null){for(;k<b.length;k++)P=f(g,b[k],C),P!==null&&(x=i(P,x,k),N===null?T=P:N.sibling=P,N=P);return qe&&sa(g,k),T}for(P=s(g,P);k<b.length;k++)M=m(P,g,k,b[k],C),M!==null&&(n&&M.alternate!==null&&P.delete(M.key===null?k:M.key),x=i(M,x,k),N===null?T=M:N.sibling=M,N=M);return n&&P.forEach(function(D){return e(g,D)}),qe&&sa(g,k),T}function v(g,x,b,C){var T=md(b);if(typeof T!="function")throw Error($(150));if(b=T.call(b),b==null)throw Error($(151));for(var N=T=null,P=x,k=x=0,M=null,j=b.next();P!==null&&!j.done;k++,j=b.next()){P.index>k?(M=P,P=null):M=P.sibling;var D=p(g,P,j.value,C);if(D===null){P===null&&(P=M);break}n&&P&&D.alternate===null&&e(g,P),x=i(D,x,k),N===null?T=D:N.sibling=D,N=D,P=M}if(j.done)return t(g,P),qe&&sa(g,k),T;if(P===null){for(;!j.done;k++,j=b.next())j=f(g,j.value,C),j!==null&&(x=i(j,x,k),N===null?T=j:N.sibling=j,N=j);return qe&&sa(g,k),T}for(P=s(g,P);!j.done;k++,j=b.next())j=m(P,g,k,j.value,C),j!==null&&(n&&j.alternate!==null&&P.delete(j.key===null?k:j.key),x=i(j,x,k),N===null?T=j:N.sibling=j,N=j);return n&&P.forEach(function(R){return e(g,R)}),qe&&sa(g,k),T}function S(g,x,b,C){if(typeof b=="object"&&b!==null&&b.type===ac&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case yp:e:{for(var T=b.key,N=x;N!==null;){if(N.key===T){if(T=b.type,T===ac){if(N.tag===7){t(g,N.sibling),x=r(N,b.props.children),x.return=g,g=x;break e}}else if(N.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Hi&&xS(T)===N.type){t(g,N.sibling),x=r(N,b.props),x.ref=wd(g,N,b),x.return=g,g=x;break e}t(g,N);break}else e(g,N);N=N.sibling}b.type===ac?(x=yl(b.props.children,g.mode,C,b.key),x.return=g,g=x):(C=om(b.type,b.key,b.props,null,g.mode,C),C.ref=wd(g,x,b),C.return=g,g=C)}return o(g);case oc:e:{for(N=b.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){t(g,x.sibling),x=r(x,b.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=gy(b,g.mode,C),x.return=g,g=x}return o(g);case Hi:return N=b._init,S(g,x,N(b._payload),C)}if(Pd(b))return y(g,x,b,C);if(md(b))return v(g,x,b,C);Pp(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,b),x.return=g,g=x):(t(g,x),x=my(b,g.mode,C),x.return=g,g=x),o(g)):t(g,x)}return S}var Xu=OC(!0),FC=OC(!1),rg=Xo(null),ig=null,mc=null,ob=null;function ab(){ob=mc=ig=null}function lb(n){var e=rg.current;Ve(rg),n._currentValue=e}function mx(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Ec(n,e){ig=n,ob=mc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Nn=!0),n.firstContext=null)}function ys(n){var e=n._currentValue;if(ob!==n)if(n={context:n,memoizedValue:e,next:null},mc===null){if(ig===null)throw Error($(308));mc=n,ig.dependencies={lanes:0,firstContext:n}}else mc=mc.next=n;return e}var ha=null;function cb(n){ha===null?ha=[n]:ha.push(n)}function HC(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,cb(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ai(n,s)}function Ai(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var zi=!1;function ub(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Ai(n,t)}return r=s.interleaved,r===null?(e.next=e,cb(s)):(e.next=r.next,r.next=e),s.interleaved=e,Ai(n,t)}function em(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Xw(n,t)}}function wS(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function og(n,e,t,s){var r=n.updateQueue;zi=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var f=r.baseState;o=0,d=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((s&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,v=a;switch(p=e,m=t,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=et({},f,p);break e;case 2:zi=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);El|=o,n.lanes=o,n.memoizedState=f}}function bS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error($(191,r));r.call(s)}}}var np={},Cr=Xo(np),Sh=Xo(np),Ah=Xo(np);function fa(n){if(n===np)throw Error($(174));return n}function db(n,e){switch(ze(Ah,e),ze(Sh,n),ze(Cr,np),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xy(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Xy(e,n)}Ve(Cr),ze(Cr,e)}function Yu(){Ve(Cr),Ve(Sh),Ve(Ah)}function $C(n){fa(Ah.current);var e=fa(Cr.current),t=Xy(e,n.type);e!==t&&(ze(Sh,n),ze(Cr,t))}function hb(n){Sh.current===n&&(Ve(Cr),Ve(Sh))}var Ze=Xo(0);function ag(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function fb(){for(var n=0;n<cy.length;n++)cy[n]._workInProgressVersionPrimary=null;cy.length=0}var tm=Pi.ReactCurrentDispatcher,uy=Pi.ReactCurrentBatchConfig,Al=0,Je=null,St=null,jt=null,lg=!1,th=!1,Eh=0,M2=0;function Vt(){throw Error($(321))}function pb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!qs(n[t],e[t]))return!1;return!0}function mb(n,e,t,s,r,i){if(Al=i,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tm.current=n===null||n.memoizedState===null?O2:F2,n=t(s,r),th){i=0;do{if(th=!1,Eh=0,25<=i)throw Error($(301));i+=1,jt=St=null,e.updateQueue=null,tm.current=H2,n=t(s,r)}while(th)}if(tm.current=cg,e=St!==null&&St.next!==null,Al=0,jt=St=Je=null,lg=!1,e)throw Error($(300));return n}function gb(){var n=Eh!==0;return Eh=0,n}function Js(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Je.memoizedState=jt=n:jt=jt.next=n,jt}function xs(){if(St===null){var n=Je.alternate;n=n!==null?n.memoizedState:null}else n=St.next;var e=jt===null?Je.memoizedState:jt.next;if(e!==null)jt=e,St=n;else{if(n===null)throw Error($(310));St=n,n={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},jt===null?Je.memoizedState=jt=n:jt=jt.next=n}return jt}function Ch(n,e){return typeof e=="function"?e(n):e}function dy(n){var e=xs(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var s=St,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((Al&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,Je.lanes|=d,El|=d}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,qs(s,e.memoizedState)||(Nn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,Je.lanes|=i,El|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function hy(n){var e=xs(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);qs(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function BC(){}function UC(n,e){var t=Je,s=xs(),r=e(),i=!qs(s.memoizedState,r);if(i&&(s.memoizedState=r,Nn=!0),s=s.queue,vb(GC.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||jt!==null&&jt.memoizedState.tag&1){if(t.flags|=2048,_h(9,WC.bind(null,t,s,r,e),void 0,null),It===null)throw Error($(349));Al&30||VC(t,e,r)}return r}function VC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function WC(n,e,t,s){e.value=t,e.getSnapshot=s,qC(e)&&KC(n)}function GC(n,e,t){return t(function(){qC(e)&&KC(n)})}function qC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qs(n,t)}catch{return!0}}function KC(n){var e=Ai(n,1);e!==null&&Gs(e,n,1,-1)}function SS(n){var e=Js();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ch,lastRenderedState:n},e.queue=n,n=n.dispatch=D2.bind(null,Je,n),[e.memoizedState,n]}function _h(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function XC(){return xs().memoizedState}function nm(n,e,t,s){var r=Js();Je.flags|=n,r.memoizedState=_h(1|e,t,void 0,s===void 0?null:s)}function nv(n,e,t,s){var r=xs();s=s===void 0?null:s;var i=void 0;if(St!==null){var o=St.memoizedState;if(i=o.destroy,s!==null&&pb(s,o.deps)){r.memoizedState=_h(e,t,i,s);return}}Je.flags|=n,r.memoizedState=_h(1|e,t,i,s)}function AS(n,e){return nm(8390656,8,n,e)}function vb(n,e){return nv(2048,8,n,e)}function YC(n,e){return nv(4,2,n,e)}function QC(n,e){return nv(4,4,n,e)}function ZC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function JC(n,e,t){return t=t!=null?t.concat([n]):null,nv(4,4,ZC.bind(null,e,n),t)}function yb(){}function e_(n,e){var t=xs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&pb(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function t_(n,e){var t=xs();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&pb(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function n_(n,e,t){return Al&21?(qs(t,e)||(t=aC(),Je.lanes|=t,El|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Nn=!0),n.memoizedState=t)}function j2(n,e){var t=Me;Me=t!==0&&4>t?t:4,n(!0);var s=uy.transition;uy.transition={};try{n(!1),e()}finally{Me=t,uy.transition=s}}function s_(){return xs().memoizedState}function I2(n,e,t){var s=Io(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},r_(n))i_(e,t);else if(t=HC(n,e,t,s),t!==null){var r=fn();Gs(t,n,s,r),o_(t,e,s)}}function D2(n,e,t){var s=Io(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(r_(n))i_(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,qs(a,o)){var l=e.interleaved;l===null?(r.next=r,cb(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=HC(n,e,r,s),t!==null&&(r=fn(),Gs(t,n,s,r),o_(t,e,s))}}function r_(n){var e=n.alternate;return n===Je||e!==null&&e===Je}function i_(n,e){th=lg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function o_(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,Xw(n,t)}}var cg={readContext:ys,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},O2={readContext:ys,useCallback:function(n,e){return Js().memoizedState=[n,e===void 0?null:e],n},useContext:ys,useEffect:AS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,nm(4194308,4,ZC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return nm(4194308,4,n,e)},useInsertionEffect:function(n,e){return nm(4,2,n,e)},useMemo:function(n,e){var t=Js();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Js();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=I2.bind(null,Je,n),[s.memoizedState,n]},useRef:function(n){var e=Js();return n={current:n},e.memoizedState=n},useState:SS,useDebugValue:yb,useDeferredValue:function(n){return Js().memoizedState=n},useTransition:function(){var n=SS(!1),e=n[0];return n=j2.bind(null,n[1]),Js().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Je,r=Js();if(qe){if(t===void 0)throw Error($(407));t=t()}else{if(t=e(),It===null)throw Error($(349));Al&30||VC(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,AS(GC.bind(null,s,i,n),[n]),s.flags|=2048,_h(9,WC.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Js(),e=It.identifierPrefix;if(qe){var t=di,s=ui;t=(s&~(1<<32-Ws(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Eh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=M2++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},F2={readContext:ys,useCallback:e_,useContext:ys,useEffect:vb,useImperativeHandle:JC,useInsertionEffect:YC,useLayoutEffect:QC,useMemo:t_,useReducer:dy,useRef:XC,useState:function(){return dy(Ch)},useDebugValue:yb,useDeferredValue:function(n){var e=xs();return n_(e,St.memoizedState,n)},useTransition:function(){var n=dy(Ch)[0],e=xs().memoizedState;return[n,e]},useMutableSource:BC,useSyncExternalStore:UC,useId:s_,unstable_isNewReconciler:!1},H2={readContext:ys,useCallback:e_,useContext:ys,useEffect:vb,useImperativeHandle:JC,useInsertionEffect:YC,useLayoutEffect:QC,useMemo:t_,useReducer:hy,useRef:XC,useState:function(){return hy(Ch)},useDebugValue:yb,useDeferredValue:function(n){var e=xs();return St===null?e.memoizedState=n:n_(e,St.memoizedState,n)},useTransition:function(){var n=hy(Ch)[0],e=xs().memoizedState;return[n,e]},useMutableSource:BC,useSyncExternalStore:UC,useId:s_,unstable_isNewReconciler:!1};function Es(n,e){if(n&&n.defaultProps){e=et({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function gx(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:et({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var sv={isMounted:function(n){return(n=n._reactInternals)?Fl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=fn(),r=Io(n),i=fi(s,r);i.payload=e,t!=null&&(i.callback=t),e=Mo(n,i,r),e!==null&&(Gs(e,n,r,s),em(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=fn(),r=Io(n),i=fi(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Mo(n,i,r),e!==null&&(Gs(e,n,r,s),em(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fn(),s=Io(n),r=fi(t,s);r.tag=2,e!=null&&(r.callback=e),e=Mo(n,r,s),e!==null&&(Gs(e,n,s,t),em(e,n,s))}};function ES(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!yh(t,s)||!yh(r,i):!0}function a_(n,e,t){var s=!1,r=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=ys(i):(r=Rn(e)?bl:sn.current,s=e.contextTypes,i=(s=s!=null)?qu(n,r):Fo),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sv,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function CS(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&sv.enqueueReplaceState(e,e.state,null)}function vx(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},ub(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=ys(i):(i=Rn(e)?bl:sn.current,r.context=qu(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gx(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&sv.enqueueReplaceState(r,r.state,null),og(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Qu(n,e){try{var t="",s=e;do t+=fM(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function fy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function l_(n,e,t){t=fi(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){dg||(dg=!0,Nx=s),yx(n,e)},t}function c_(n,e,t){t=fi(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){yx(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){yx(n,e),typeof s!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _S(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new z2;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=ej.bind(null,n,e,t),e.then(n,n))}function TS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function NS(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fi(-1,1),e.tag=2,Mo(t,e,1))),t.lanes|=1),n)}var $2=Pi.ReactCurrentOwner,Nn=!1;function cn(n,e,t,s){e.child=n===null?FC(e,null,t,s):Xu(e,n.child,t,s)}function PS(n,e,t,s,r){t=t.render;var i=e.ref;return Ec(e,r),s=mb(n,e,t,s,i,r),t=gb(),n!==null&&!Nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ei(n,e,r)):(qe&&t&&sb(e),e.flags|=1,cn(n,e,s,r),e.child)}function kS(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!_b(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,u_(n,e,i,s,r)):(n=om(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:yh,t(o,s)&&n.ref===e.ref)return Ei(n,e,r)}return e.flags|=1,n=Do(i,s),n.ref=e.ref,n.return=e,e.child=n}function u_(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(yh(i,s)&&n.ref===e.ref)if(Nn=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(Nn=!0);else return e.lanes=n.lanes,Ei(n,e,r)}return xx(n,e,t,s,r)}function d_(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(vc,Wn),Wn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ze(vc,Wn),Wn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,ze(vc,Wn),Wn|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,ze(vc,Wn),Wn|=s;return cn(n,e,r,t),e.child}function h_(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function xx(n,e,t,s,r){var i=Rn(t)?bl:sn.current;return i=qu(e,i),Ec(e,r),t=mb(n,e,t,s,i,r),s=gb(),n!==null&&!Nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ei(n,e,r)):(qe&&s&&sb(e),e.flags|=1,cn(n,e,t,r),e.child)}function RS(n,e,t,s,r){if(Rn(t)){var i=!0;tg(e)}else i=!1;if(Ec(e,r),e.stateNode===null)sm(n,e),a_(e,t,s),vx(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ys(u):(u=Rn(t)?bl:sn.current,u=qu(e,u));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&CS(e,o,s,u),zi=!1;var p=e.memoizedState;o.state=p,og(e,s,o,r),l=e.memoizedState,a!==s||p!==l||kn.current||zi?(typeof d=="function"&&(gx(e,t,d,s),l=e.memoizedState),(a=zi||ES(e,t,a,s,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,zC(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Es(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Rn(t)?bl:sn.current,l=qu(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&CS(e,o,s,l),zi=!1,p=e.memoizedState,o.state=p,og(e,s,o,r);var y=e.memoizedState;a!==f||p!==y||kn.current||zi?(typeof m=="function"&&(gx(e,t,m,s),y=e.memoizedState),(u=zi||ES(e,t,u,s,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return wx(n,e,t,s,i,r)}function wx(n,e,t,s,r,i){h_(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&gS(e,t,!1),Ei(n,e,i);s=e.stateNode,$2.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=Xu(e,n.child,null,i),e.child=Xu(e,null,a,i)):cn(n,e,a,i),e.memoizedState=s.state,r&&gS(e,t,!0),e.child}function f_(n){var e=n.stateNode;e.pendingContext?mS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&mS(n,e.context,!1),db(n,e.containerInfo)}function LS(n,e,t,s,r){return Ku(),ib(r),e.flags|=256,cn(n,e,t,s),e.child}var bx={dehydrated:null,treeContext:null,retryLane:0};function Sx(n){return{baseLanes:n,cachePool:null,transitions:null}}function p_(n,e,t){var s=e.pendingProps,r=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ze(Ze,r&1),n===null)return px(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ov(o,s,0,null),n=yl(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=Sx(t),e.memoizedState=bx,n):xb(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return B2(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Do(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Do(a,i):(i=yl(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?Sx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=bx,s}return i=n.child,n=i.sibling,s=Do(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function xb(n,e){return e=ov({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function kp(n,e,t,s){return s!==null&&ib(s),Xu(e,n.child,null,t),n=xb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function B2(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=fy(Error($(422))),kp(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=ov({mode:"visible",children:s.children},r,0,null),i=yl(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Xu(e,n.child,null,o),e.child.memoizedState=Sx(o),e.memoizedState=bx,i);if(!(e.mode&1))return kp(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error($(419)),s=fy(i,s,void 0),kp(n,e,o,s)}if(a=(o&n.childLanes)!==0,Nn||a){if(s=It,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ai(n,r),Gs(s,n,r,-1))}return Cb(),s=fy(Error($(421))),kp(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=tj.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,Xn=Lo(r.nextSibling),Yn=e,qe=!0,$s=null,n!==null&&(ds[hs++]=ui,ds[hs++]=di,ds[hs++]=Sl,ui=n.id,di=n.overflow,Sl=e),e=xb(e,s.children),e.flags|=4096,e)}function MS(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),mx(n.return,e,t)}function py(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function m_(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(cn(n,e,s.children,t),s=Ze.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&MS(n,t,e);else if(n.tag===19)MS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(ze(Ze,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&ag(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),py(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&ag(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}py(e,!0,t,null,i);break;case"together":py(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ei(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),El|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($(153));if(e.child!==null){for(n=e.child,t=Do(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Do(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function U2(n,e,t){switch(e.tag){case 3:f_(e),Ku();break;case 5:$C(e);break;case 1:Rn(e.type)&&tg(e);break;case 4:db(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ze(rg,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ze(Ze,Ze.current&1),e.flags|=128,null):t&e.child.childLanes?p_(n,e,t):(ze(Ze,Ze.current&1),n=Ei(n,e,t),n!==null?n.sibling:null);ze(Ze,Ze.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return m_(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(Ze,Ze.current),s)break;return null;case 22:case 23:return e.lanes=0,d_(n,e,t)}return Ei(n,e,t)}var g_,Ax,v_,y_;g_=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ax=function(){};v_=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,fa(Cr.current);var i=null;switch(t){case"input":r=Wy(n,r),s=Wy(n,s),i=[];break;case"select":r=et({},r,{value:void 0}),s=et({},s,{value:void 0}),i=[];break;case"textarea":r=Ky(n,r),s=Ky(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Jm)}Yy(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(dh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(dh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",n),i||a===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};y_=function(n,e,t,s){t!==s&&(e.flags|=4)};function bd(n,e){if(!qe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Wt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function V2(n,e,t){var s=e.pendingProps;switch(rb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return Rn(e.type)&&eg(),Wt(e),null;case 3:return s=e.stateNode,Yu(),Ve(kn),Ve(sn),fb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Np(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$s!==null&&(Rx($s),$s=null))),Ax(n,e),Wt(e),null;case 5:hb(e);var r=fa(Ah.current);if(t=e.type,n!==null&&e.stateNode!=null)v_(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error($(166));return Wt(e),null}if(n=fa(Cr.current),Np(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[Sr]=e,s[bh]=i,n=(e.mode&1)!==0,t){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(r=0;r<Rd.length;r++)Be(Rd[r],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":B1(s,i),Be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Be("invalid",s);break;case"textarea":V1(s,i),Be("invalid",s)}Yy(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Tp(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Tp(s.textContent,a,n),r=["children",""+a]):dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",s)}switch(t){case"input":xp(s),U1(s,i,!0);break;case"textarea":xp(s),W1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Jm)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=GE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Sr]=e,n[bh]=s,g_(n,e,!1,!1),e.stateNode=n;e:{switch(o=Qy(t,s),t){case"dialog":Be("cancel",n),Be("close",n),r=s;break;case"iframe":case"object":case"embed":Be("load",n),r=s;break;case"video":case"audio":for(r=0;r<Rd.length;r++)Be(Rd[r],n);r=s;break;case"source":Be("error",n),r=s;break;case"img":case"image":case"link":Be("error",n),Be("load",n),r=s;break;case"details":Be("toggle",n),r=s;break;case"input":B1(n,s),r=Wy(n,s),Be("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=et({},s,{value:void 0}),Be("invalid",n);break;case"textarea":V1(n,s),r=Ky(n,s),Be("invalid",n);break;default:r=s}Yy(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?XE(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qE(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&hh(n,l):typeof l=="number"&&hh(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Be("scroll",n):l!=null&&Uw(n,i,l,o))}switch(t){case"input":xp(n),U1(n,s,!1);break;case"textarea":xp(n),W1(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Oo(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?wc(n,!!s.multiple,i,!1):s.defaultValue!=null&&wc(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Jm)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(n&&e.stateNode!=null)y_(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error($(166));if(t=fa(Ah.current),fa(Cr.current),Np(e)){if(s=e.stateNode,t=e.memoizedProps,s[Sr]=e,(i=s.nodeValue!==t)&&(n=Yn,n!==null))switch(n.tag){case 3:Tp(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Tp(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Sr]=e,e.stateNode=s}return Wt(e),null;case 13:if(Ve(Ze),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(qe&&Xn!==null&&e.mode&1&&!(e.flags&128))DC(),Ku(),e.flags|=98560,i=!1;else if(i=Np(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Sr]=e}else Ku(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),i=!1}else $s!==null&&(Rx($s),$s=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Ze.current&1?Ct===0&&(Ct=3):Cb())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Yu(),Ax(n,e),n===null&&xh(e.stateNode.containerInfo),Wt(e),null;case 10:return lb(e.type._context),Wt(e),null;case 17:return Rn(e.type)&&eg(),Wt(e),null;case 19:if(Ve(Ze),i=e.memoizedState,i===null)return Wt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)bd(i,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=ag(n),o!==null){for(e.flags|=128,bd(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ze(Ze,Ze.current&1|2),e.child}n=n.sibling}i.tail!==null&&ct()>Zu&&(e.flags|=128,s=!0,bd(i,!1),e.lanes=4194304)}else{if(!s)if(n=ag(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Wt(e),null}else 2*ct()-i.renderingStartTime>Zu&&t!==1073741824&&(e.flags|=128,s=!0,bd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,t=Ze.current,ze(Ze,s?t&1|2:t&1),e):(Wt(e),null);case 22:case 23:return Eb(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Wn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function W2(n,e){switch(rb(e),e.tag){case 1:return Rn(e.type)&&eg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Yu(),Ve(kn),Ve(sn),fb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return hb(e),null;case 13:if(Ve(Ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ku()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ve(Ze),null;case 4:return Yu(),null;case 10:return lb(e.type._context),null;case 22:case 23:return Eb(),null;case 24:return null;default:return null}}var Rp=!1,en=!1,G2=typeof WeakSet=="function"?WeakSet:Set,K=null;function gc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){ot(n,e,s)}else t.current=null}function Ex(n,e,t){try{t()}catch(s){ot(n,e,s)}}var jS=!1;function q2(n,e){if(ax=Ym,n=AC(),nb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==i||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===r&&(a=o),p===i&&++d===s&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(lx={focusedElem:n,selectionRange:t},Ym=!1,K=e;K!==null;)if(e=K,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,K=n;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Es(e.type,v),S);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){ot(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}return y=jS,jS=!1,y}function nh(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&Ex(e,t,i)}r=r.next}while(r!==s)}}function rv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Cx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function x_(n){var e=n.alternate;e!==null&&(n.alternate=null,x_(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Sr],delete e[bh],delete e[dx],delete e[P2],delete e[k2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function w_(n){return n.tag===5||n.tag===3||n.tag===4}function IS(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||w_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _x(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Jm));else if(s!==4&&(n=n.child,n!==null))for(_x(n,e,t),n=n.sibling;n!==null;)_x(n,e,t),n=n.sibling}function Tx(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Tx(n,e,t),n=n.sibling;n!==null;)Tx(n,e,t),n=n.sibling}var zt=null,zs=!1;function Ri(n,e,t){for(t=t.child;t!==null;)b_(n,e,t),t=t.sibling}function b_(n,e,t){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Yg,t)}catch{}switch(t.tag){case 5:en||gc(t,e);case 6:var s=zt,r=zs;zt=null,Ri(n,e,t),zt=s,zs=r,zt!==null&&(zs?(n=zt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):zt.removeChild(t.stateNode));break;case 18:zt!==null&&(zs?(n=zt,t=t.stateNode,n.nodeType===8?ay(n.parentNode,t):n.nodeType===1&&ay(n,t),gh(n)):ay(zt,t.stateNode));break;case 4:s=zt,r=zs,zt=t.stateNode.containerInfo,zs=!0,Ri(n,e,t),zt=s,zs=r;break;case 0:case 11:case 14:case 15:if(!en&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ex(t,e,o),r=r.next}while(r!==s)}Ri(n,e,t);break;case 1:if(!en&&(gc(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){ot(t,e,a)}Ri(n,e,t);break;case 21:Ri(n,e,t);break;case 22:t.mode&1?(en=(s=en)||t.memoizedState!==null,Ri(n,e,t),en=s):Ri(n,e,t);break;default:Ri(n,e,t)}}function DS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new G2),e.forEach(function(s){var r=nj.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function bs(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zt=a.stateNode,zs=!1;break e;case 3:zt=a.stateNode.containerInfo,zs=!0;break e;case 4:zt=a.stateNode.containerInfo,zs=!0;break e}a=a.return}if(zt===null)throw Error($(160));b_(i,o,r),zt=null,zs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){ot(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S_(e,n),e=e.sibling}function S_(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bs(e,n),Qs(n),s&4){try{nh(3,n,n.return),rv(3,n)}catch(v){ot(n,n.return,v)}try{nh(5,n,n.return)}catch(v){ot(n,n.return,v)}}break;case 1:bs(e,n),Qs(n),s&512&&t!==null&&gc(t,t.return);break;case 5:if(bs(e,n),Qs(n),s&512&&t!==null&&gc(t,t.return),n.flags&32){var r=n.stateNode;try{hh(r,"")}catch(v){ot(n,n.return,v)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&VE(r,i),Qy(a,o);var u=Qy(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?XE(r,f):d==="dangerouslySetInnerHTML"?qE(r,f):d==="children"?hh(r,f):Uw(r,d,f,u)}switch(a){case"input":Gy(r,i);break;case"textarea":WE(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?wc(r,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?wc(r,!!i.multiple,i.defaultValue,!0):wc(r,!!i.multiple,i.multiple?[]:"",!1))}r[bh]=i}catch(v){ot(n,n.return,v)}}break;case 6:if(bs(e,n),Qs(n),s&4){if(n.stateNode===null)throw Error($(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(v){ot(n,n.return,v)}}break;case 3:if(bs(e,n),Qs(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{gh(e.containerInfo)}catch(v){ot(n,n.return,v)}break;case 4:bs(e,n),Qs(n);break;case 13:bs(e,n),Qs(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Sb=ct())),s&4&&DS(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(en=(u=en)||d,bs(e,n),en=u):bs(e,n),Qs(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(K=n,d=n.child;d!==null;){for(f=K=d;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:nh(4,p,p.return);break;case 1:gc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){ot(s,t,v)}}break;case 5:gc(p,p.return);break;case 22:if(p.memoizedState!==null){FS(f);continue}}m!==null?(m.return=p,K=m):FS(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=KE("display",o))}catch(v){ot(n,n.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ot(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bs(e,n),Qs(n),s&4&&DS(n);break;case 21:break;default:bs(e,n),Qs(n)}}function Qs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(w_(t)){var s=t;break e}t=t.return}throw Error($(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(hh(r,""),s.flags&=-33);var i=IS(n);Tx(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=IS(n);_x(n,a,o);break;default:throw Error($(161))}}catch(l){ot(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function K2(n,e,t){K=n,A_(n)}function A_(n,e,t){for(var s=(n.mode&1)!==0;K!==null;){var r=K,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Rp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||en;a=Rp;var u=en;if(Rp=o,(en=l)&&!u)for(K=r;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?HS(r):l!==null?(l.return=o,K=l):HS(r);for(;i!==null;)K=i,A_(i),i=i.sibling;K=r,Rp=a,en=u}OS(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,K=i):OS(n)}}function OS(n){for(;K!==null;){var e=K;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||rv(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!en)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Es(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bS(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bS(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&gh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}en||e.flags&512&&Cx(e)}catch(p){ot(e,e.return,p)}}if(e===n){K=null;break}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}}function FS(n){for(;K!==null;){var e=K;if(e===n){K=null;break}var t=e.sibling;if(t!==null){t.return=e.return,K=t;break}K=e.return}}function HS(n){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{rv(4,e)}catch(l){ot(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){ot(e,r,l)}}var i=e.return;try{Cx(e)}catch(l){ot(e,i,l)}break;case 5:var o=e.return;try{Cx(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===n){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var X2=Math.ceil,ug=Pi.ReactCurrentDispatcher,wb=Pi.ReactCurrentOwner,gs=Pi.ReactCurrentBatchConfig,Ee=0,It=null,pt=null,$t=0,Wn=0,vc=Xo(0),Ct=0,Th=null,El=0,iv=0,bb=0,sh=null,Tn=null,Sb=0,Zu=1/0,jr=null,dg=!1,Nx=null,jo=null,Lp=!1,No=null,hg=0,rh=0,Px=null,rm=-1,im=0;function fn(){return Ee&6?ct():rm!==-1?rm:rm=ct()}function Io(n){return n.mode&1?Ee&2&&$t!==0?$t&-$t:L2.transition!==null?(im===0&&(im=aC()),im):(n=Me,n!==0||(n=window.event,n=n===void 0?16:pC(n.type)),n):1}function Gs(n,e,t,s){if(50<rh)throw rh=0,Px=null,Error($(185));Jf(n,t,s),(!(Ee&2)||n!==It)&&(n===It&&(!(Ee&2)&&(iv|=t),Ct===4&&Bi(n,$t)),Ln(n,s),t===1&&Ee===0&&!(e.mode&1)&&(Zu=ct()+500,tv&&Yo()))}function Ln(n,e){var t=n.callbackNode;LM(n,e);var s=Xm(n,n===It?$t:0);if(s===0)t!==null&&K1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&K1(t),e===1)n.tag===0?R2(zS.bind(null,n)):MC(zS.bind(null,n)),T2(function(){!(Ee&6)&&Yo()}),t=null;else{switch(lC(s)){case 1:t=Kw;break;case 4:t=iC;break;case 16:t=Km;break;case 536870912:t=oC;break;default:t=Km}t=R_(t,E_.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function E_(n,e){if(rm=-1,im=0,Ee&6)throw Error($(327));var t=n.callbackNode;if(Cc()&&n.callbackNode!==t)return null;var s=Xm(n,n===It?$t:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=fg(n,s);else{e=s;var r=Ee;Ee|=2;var i=__();(It!==n||$t!==e)&&(jr=null,Zu=ct()+500,vl(n,e));do try{Z2();break}catch(a){C_(n,a)}while(!0);ab(),ug.current=i,Ee=r,pt!==null?e=0:(It=null,$t=0,e=Ct)}if(e!==0){if(e===2&&(r=nx(n),r!==0&&(s=r,e=kx(n,r))),e===1)throw t=Th,vl(n,0),Bi(n,s),Ln(n,ct()),t;if(e===6)Bi(n,s);else{if(r=n.current.alternate,!(s&30)&&!Y2(r)&&(e=fg(n,s),e===2&&(i=nx(n),i!==0&&(s=i,e=kx(n,i))),e===1))throw t=Th,vl(n,0),Bi(n,s),Ln(n,ct()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error($(345));case 2:ra(n,Tn,jr);break;case 3:if(Bi(n,s),(s&130023424)===s&&(e=Sb+500-ct(),10<e)){if(Xm(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){fn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=ux(ra.bind(null,n,Tn,jr),e);break}ra(n,Tn,jr);break;case 4:if(Bi(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-Ws(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=ct()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*X2(s/1960))-s,10<s){n.timeoutHandle=ux(ra.bind(null,n,Tn,jr),s);break}ra(n,Tn,jr);break;case 5:ra(n,Tn,jr);break;default:throw Error($(329))}}}return Ln(n,ct()),n.callbackNode===t?E_.bind(null,n):null}function kx(n,e){var t=sh;return n.current.memoizedState.isDehydrated&&(vl(n,e).flags|=256),n=fg(n,e),n!==2&&(e=Tn,Tn=t,e!==null&&Rx(e)),n}function Rx(n){Tn===null?Tn=n:Tn.push.apply(Tn,n)}function Y2(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!qs(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(n,e){for(e&=~bb,e&=~iv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ws(e),s=1<<t;n[t]=-1,e&=~s}}function zS(n){if(Ee&6)throw Error($(327));Cc();var e=Xm(n,0);if(!(e&1))return Ln(n,ct()),null;var t=fg(n,e);if(n.tag!==0&&t===2){var s=nx(n);s!==0&&(e=s,t=kx(n,s))}if(t===1)throw t=Th,vl(n,0),Bi(n,e),Ln(n,ct()),t;if(t===6)throw Error($(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ra(n,Tn,jr),Ln(n,ct()),null}function Ab(n,e){var t=Ee;Ee|=1;try{return n(e)}finally{Ee=t,Ee===0&&(Zu=ct()+500,tv&&Yo())}}function Cl(n){No!==null&&No.tag===0&&!(Ee&6)&&Cc();var e=Ee;Ee|=1;var t=gs.transition,s=Me;try{if(gs.transition=null,Me=1,n)return n()}finally{Me=s,gs.transition=t,Ee=e,!(Ee&6)&&Yo()}}function Eb(){Wn=vc.current,Ve(vc)}function vl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,_2(t)),pt!==null)for(t=pt.return;t!==null;){var s=t;switch(rb(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&eg();break;case 3:Yu(),Ve(kn),Ve(sn),fb();break;case 5:hb(s);break;case 4:Yu();break;case 13:Ve(Ze);break;case 19:Ve(Ze);break;case 10:lb(s.type._context);break;case 22:case 23:Eb()}t=t.return}if(It=n,pt=n=Do(n.current,null),$t=Wn=e,Ct=0,Th=null,bb=iv=El=0,Tn=sh=null,ha!==null){for(e=0;e<ha.length;e++)if(t=ha[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}ha=null}return n}function C_(n,e){do{var t=pt;try{if(ab(),tm.current=cg,lg){for(var s=Je.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}lg=!1}if(Al=0,jt=St=Je=null,th=!1,Eh=0,wb.current=null,t===null||t.return===null){Ct=1,Th=e,pt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=$t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=TS(o);if(m!==null){m.flags&=-257,NS(m,o,a,i,e),m.mode&1&&_S(i,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){_S(i,u,e),Cb();break e}l=Error($(426))}}else if(qe&&a.mode&1){var S=TS(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),NS(S,o,a,i,e),ib(Qu(l,a));break e}}i=l=Qu(l,a),Ct!==4&&(Ct=2),sh===null?sh=[i]:sh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=l_(i,l,e);wS(i,g);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jo===null||!jo.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=c_(i,a,e);wS(i,C);break e}}i=i.return}while(i!==null)}N_(t)}catch(T){e=T,pt===t&&t!==null&&(pt=t=t.return);continue}break}while(!0)}function __(){var n=ug.current;return ug.current=cg,n===null?cg:n}function Cb(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),It===null||!(El&268435455)&&!(iv&268435455)||Bi(It,$t)}function fg(n,e){var t=Ee;Ee|=2;var s=__();(It!==n||$t!==e)&&(jr=null,vl(n,e));do try{Q2();break}catch(r){C_(n,r)}while(!0);if(ab(),Ee=t,ug.current=s,pt!==null)throw Error($(261));return It=null,$t=0,Ct}function Q2(){for(;pt!==null;)T_(pt)}function Z2(){for(;pt!==null&&!AM();)T_(pt)}function T_(n){var e=k_(n.alternate,n,Wn);n.memoizedProps=n.pendingProps,e===null?N_(n):pt=e,wb.current=null}function N_(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=W2(t,e),t!==null){t.flags&=32767,pt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,pt=null;return}}else if(t=V2(t,e,Wn),t!==null){pt=t;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=n}while(e!==null);Ct===0&&(Ct=5)}function ra(n,e,t){var s=Me,r=gs.transition;try{gs.transition=null,Me=1,J2(n,e,t,s)}finally{gs.transition=r,Me=s}return null}function J2(n,e,t,s){do Cc();while(No!==null);if(Ee&6)throw Error($(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(MM(n,i),n===It&&(pt=It=null,$t=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Lp||(Lp=!0,R_(Km,function(){return Cc(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=gs.transition,gs.transition=null;var o=Me;Me=1;var a=Ee;Ee|=4,wb.current=null,q2(n,t),S_(t,n),x2(lx),Ym=!!ax,lx=ax=null,n.current=t,K2(t),EM(),Ee=a,Me=o,gs.transition=i}else n.current=t;if(Lp&&(Lp=!1,No=n,hg=r),i=n.pendingLanes,i===0&&(jo=null),TM(t.stateNode),Ln(n,ct()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(dg)throw dg=!1,n=Nx,Nx=null,n;return hg&1&&n.tag!==0&&Cc(),i=n.pendingLanes,i&1?n===Px?rh++:(rh=0,Px=n):rh=0,Yo(),null}function Cc(){if(No!==null){var n=lC(hg),e=gs.transition,t=Me;try{if(gs.transition=null,Me=16>n?16:n,No===null)var s=!1;else{if(n=No,No=null,hg=0,Ee&6)throw Error($(331));var r=Ee;for(Ee|=4,K=n.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:nh(8,d,i)}var f=d.child;if(f!==null)f.return=d,K=f;else for(;K!==null;){d=K;var p=d.sibling,m=d.return;if(x_(d),d===u){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nh(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,K=g;break e}K=i.return}}var x=n.current;for(K=x;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=x;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rv(9,a)}}catch(T){ot(a,a.return,T)}if(a===o){K=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,K=C;break e}K=a.return}}if(Ee=r,Yo(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Yg,n)}catch{}s=!0}return s}finally{Me=t,gs.transition=e}}return!1}function $S(n,e,t){e=Qu(t,e),e=l_(n,e,1),n=Mo(n,e,1),e=fn(),n!==null&&(Jf(n,1,e),Ln(n,e))}function ot(n,e,t){if(n.tag===3)$S(n,n,t);else for(;e!==null;){if(e.tag===3){$S(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jo===null||!jo.has(s))){n=Qu(t,n),n=c_(e,n,1),e=Mo(e,n,1),n=fn(),e!==null&&(Jf(e,1,n),Ln(e,n));break}}e=e.return}}function ej(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=fn(),n.pingedLanes|=n.suspendedLanes&t,It===n&&($t&t)===t&&(Ct===4||Ct===3&&($t&130023424)===$t&&500>ct()-Sb?vl(n,0):bb|=t),Ln(n,e)}function P_(n,e){e===0&&(n.mode&1?(e=Sp,Sp<<=1,!(Sp&130023424)&&(Sp=4194304)):e=1);var t=fn();n=Ai(n,e),n!==null&&(Jf(n,e,t),Ln(n,t))}function tj(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),P_(n,t)}function nj(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error($(314))}s!==null&&s.delete(e),P_(n,t)}var k_;k_=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||kn.current)Nn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Nn=!1,U2(n,e,t);Nn=!!(n.flags&131072)}else Nn=!1,qe&&e.flags&1048576&&jC(e,sg,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;sm(n,e),n=e.pendingProps;var r=qu(e,sn.current);Ec(e,t),r=mb(null,e,s,n,r,t);var i=gb();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rn(s)?(i=!0,tg(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ub(e),r.updater=sv,e.stateNode=r,r._reactInternals=e,vx(e,s,n,t),e=wx(null,e,s,!0,i,t)):(e.tag=0,qe&&i&&sb(e),cn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(sm(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=rj(s),n=Es(s,n),r){case 0:e=xx(null,e,s,n,t);break e;case 1:e=RS(null,e,s,n,t);break e;case 11:e=PS(null,e,s,n,t);break e;case 14:e=kS(null,e,s,Es(s.type,n),t);break e}throw Error($(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Es(s,r),xx(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Es(s,r),RS(n,e,s,r,t);case 3:e:{if(f_(e),n===null)throw Error($(387));s=e.pendingProps,i=e.memoizedState,r=i.element,zC(n,e),og(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Qu(Error($(423)),e),e=LS(n,e,s,t,r);break e}else if(s!==r){r=Qu(Error($(424)),e),e=LS(n,e,s,t,r);break e}else for(Xn=Lo(e.stateNode.containerInfo.firstChild),Yn=e,qe=!0,$s=null,t=FC(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ku(),s===r){e=Ei(n,e,t);break e}cn(n,e,s,t)}e=e.child}return e;case 5:return $C(e),n===null&&px(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,cx(s,r)?o=null:i!==null&&cx(s,i)&&(e.flags|=32),h_(n,e),cn(n,e,o,t),e.child;case 6:return n===null&&px(e),null;case 13:return p_(n,e,t);case 4:return db(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Xu(e,null,s,t):cn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Es(s,r),PS(n,e,s,r,t);case 7:return cn(n,e,e.pendingProps,t),e.child;case 8:return cn(n,e,e.pendingProps.children,t),e.child;case 12:return cn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ze(rg,s._currentValue),s._currentValue=o,i!==null)if(qs(i.value,o)){if(i.children===r.children&&!kn.current){e=Ei(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=fi(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),mx(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),mx(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}cn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Ec(e,t),r=ys(r),s=s(r),e.flags|=1,cn(n,e,s,t),e.child;case 14:return s=e.type,r=Es(s,e.pendingProps),r=Es(s.type,r),kS(n,e,s,r,t);case 15:return u_(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Es(s,r),sm(n,e),e.tag=1,Rn(s)?(n=!0,tg(e)):n=!1,Ec(e,t),a_(e,s,r),vx(e,s,r,t),wx(null,e,s,!0,n,t);case 19:return m_(n,e,t);case 22:return d_(n,e,t)}throw Error($(156,e.tag))};function R_(n,e){return rC(n,e)}function sj(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,e,t,s){return new sj(n,e,t,s)}function _b(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rj(n){if(typeof n=="function")return _b(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ww)return 11;if(n===Gw)return 14}return 2}function Do(n,e){var t=n.alternate;return t===null?(t=ms(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function om(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")_b(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ac:return yl(t.children,r,i,e);case Vw:o=8,r|=8;break;case $y:return n=ms(12,t,e,r|2),n.elementType=$y,n.lanes=i,n;case By:return n=ms(13,t,e,r),n.elementType=By,n.lanes=i,n;case Uy:return n=ms(19,t,e,r),n.elementType=Uy,n.lanes=i,n;case $E:return ov(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case HE:o=10;break e;case zE:o=9;break e;case Ww:o=11;break e;case Gw:o=14;break e;case Hi:o=16,s=null;break e}throw Error($(130,n==null?n:typeof n,""))}return e=ms(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function yl(n,e,t,s){return n=ms(7,n,s,e),n.lanes=t,n}function ov(n,e,t,s){return n=ms(22,n,s,e),n.elementType=$E,n.lanes=t,n.stateNode={isHidden:!1},n}function my(n,e,t){return n=ms(6,n,null,e),n.lanes=t,n}function gy(n,e,t){return e=ms(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function ij(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yv(0),this.expirationTimes=Yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yv(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Tb(n,e,t,s,r,i,o,a,l){return n=new ij(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ms(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ub(i),n}function oj(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oc,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function L_(n){if(!n)return Fo;n=n._reactInternals;e:{if(Fl(n)!==n||n.tag!==1)throw Error($(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(n.tag===1){var t=n.type;if(Rn(t))return LC(n,t,e)}return e}function M_(n,e,t,s,r,i,o,a,l){return n=Tb(t,s,!0,n,r,i,o,a,l),n.context=L_(null),t=n.current,s=fn(),r=Io(t),i=fi(s,r),i.callback=e??null,Mo(t,i,r),n.current.lanes=r,Jf(n,r,s),Ln(n,s),n}function av(n,e,t,s){var r=e.current,i=fn(),o=Io(r);return t=L_(t),e.context===null?e.context=t:e.pendingContext=t,e=fi(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Mo(r,e,o),n!==null&&(Gs(n,r,o,i),em(n,r,o)),o}function pg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function BS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Nb(n,e){BS(n,e),(n=n.alternate)&&BS(n,e)}function aj(){return null}var j_=typeof reportError=="function"?reportError:function(n){console.error(n)};function Pb(n){this._internalRoot=n}lv.prototype.render=Pb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($(409));av(n,e,null,null)};lv.prototype.unmount=Pb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Cl(function(){av(null,n,null,null)}),e[Si]=null}};function lv(n){this._internalRoot=n}lv.prototype.unstable_scheduleHydration=function(n){if(n){var e=dC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<$i.length&&e!==0&&e<$i[t].priority;t++);$i.splice(t,0,n),t===0&&fC(n)}};function kb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function cv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function US(){}function lj(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=pg(o);i.call(u)}}var o=M_(e,s,n,0,null,!1,!1,"",US);return n._reactRootContainer=o,n[Si]=o.current,xh(n.nodeType===8?n.parentNode:n),Cl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=pg(l);a.call(u)}}var l=Tb(n,0,!1,null,null,!1,!1,"",US);return n._reactRootContainer=l,n[Si]=l.current,xh(n.nodeType===8?n.parentNode:n),Cl(function(){av(e,l,t,s)}),l}function uv(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=pg(o);a.call(l)}}av(e,o,n,r)}else o=lj(t,e,n,r,s);return pg(o)}cC=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=kd(e.pendingLanes);t!==0&&(Xw(e,t|1),Ln(e,ct()),!(Ee&6)&&(Zu=ct()+500,Yo()))}break;case 13:Cl(function(){var s=Ai(n,1);if(s!==null){var r=fn();Gs(s,n,1,r)}}),Nb(n,1)}};Yw=function(n){if(n.tag===13){var e=Ai(n,134217728);if(e!==null){var t=fn();Gs(e,n,134217728,t)}Nb(n,134217728)}};uC=function(n){if(n.tag===13){var e=Io(n),t=Ai(n,e);if(t!==null){var s=fn();Gs(t,n,e,s)}Nb(n,e)}};dC=function(){return Me};hC=function(n,e){var t=Me;try{return Me=n,e()}finally{Me=t}};Jy=function(n,e,t){switch(e){case"input":if(Gy(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=ev(s);if(!r)throw Error($(90));UE(s),Gy(s,r)}}}break;case"textarea":WE(n,t);break;case"select":e=t.value,e!=null&&wc(n,!!t.multiple,e,!1)}};ZE=Ab;JE=Cl;var cj={usingClientEntryPoint:!1,Events:[tp,dc,ev,YE,QE,Ab]},Sd={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uj={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nC(n),n===null?null:n.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||aj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mp.isDisabled&&Mp.supportsFiber)try{Yg=Mp.inject(uj),Er=Mp}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cj;es.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kb(e))throw Error($(200));return oj(n,e,null,t)};es.createRoot=function(n,e){if(!kb(n))throw Error($(299));var t=!1,s="",r=j_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Tb(n,1,!1,null,null,t,!1,s,r),n[Si]=e.current,xh(n.nodeType===8?n.parentNode:n),new Pb(e)};es.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($(188)):(n=Object.keys(n).join(","),Error($(268,n)));return n=nC(e),n=n===null?null:n.stateNode,n};es.flushSync=function(n){return Cl(n)};es.hydrate=function(n,e,t){if(!cv(e))throw Error($(200));return uv(null,n,e,!0,t)};es.hydrateRoot=function(n,e,t){if(!kb(n))throw Error($(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=j_;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=M_(e,null,n,1,t??null,r,!1,i,o),n[Si]=e.current,xh(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new lv(e)};es.render=function(n,e,t){if(!cv(e))throw Error($(200));return uv(null,n,e,!1,t)};es.unmountComponentAtNode=function(n){if(!cv(n))throw Error($(40));return n._reactRootContainer?(Cl(function(){uv(null,null,n,!1,function(){n._reactRootContainer=null,n[Si]=null})}),!0):!1};es.unstable_batchedUpdates=Ab;es.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!cv(t))throw Error($(200));if(n==null||n._reactInternals===void 0)throw Error($(38));return uv(n,e,t,!1,s)};es.version="18.3.1-next-f1338f8080-20240426";function I_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I_)}catch(n){console.error(n)}}I_(),IE.exports=es;var Hl=IE.exports;const dj=Iw(Hl);var D_,VS=Hl;D_=VS.createRoot,VS.hydrateRoot;function hj(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,r,i,o=[],a="",l=n.split("/");for(l[0]||l.shift();r=l.shift();)t=r[0],t==="*"?(o.push(t),a+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=r.indexOf("?",1),i=r.indexOf(".",1),o.push(r.substring(1,~s?s:~i?i:r.length)),a+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~s?"?":"")+"\\"+r.substring(i))):a+="/"+r;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var O_={exports:{}},F_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=w;function fj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pj=typeof Object.is=="function"?Object.is:fj,mj=Ju.useState,gj=Ju.useEffect,vj=Ju.useLayoutEffect,yj=Ju.useDebugValue;function xj(n,e){var t=e(),s=mj({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return vj(function(){r.value=t,r.getSnapshot=e,vy(r)&&i({inst:r})},[n,t,e]),gj(function(){return vy(r)&&i({inst:r}),n(function(){vy(r)&&i({inst:r})})},[n]),yj(t),t}function vy(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!pj(n,t)}catch{return!0}}function wj(n,e){return e()}var bj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wj:xj;F_.useSyncExternalStore=Ju.useSyncExternalStore!==void 0?Ju.useSyncExternalStore:bj;O_.exports=F_;var Sj=O_.exports;const Aj=zw.useInsertionEffect,Ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cj=Ej?w.useLayoutEffect:w.useEffect,_j=Aj||Cj,H_=n=>{const e=w.useRef([n,(...t)=>e[0](...t)]).current;return _j(()=>{e[0]=n}),e[1]},Tj="popstate",Rb="pushState",Lb="replaceState",Nj="hashchange",WS=[Tj,Rb,Lb,Nj],Pj=n=>{for(const e of WS)addEventListener(e,n);return()=>{for(const e of WS)removeEventListener(e,n)}},z_=(n,e)=>Sj.useSyncExternalStore(Pj,n,e),kj=()=>location.search,Rj=({ssrSearch:n=""}={})=>z_(kj,()=>n),GS=()=>location.pathname,Lj=({ssrPath:n}={})=>z_(GS,n?()=>n:GS),Mj=(n,{replace:e=!1,state:t=null}={})=>history[e?Lb:Rb](t,"",n),jj=(n={})=>[Lj(n),Mj],qS=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[qS]>"u"){for(const n of[Rb,Lb]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,qS,{value:!0})}const Ij=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",$_=(n="")=>n==="/"?"":n,Dj=(n,e)=>n[0]==="~"?n.slice(1):$_(e)+n,Oj=(n="",e)=>Ij(KS($_(n)),KS(e)),KS=n=>{try{return decodeURI(n)}catch{return n}},B_={hook:jj,searchHook:Rj,parser:hj,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},U_=w.createContext(B_),sp=()=>w.useContext(U_),V_={},W_=w.createContext(V_),G_=()=>w.useContext(W_),dv=n=>{const[e,t]=n.hook(n);return[Oj(n.base,e),H_((s,r)=>t(Dj(s,n.base),r))]},q_=()=>dv(sp()),K_=(n,e,t,s)=>{const{pattern:r,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),o=r.exec(t)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,l[p]])):o.groups;let d={...l};return u&&Object.assign(d,u),d})(),...s?[a]:[]]:[!1,null]},Fj=({children:n,...e})=>{var d,f;const t=sp(),s=e.hook?B_:t;let r=s;const[i,o]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=w.useRef({}),l=a.current,u=l;for(let p in s){const m=p==="base"?s[p]+(e[p]||""):e[p]||s[p];l===u&&m!==u[p]&&(a.current=u={...u}),u[p]=m,m!==s[p]&&(r=u)}return w.createElement(U_.Provider,{value:r,children:n})},XS=({children:n,component:e},t)=>e?w.createElement(e,{params:t}):typeof n=="function"?n(t):n,Hj=n=>{let e=w.useRef(V_),t=e.current;for(const s in n)n[s]!==t[s]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},ta=({path:n,nest:e,match:t,...s})=>{const r=sp(),[i]=dv(r),[o,a,l]=t??K_(r.parser,n,i,e),u=Hj({...G_(),...a});if(!o)return null;const d=l?w.createElement(Fj,{base:l},XS(s,u)):XS(s,u);return w.createElement(W_.Provider,{value:u,children:d})},ih=w.forwardRef((n,e)=>{const t=sp(),[s,r]=dv(t),{to:i="",href:o=i,onClick:a,asChild:l,children:u,className:d,replace:f,state:p,...m}=n,y=H_(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(a==null||a(S),S.defaultPrevented||(S.preventDefault(),r(o,n)))}),v=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return l&&w.isValidElement(u)?w.cloneElement(u,{onClick:y,href:v}):w.createElement("a",{...m,onClick:y,href:v,className:d!=null&&d.call?d(s===o):d,children:u,ref:e})}),X_=n=>Array.isArray(n)?n.flatMap(e=>X_(e&&e.type===w.Fragment?e.props.children:e)):[n],zj=({children:n,location:e})=>{const t=sp(),[s]=dv(t);for(const r of X_(n)){let i=0;if(w.isValidElement(r)&&(i=K_(t.parser,r.props.path,e||s,r.props.nest))[0])return w.cloneElement(r,{match:i})}return null};var cd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_l=typeof window>"u"||"Deno"in globalThis;function us(){}function $j(n,e){return typeof n=="function"?n(e):n}function Lx(n){return typeof n=="number"&&n>=0&&n!==1/0}function Y_(n,e){return Math.max(n+(e||0)-Date.now(),0)}function _c(n,e){return typeof n=="function"?n(e):n}function Bs(n,e){return typeof n=="function"?n(e):n}function YS(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:o,stale:a}=n;if(o){if(s){if(e.queryHash!==Mb(o,e.options))return!1}else if(!Nh(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||i&&!i(e))}function QS(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Tl(e.options.mutationKey)!==Tl(i))return!1}else if(!Nh(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function Mb(n,e){return((e==null?void 0:e.queryKeyHashFn)||Tl)(n)}function Tl(n){return JSON.stringify(n,(e,t)=>Mx(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function Nh(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Nh(n[t],e[t])):!1}function Q_(n,e){if(n===e)return n;const t=ZS(n)&&ZS(e);if(t||Mx(n)&&Mx(e)){const s=t?n:Object.keys(n),r=s.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let u=0;u<o;u++){const d=t?u:i[u];(!t&&s.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=Q_(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&l++)}return r===o&&l===r?n:a}return e}function mg(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function ZS(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Mx(n){if(!JS(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!JS(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function JS(n){return Object.prototype.toString.call(n)==="[object Object]"}function Bj(n){return new Promise(e=>{setTimeout(e,n)})}function jx(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Q_(n,e):e}function Uj(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function Vj(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var jb=Symbol();function Z_(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===jb?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var pa,Vi,Ic,hE,Wj=(hE=class extends cd{constructor(){super();_(this,pa);_(this,Vi);_(this,Ic);A(this,Ic,e=>{if(!_l&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){c(this,Vi)||this.setEventListener(c(this,Ic))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Vi))==null||e.call(this),A(this,Vi,void 0))}setEventListener(e){var t;A(this,Ic,e),(t=c(this,Vi))==null||t.call(this),A(this,Vi,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){c(this,pa)!==e&&(A(this,pa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof c(this,pa)=="boolean"?c(this,pa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},pa=new WeakMap,Vi=new WeakMap,Ic=new WeakMap,hE),Ib=new Wj,Dc,Wi,Oc,fE,Gj=(fE=class extends cd{constructor(){super();_(this,Dc,!0);_(this,Wi);_(this,Oc);A(this,Oc,e=>{if(!_l&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){c(this,Wi)||this.setEventListener(c(this,Oc))}onUnsubscribe(){var e;this.hasListeners()||((e=c(this,Wi))==null||e.call(this),A(this,Wi,void 0))}setEventListener(e){var t;A(this,Oc,e),(t=c(this,Wi))==null||t.call(this),A(this,Wi,e(this.setOnline.bind(this)))}setOnline(e){c(this,Dc)!==e&&(A(this,Dc,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return c(this,Dc)}},Dc=new WeakMap,Wi=new WeakMap,Oc=new WeakMap,fE),gg=new Gj;function Ix(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}function qj(n){return Math.min(1e3*2**n,3e4)}function J_(n){return(n??"online")==="online"?gg.isOnline():!0}var eT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function yy(n){return n instanceof eT}function tT(n){let e=!1,t=0,s=!1,r;const i=Ix(),o=v=>{var S;s||(p(new eT(v)),(S=n.abort)==null||S.call(n))},a=()=>{e=!0},l=()=>{e=!1},u=()=>Ib.isFocused()&&(n.networkMode==="always"||gg.isOnline())&&n.canRun(),d=()=>J_(n.networkMode)&&n.canRun(),f=v=>{var S;s||(s=!0,(S=n.onSuccess)==null||S.call(n,v),r==null||r(),i.resolve(v))},p=v=>{var S;s||(s=!0,(S=n.onError)==null||S.call(n,v),r==null||r(),i.reject(v))},m=()=>new Promise(v=>{var S;r=g=>{(s||u())&&v(g)},(S=n.onPause)==null||S.call(n)}).then(()=>{var v;r=void 0,s||(v=n.onContinue)==null||v.call(n)}),y=()=>{if(s)return;let v;const S=t===0?n.initialPromise:void 0;try{v=S??n.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var N;if(s)return;const x=n.retry??(_l?0:3),b=n.retryDelay??qj,C=typeof b=="function"?b(t,g):b,T=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,g);if(e||!T){p(g);return}t++,(N=n.onFail)==null||N.call(n,t,g),Bj(C).then(()=>u()?void 0:m()).then(()=>{e?p(g):y()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?y():m().then(y),i)}}function Kj(){let n=[],e=0,t=a=>{a()},s=a=>{a()},r=a=>setTimeout(a,0);const i=a=>{e?n.push(a):r(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&r(()=>{s(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{s=a},setScheduler:a=>{r=a}}}var At=Kj(),ma,pE,nT=(pE=class{constructor(){_(this,ma)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lx(this.gcTime)&&A(this,ma,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(_l?1/0:5*60*1e3))}clearGcTimeout(){c(this,ma)&&(clearTimeout(c(this,ma)),A(this,ma,void 0))}},ma=new WeakMap,pE),Fc,Hc,rs,Kt,Lh,ga,_s,Lr,mE,Xj=(mE=class extends nT{constructor(e){super();_(this,_s);_(this,Fc);_(this,Hc);_(this,rs);_(this,Kt);_(this,Lh);_(this,ga);A(this,ga,!1),A(this,Lh,e.defaultOptions),this.setOptions(e.options),this.observers=[],A(this,rs,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,A(this,Fc,Yj(this.options)),this.state=e.state??c(this,Fc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=c(this,Kt))==null?void 0:e.promise}setOptions(e){this.options={...c(this,Lh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,rs).remove(this)}setData(e,t){const s=jx(this.state.data,e,this.options);return E(this,_s,Lr).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){E(this,_s,Lr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=c(this,Kt))==null?void 0:s.promise;return(r=c(this,Kt))==null||r.cancel(e),t?t.then(us).catch(us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,Fc))}isActive(){return this.observers.some(e=>Bs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Y_(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Kt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=c(this,Kt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),c(this,rs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(c(this,Kt)&&(c(this,ga)?c(this,Kt).cancel({revert:!0}):c(this,Kt).cancelRetry()),this.scheduleGc()),c(this,rs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||E(this,_s,Lr).call(this,{type:"invalidate"})}fetch(e,t){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(c(this,Kt))return c(this,Kt).continueRetry(),c(this,Kt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,r=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(A(this,ga,!0),s.signal)})},i=()=>{const f=Z_(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return r(p),A(this,ga,!1),this.options.persister?this.options.persister(f,p,this):f(p)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(o),(l=this.options.behavior)==null||l.onFetch(o,this),A(this,Hc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&E(this,_s,Lr).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=f=>{var p,m,y,v;yy(f)&&f.silent||E(this,_s,Lr).call(this,{type:"error",error:f}),yy(f)||((m=(p=c(this,rs).config).onError)==null||m.call(p,f,this),(v=(y=c(this,rs).config).onSettled)==null||v.call(y,this.state.data,f,this)),this.scheduleGc()};return A(this,Kt,tT({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var p,m,y,v;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(S){a(S);return}(m=(p=c(this,rs).config).onSuccess)==null||m.call(p,f,this),(v=(y=c(this,rs).config).onSettled)==null||v.call(y,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,p)=>{E(this,_s,Lr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{E(this,_s,Lr).call(this,{type:"pause"})},onContinue:()=>{E(this,_s,Lr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),c(this,Kt).start()}},Fc=new WeakMap,Hc=new WeakMap,rs=new WeakMap,Kt=new WeakMap,Lh=new WeakMap,ga=new WeakMap,_s=new WeakSet,Lr=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...sT(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return yy(r)&&r.revert&&c(this,Hc)?{...c(this,Hc),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),At.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),c(this,rs).notify({query:this,type:"updated",action:e})})},mE);function sT(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:J_(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Yj(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var er,gE,Qj=(gE=class extends cd{constructor(e={}){super();_(this,er);this.config=e,A(this,er,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??Mb(r,t);let o=this.get(i);return o||(o=new Xj({cache:this,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){c(this,er).has(e.queryHash)||(c(this,er).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=c(this,er).get(e.queryHash);t&&(e.destroy(),t===e&&c(this,er).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){At.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return c(this,er).get(e)}getAll(){return[...c(this,er).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>YS(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>YS(e,s)):t}notify(e){At.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){At.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){At.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},er=new WeakMap,gE),tr,an,va,nr,Ii,vE,Zj=(vE=class extends nT{constructor(e){super();_(this,nr);_(this,tr);_(this,an);_(this,va);this.mutationId=e.mutationId,A(this,an,e.mutationCache),A(this,tr,[]),this.state=e.state||rT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){c(this,tr).includes(e)||(c(this,tr).push(e),this.clearGcTimeout(),c(this,an).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){A(this,tr,c(this,tr).filter(t=>t!==e)),this.scheduleGc(),c(this,an).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){c(this,tr).length||(this.state.status==="pending"?this.scheduleGc():c(this,an).remove(this))}continue(){var e;return((e=c(this,va))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,i,o,a,l,u,d,f,p,m,y,v,S,g,x,b,C,T,N,P;A(this,va,tT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,M)=>{E(this,nr,Ii).call(this,{type:"failed",failureCount:k,error:M})},onPause:()=>{E(this,nr,Ii).call(this,{type:"pause"})},onContinue:()=>{E(this,nr,Ii).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,an).canRun(this)}));const t=this.state.status==="pending",s=!c(this,va).canStart();try{if(!t){E(this,nr,Ii).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(r=c(this,an).config).onMutate)==null?void 0:i.call(r,e,this));const M=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));M!==this.state.context&&E(this,nr,Ii).call(this,{type:"pending",context:M,variables:e,isPaused:s})}const k=await c(this,va).start();return await((u=(l=c(this,an).config).onSuccess)==null?void 0:u.call(l,k,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,k,e,this.state.context)),await((m=(p=c(this,an).config).onSettled)==null?void 0:m.call(p,k,null,this.state.variables,this.state.context,this)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,k,null,e,this.state.context)),E(this,nr,Ii).call(this,{type:"success",data:k}),k}catch(k){try{throw await((g=(S=c(this,an).config).onError)==null?void 0:g.call(S,k,e,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,k,e,this.state.context)),await((T=(C=c(this,an).config).onSettled)==null?void 0:T.call(C,void 0,k,this.state.variables,this.state.context,this)),await((P=(N=this.options).onSettled)==null?void 0:P.call(N,void 0,k,e,this.state.context)),k}finally{E(this,nr,Ii).call(this,{type:"error",error:k})}}finally{c(this,an).runNext(this)}}},tr=new WeakMap,an=new WeakMap,va=new WeakMap,nr=new WeakSet,Ii=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),At.batch(()=>{c(this,tr).forEach(s=>{s.onMutationUpdate(e)}),c(this,an).notify({mutation:this,type:"updated",action:e})})},vE);function rT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,Mh,yE,Jj=(yE=class extends cd{constructor(e={}){super();_(this,In);_(this,Mh);this.config=e,A(this,In,new Map),A(this,Mh,Date.now())}build(e,t,s){const r=new Zj({mutationCache:this,mutationId:++Tt(this,Mh)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){const t=jp(e),s=c(this,In).get(t)??[];s.push(e),c(this,In).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=jp(e);if(c(this,In).has(t)){const r=(s=c(this,In).get(t))==null?void 0:s.filter(i=>i!==e);r&&(r.length===0?c(this,In).delete(t):c(this,In).set(t,r))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=c(this,In).get(jp(e)))==null?void 0:s.find(r=>r.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=c(this,In).get(jp(e)))==null?void 0:s.find(r=>r!==e&&r.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){At.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...c(this,In).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>QS(t,s))}findAll(e={}){return this.getAll().filter(t=>QS(e,t))}notify(e){At.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return At.batch(()=>Promise.all(e.map(t=>t.continue().catch(us))))}},In=new WeakMap,Mh=new WeakMap,yE);function jp(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function eA(n){return{onFetch:(e,t)=>{var d,f,p,m,y;const s=e.options,r=(p=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const S=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},g=Z_(e.options,e.fetchOptions),x=async(b,C,T)=>{if(v)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const N={queryKey:e.queryKey,pageParam:C,direction:T?"backward":"forward",meta:e.options.meta};S(N);const P=await g(N),{maxPages:k}=e.options,M=T?Vj:Uj;return{pages:M(b.pages,P,k),pageParams:M(b.pageParams,C,k)}};if(r&&i.length){const b=r==="backward",C=b?eI:tA,T={pages:i,pageParams:o},N=C(s,T);a=await x(T,N,b)}else{const b=n??i.length;do{const C=l===0?o[0]??s.initialPageParam:tA(s,a);if(l>0&&C==null)break;a=await x(a,C),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var v,S;return(S=(v=e.options).persister)==null?void 0:S.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function tA(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function eI(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var st,Gi,qi,zc,$c,Ki,Bc,Uc,xE,tI=(xE=class{constructor(n={}){_(this,st);_(this,Gi);_(this,qi);_(this,zc);_(this,$c);_(this,Ki);_(this,Bc);_(this,Uc);A(this,st,n.queryCache||new Qj),A(this,Gi,n.mutationCache||new Jj),A(this,qi,n.defaultOptions||{}),A(this,zc,new Map),A(this,$c,new Map),A(this,Ki,0)}mount(){Tt(this,Ki)._++,c(this,Ki)===1&&(A(this,Bc,Ib.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,st).onFocus())})),A(this,Uc,gg.subscribe(async n=>{n&&(await this.resumePausedMutations(),c(this,st).onOnline())})))}unmount(){var n,e;Tt(this,Ki)._--,c(this,Ki)===0&&((n=c(this,Bc))==null||n.call(this),A(this,Bc,void 0),(e=c(this,Uc))==null||e.call(this),A(this,Uc,void 0))}isFetching(n){return c(this,st).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return c(this,Gi).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,st).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),s=c(this,st).build(this,t);return n.revalidateIfStale&&s.isStaleByTime(_c(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return c(this,st).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=c(this,st).get(s.queryHash),i=r==null?void 0:r.state.data,o=$j(e,i);if(o!==void 0)return c(this,st).build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return At.batch(()=>c(this,st).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=c(this,st).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=c(this,st);At.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=c(this,st),s={type:"active",...n};return At.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries(s,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},s=At.batch(()=>c(this,st).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(us).catch(us)}invalidateQueries(n={},e={}){return At.batch(()=>{if(c(this,st).findAll(n).forEach(s=>{s.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=At.batch(()=>c(this,st).findAll(n).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(us)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(us)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=c(this,st).build(this,e);return t.isStaleByTime(_c(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(us).catch(us)}fetchInfiniteQuery(n){return n.behavior=eA(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(us).catch(us)}ensureInfiniteQueryData(n){return n.behavior=eA(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return gg.isOnline()?c(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,st)}getMutationCache(){return c(this,Gi)}getDefaultOptions(){return c(this,qi)}setDefaultOptions(n){A(this,qi,n)}setQueryDefaults(n,e){c(this,zc).set(Tl(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...c(this,zc).values()];let t={};return e.forEach(s=>{Nh(n,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(n,e){c(this,$c).set(Tl(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...c(this,$c).values()];let t={};return e.forEach(s=>{Nh(n,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...c(this,qi).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Mb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===jb&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...c(this,qi).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){c(this,st).clear(),c(this,Gi).clear()}},st=new WeakMap,Gi=new WeakMap,qi=new WeakMap,zc=new WeakMap,$c=new WeakMap,Ki=new WeakMap,Bc=new WeakMap,Uc=new WeakMap,xE),bn,xe,jh,ln,ya,Vc,Xi,sr,Ih,Wc,Gc,xa,wa,Yi,qc,Pe,Ld,Dx,Ox,Fx,Hx,zx,$x,Bx,iT,wE,nI=(wE=class extends cd{constructor(e,t){super();_(this,Pe);_(this,bn);_(this,xe);_(this,jh);_(this,ln);_(this,ya);_(this,Vc);_(this,Xi);_(this,sr);_(this,Ih);_(this,Wc);_(this,Gc);_(this,xa);_(this,wa);_(this,Yi);_(this,qc,new Set);this.options=t,A(this,bn,e),A(this,sr,null),A(this,Xi,Ix()),this.options.experimental_prefetchInRender||c(this,Xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,xe).addObserver(this),nA(c(this,xe),this.options)?E(this,Pe,Ld).call(this):this.updateResult(),E(this,Pe,Hx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ux(c(this,xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ux(c(this,xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,E(this,Pe,zx).call(this),E(this,Pe,$x).call(this),c(this,xe).removeObserver(this)}setOptions(e,t){const s=this.options,r=c(this,xe);if(this.options=c(this,bn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bs(this.options.enabled,c(this,xe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");E(this,Pe,Bx).call(this),c(this,xe).setOptions(this.options),s._defaulted&&!mg(this.options,s)&&c(this,bn).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,xe),observer:this});const i=this.hasListeners();i&&sA(c(this,xe),r,this.options,s)&&E(this,Pe,Ld).call(this),this.updateResult(t),i&&(c(this,xe)!==r||Bs(this.options.enabled,c(this,xe))!==Bs(s.enabled,c(this,xe))||_c(this.options.staleTime,c(this,xe))!==_c(s.staleTime,c(this,xe)))&&E(this,Pe,Dx).call(this);const o=E(this,Pe,Ox).call(this);i&&(c(this,xe)!==r||Bs(this.options.enabled,c(this,xe))!==Bs(s.enabled,c(this,xe))||o!==c(this,Yi))&&E(this,Pe,Fx).call(this,o)}getOptimisticResult(e){const t=c(this,bn).getQueryCache().build(c(this,bn),e),s=this.createResult(t,e);return rI(this,s)&&(A(this,ln,s),A(this,Vc,this.options),A(this,ya,c(this,xe).state)),s}getCurrentResult(){return c(this,ln)}trackResult(e,t){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t==null||t(r),e[r])})}),s}trackProp(e){c(this,qc).add(e)}getCurrentQuery(){return c(this,xe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=c(this,bn).defaultQueryOptions(e),s=c(this,bn).getQueryCache().build(c(this,bn),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return E(this,Pe,Ld).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,ln)))}createResult(e,t){var k;const s=c(this,xe),r=this.options,i=c(this,ln),o=c(this,ya),a=c(this,Vc),u=e!==s?e.state:c(this,jh),{state:d}=e;let f={...d},p=!1,m;if(t._optimisticResults){const M=this.hasListeners(),j=!M&&nA(e,t),D=M&&sA(e,s,t,r);(j||D)&&(f={...f,...sT(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:v,status:S}=f;if(t.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&t.select===c(this,Ih))m=c(this,Wc);else try{A(this,Ih,t.select),m=t.select(f.data),m=jx(i==null?void 0:i.data,m,t),A(this,Wc,m),A(this,sr,null)}catch(M){A(this,sr,M)}else m=f.data;if(t.placeholderData!==void 0&&m===void 0&&S==="pending"){let M;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))M=i.data;else if(M=typeof t.placeholderData=="function"?t.placeholderData((k=c(this,Gc))==null?void 0:k.state.data,c(this,Gc)):t.placeholderData,t.select&&M!==void 0)try{M=t.select(M),A(this,sr,null)}catch(j){A(this,sr,j)}M!==void 0&&(S="success",m=jx(i==null?void 0:i.data,M,t),p=!0)}c(this,sr)&&(y=c(this,sr),m=c(this,Wc),v=Date.now(),S="error");const g=f.fetchStatus==="fetching",x=S==="pending",b=S==="error",C=x&&g,T=m!==void 0,P={status:S,fetchStatus:f.fetchStatus,isPending:x,isSuccess:S==="success",isError:b,isInitialLoading:C,isLoading:C,data:m,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:b&&!T,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:b&&T,isStale:Db(e,t),refetch:this.refetch,promise:c(this,Xi)};if(this.options.experimental_prefetchInRender){const M=R=>{P.status==="error"?R.reject(P.error):P.data!==void 0&&R.resolve(P.data)},j=()=>{const R=A(this,Xi,P.promise=Ix());M(R)},D=c(this,Xi);switch(D.status){case"pending":e.queryHash===s.queryHash&&M(D);break;case"fulfilled":(P.status==="error"||P.data!==D.value)&&j();break;case"rejected":(P.status!=="error"||P.error!==D.reason)&&j();break}}return P}updateResult(e){const t=c(this,ln),s=this.createResult(c(this,xe),this.options);if(A(this,ya,c(this,xe).state),A(this,Vc,this.options),c(this,ya).data!==void 0&&A(this,Gc,c(this,xe)),mg(s,t))return;A(this,ln,s);const r={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!c(this,qc).size)return!0;const l=new Set(a??c(this,qc));return this.options.throwOnError&&l.add("error"),Object.keys(c(this,ln)).some(u=>{const d=u;return c(this,ln)[d]!==t[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(r.listeners=!0),E(this,Pe,iT).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&E(this,Pe,Hx).call(this)}},bn=new WeakMap,xe=new WeakMap,jh=new WeakMap,ln=new WeakMap,ya=new WeakMap,Vc=new WeakMap,Xi=new WeakMap,sr=new WeakMap,Ih=new WeakMap,Wc=new WeakMap,Gc=new WeakMap,xa=new WeakMap,wa=new WeakMap,Yi=new WeakMap,qc=new WeakMap,Pe=new WeakSet,Ld=function(e){E(this,Pe,Bx).call(this);let t=c(this,xe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(us)),t},Dx=function(){E(this,Pe,zx).call(this);const e=_c(this.options.staleTime,c(this,xe));if(_l||c(this,ln).isStale||!Lx(e))return;const s=Y_(c(this,ln).dataUpdatedAt,e)+1;A(this,xa,setTimeout(()=>{c(this,ln).isStale||this.updateResult()},s))},Ox=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,xe)):this.options.refetchInterval)??!1},Fx=function(e){E(this,Pe,$x).call(this),A(this,Yi,e),!(_l||Bs(this.options.enabled,c(this,xe))===!1||!Lx(c(this,Yi))||c(this,Yi)===0)&&A(this,wa,setInterval(()=>{(this.options.refetchIntervalInBackground||Ib.isFocused())&&E(this,Pe,Ld).call(this)},c(this,Yi)))},Hx=function(){E(this,Pe,Dx).call(this),E(this,Pe,Fx).call(this,E(this,Pe,Ox).call(this))},zx=function(){c(this,xa)&&(clearTimeout(c(this,xa)),A(this,xa,void 0))},$x=function(){c(this,wa)&&(clearInterval(c(this,wa)),A(this,wa,void 0))},Bx=function(){const e=c(this,bn).getQueryCache().build(c(this,bn),this.options);if(e===c(this,xe))return;const t=c(this,xe);A(this,xe,e),A(this,jh,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},iT=function(e){At.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(c(this,ln))}),c(this,bn).getQueryCache().notify({query:c(this,xe),type:"observerResultsUpdated"})})},wE);function sI(n,e){return Bs(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function nA(n,e){return sI(n,e)||n.state.data!==void 0&&Ux(n,e,e.refetchOnMount)}function Ux(n,e,t){if(Bs(e.enabled,n)!==!1){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&Db(n,e)}return!1}function sA(n,e,t,s){return(n!==e||Bs(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Db(n,t)}function Db(n,e){return Bs(e.enabled,n)!==!1&&n.isStaleByTime(_c(e.staleTime,n))}function rI(n,e){return!mg(n.getCurrentResult(),e)}var Qi,Zi,Sn,Fr,yi,am,Vx,bE,iI=(bE=class extends cd{constructor(t,s){super();_(this,yi);_(this,Qi);_(this,Zi);_(this,Sn);_(this,Fr);A(this,Qi,t),this.setOptions(s),this.bindMethods(),E(this,yi,am).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=c(this,Qi).defaultMutationOptions(t),mg(this.options,s)||c(this,Qi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,Sn),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Tl(s.mutationKey)!==Tl(this.options.mutationKey)?this.reset():((r=c(this,Sn))==null?void 0:r.state.status)==="pending"&&c(this,Sn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=c(this,Sn))==null||t.removeObserver(this)}onMutationUpdate(t){E(this,yi,am).call(this),E(this,yi,Vx).call(this,t)}getCurrentResult(){return c(this,Zi)}reset(){var t;(t=c(this,Sn))==null||t.removeObserver(this),A(this,Sn,void 0),E(this,yi,am).call(this),E(this,yi,Vx).call(this)}mutate(t,s){var r;return A(this,Fr,s),(r=c(this,Sn))==null||r.removeObserver(this),A(this,Sn,c(this,Qi).getMutationCache().build(c(this,Qi),this.options)),c(this,Sn).addObserver(this),c(this,Sn).execute(t)}},Qi=new WeakMap,Zi=new WeakMap,Sn=new WeakMap,Fr=new WeakMap,yi=new WeakSet,am=function(){var s;const t=((s=c(this,Sn))==null?void 0:s.state)??rT();A(this,Zi,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Vx=function(t){At.batch(()=>{var s,r,i,o,a,l,u,d;if(c(this,Fr)&&this.hasListeners()){const f=c(this,Zi).variables,p=c(this,Zi).context;(t==null?void 0:t.type)==="success"?((r=(s=c(this,Fr)).onSuccess)==null||r.call(s,t.data,f,p),(o=(i=c(this,Fr)).onSettled)==null||o.call(i,t.data,null,f,p)):(t==null?void 0:t.type)==="error"&&((l=(a=c(this,Fr)).onError)==null||l.call(a,t.error,f,p),(d=(u=c(this,Fr)).onSettled)==null||d.call(u,void 0,t.error,f,p))}this.listeners.forEach(f=>{f(c(this,Zi))})})},bE),oT=w.createContext(void 0),Ob=n=>{const e=w.useContext(oT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oI=({client:n,children:e})=>(w.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),h.jsx(oT.Provider,{value:n,children:e})),aT=w.createContext(!1),aI=()=>w.useContext(aT);aT.Provider;function lI(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var cI=w.createContext(lI()),uI=()=>w.useContext(cI);function lT(n,e){return typeof n=="function"?n(...e):!!n}function Wx(){}var dI=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},hI=n=>{w.useEffect(()=>{n.clearReset()},[n])},fI=({result:n,errorResetBoundary:e,throwOnError:t,query:s})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&lT(t,[n.error,s]),pI=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},mI=(n,e)=>n.isLoading&&n.isFetching&&!e,gI=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,rA=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function vI(n,e,t){var d,f,p,m,y;const s=Ob(),r=aI(),i=uI(),o=s.defaultQueryOptions(n);(f=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",pI(o),dI(o,i),hI(i);const a=!s.getQueryCache().get(o.queryHash),[l]=w.useState(()=>new e(s,o)),u=l.getOptimisticResult(o);if(w.useSyncExternalStore(w.useCallback(v=>{const S=r?Wx:l.subscribe(At.batchCalls(v));return l.updateResult(),S},[l,r]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),w.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),gI(o,u))throw rA(o,l,i);if(fI({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw u.error;if((m=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,u),o.experimental_prefetchInRender&&!_l&&mI(u,r)){const v=a?rA(o,l,i):(y=s.getQueryCache().get(o.queryHash))==null?void 0:y.promise;v==null||v.catch(Wx).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Ho(n,e){return vI(n,nI)}function xl(n,e){const t=Ob(),[s]=w.useState(()=>new iI(t,n));w.useEffect(()=>{s.setOptions(n)},[s,n]);const r=w.useSyncExternalStore(w.useCallback(o=>s.subscribe(At.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=w.useCallback((o,a)=>{s.mutate(o,a).catch(Wx)},[s]);if(r.error&&lT(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}async function yI(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const xI=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await yI(t),await t.json())},wI=xI({on401:"returnNull"}),bI=new tI({defaultOptions:{queries:{queryFn:wI,refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:5*60*1e3,retry:!1},mutations:{retry:!1}}});async function wl(n,e="GET",t){const s=await fetch(n,{method:e,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});if(!s.ok){const r=await s.text()||s.statusText;throw new Error(`${s.status}: ${r}`)}return await s.json()}const SI=1,AI=1e6;let xy=0;function EI(){return xy=(xy+1)%Number.MAX_SAFE_INTEGER,xy.toString()}const wy=new Map,iA=n=>{if(wy.has(n))return;const e=setTimeout(()=>{wy.delete(n),oh({type:"REMOVE_TOAST",toastId:n})},AI);wy.set(n,e)},CI=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,SI)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?iA(t):n.toasts.forEach(s=>{iA(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},lm=[];let cm={toasts:[]};function oh(n){cm=CI(cm,n),lm.forEach(e=>{e(cm)})}function _I({...n}){const e=EI(),t=r=>oh({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>oh({type:"DISMISS_TOAST",toastId:e});return oh({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function zl(){const[n,e]=w.useState(cm);return w.useEffect(()=>(lm.push(e),()=>{const t=lm.indexOf(e);t>-1&&lm.splice(t,1)}),[n]),{...n,toast:_I,dismiss:t=>oh({type:"DISMISS_TOAST",toastId:t})}}function ee(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function oA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Fb(...n){return e=>{let t=!1;const s=n.map(r=>{const i=oA(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():oA(n[r],null)}}}}function Oe(...n){return w.useCallback(Fb(...n),n)}function TI(n,e){const t=w.createContext(e),s=i=>{const{children:o,...a}=i,l=w.useMemo(()=>a,Object.values(a));return h.jsx(t.Provider,{value:l,children:o})};s.displayName=n+"Provider";function r(i){const o=w.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[s,r]}function ki(n,e=[]){let t=[];function s(i,o){const a=w.createContext(o),l=t.length;t=[...t,o];const u=f=>{var g;const{scope:p,children:m,...y}=f,v=((g=p==null?void 0:p[n])==null?void 0:g[l])||a,S=w.useMemo(()=>y,Object.values(y));return h.jsx(v.Provider,{value:S,children:m})};u.displayName=i+"Provider";function d(f,p){var v;const m=((v=p==null?void 0:p[n])==null?void 0:v[l])||a,y=w.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=t.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return w.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[s,NI(r,...e)]}function NI(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...a,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function ed(n){const e=kI(n),t=w.forwardRef((s,r)=>{const{children:i,...o}=s,a=w.Children.toArray(i),l=a.find(LI);if(l){const u=l.props.children,d=a.map(f=>f===l?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return h.jsx(e,{...o,ref:r,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return h.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var PI=ed("Slot");function kI(n){const e=w.forwardRef((t,s)=>{const{children:r,...i}=t;if(w.isValidElement(r)){const o=jI(r),a=MI(i,r.props);return r.type!==w.Fragment&&(a.ref=s?Fb(s,o):o),w.cloneElement(r,a)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var cT=Symbol("radix.slottable");function RI(n){const e=({children:t})=>h.jsx(h.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=cT,e}function LI(n){return w.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===cT}function MI(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{i(...a),r(...a)}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function jI(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Hb(n){const e=n+"CollectionProvider",[t,s]=ki(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:S,children:g}=v,x=ji.useRef(null),b=ji.useRef(new Map).current;return h.jsx(r,{scope:S,itemMap:b,collectionRef:x,children:g})};o.displayName=e;const a=n+"CollectionSlot",l=ed(a),u=ji.forwardRef((v,S)=>{const{scope:g,children:x}=v,b=i(a,g),C=Oe(S,b.collectionRef);return h.jsx(l,{ref:C,children:x})});u.displayName=a;const d=n+"CollectionItemSlot",f="data-radix-collection-item",p=ed(d),m=ji.forwardRef((v,S)=>{const{scope:g,children:x,...b}=v,C=ji.useRef(null),T=Oe(S,C),N=i(d,g);return ji.useEffect(()=>(N.itemMap.set(C,{ref:C,...b}),()=>void N.itemMap.delete(C))),h.jsx(p,{[f]:"",ref:T,children:x})});m.displayName=d;function y(v){const S=i(n+"CollectionConsumer",v);return ji.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((N,P)=>b.indexOf(N.ref.current)-b.indexOf(P.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,s]}var II=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],he=II.reduce((n,e)=>{const t=ed(`Primitive.${e}`),s=w.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function uT(n,e){n&&Hl.flushSync(()=>n.dispatchEvent(e))}function Mn(n){const e=w.useRef(n);return w.useEffect(()=>{e.current=n}),w.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function DI(n,e=globalThis==null?void 0:globalThis.document){const t=Mn(n);w.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var OI="DismissableLayer",Gx="dismissableLayer.update",FI="dismissableLayer.pointerDownOutside",HI="dismissableLayer.focusOutside",aA,dT=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rp=w.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,u=w.useContext(dT),[d,f]=w.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=w.useState({}),y=Oe(e,P=>f(P)),v=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(S),x=d?v.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,C=x>=g,T=$I(P=>{const k=P.target,M=[...u.branches].some(j=>j.contains(k));!C||M||(r==null||r(P),o==null||o(P),P.defaultPrevented||a==null||a())},p),N=BI(P=>{const k=P.target;[...u.branches].some(j=>j.contains(k))||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},p);return DI(P=>{x===u.layers.size-1&&(s==null||s(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),w.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(aA=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),lA(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=aA)}},[d,p,t,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),lA())},[d,u]),w.useEffect(()=>{const P=()=>m({});return document.addEventListener(Gx,P),()=>document.removeEventListener(Gx,P)},[]),h.jsx(he.div,{...l,ref:y,style:{pointerEvents:b?C?"auto":"none":void 0,...n.style},onFocusCapture:ee(n.onFocusCapture,N.onFocusCapture),onBlurCapture:ee(n.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ee(n.onPointerDownCapture,T.onPointerDownCapture)})});rp.displayName=OI;var zI="DismissableLayerBranch",hT=w.forwardRef((n,e)=>{const t=w.useContext(dT),s=w.useRef(null),r=Oe(e,s);return w.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),h.jsx(he.div,{...n,ref:r})});hT.displayName=zI;function $I(n,e=globalThis==null?void 0:globalThis.document){const t=Mn(n),s=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){fT(FI,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function BI(n,e=globalThis==null?void 0:globalThis.document){const t=Mn(n),s=w.useRef(!1);return w.useEffect(()=>{const r=i=>{i.target&&!s.current&&fT(HI,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function lA(){const n=new CustomEvent(Gx);document.dispatchEvent(n)}function fT(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?uT(r,i):r.dispatchEvent(i)}var UI=rp,VI=hT,gt=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},WI="Portal",hv=w.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[r,i]=w.useState(!1);gt(()=>i(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?dj.createPortal(h.jsx(he.div,{...s,ref:e}),o):null});hv.displayName=WI;function GI(n,e){return w.useReducer((t,s)=>e[t][s]??t,n)}var $l=n=>{const{present:e,children:t}=n,s=qI(e),r=typeof t=="function"?t({present:s.isPresent}):w.Children.only(t),i=Oe(s.ref,KI(r));return typeof t=="function"||s.isPresent?w.cloneElement(r,{ref:i}):null};$l.displayName="Presence";function qI(n){const[e,t]=w.useState(),s=w.useRef({}),r=w.useRef(n),i=w.useRef("none"),o=n?"mounted":"unmounted",[a,l]=GI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=Ip(s.current);i.current=a==="mounted"?u:"none"},[a]),gt(()=>{const u=s.current,d=r.current;if(d!==n){const p=i.current,m=Ip(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),gt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const v=Ip(s.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=m=>{m.target===e&&(i.current=Ip(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(u=>{u&&(s.current=getComputedStyle(u)),t(u)},[])}}function Ip(n){return(n==null?void 0:n.animationName)||"none"}function KI(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function td({prop:n,defaultProp:e,onChange:t=()=>{}}){const[s,r]=XI({defaultProp:e,onChange:t}),i=n!==void 0,o=i?n:s,a=Mn(t),l=w.useCallback(u=>{if(i){const f=typeof u=="function"?u(n):u;f!==n&&a(f)}else r(u)},[i,n,r,a]);return[o,l]}function XI({defaultProp:n,onChange:e}){const t=w.useState(n),[s]=t,r=w.useRef(s),i=Mn(e);return w.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),t}var YI="VisuallyHidden",ip=w.forwardRef((n,e)=>h.jsx(he.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));ip.displayName=YI;var QI=ip,zb="ToastProvider",[$b,ZI,JI]=Hb("Toast"),[pT,c5]=ki("Toast",[JI]),[eD,fv]=pT(zb),mT=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[a,l]=w.useState(null),[u,d]=w.useState(0),f=w.useRef(!1),p=w.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${zb}\`. Expected non-empty \`string\`.`),h.jsx($b.Provider,{scope:e,children:h.jsx(eD,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:w.useCallback(()=>d(m=>m+1),[]),onToastRemove:w.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};mT.displayName=zb;var gT="ToastViewport",tD=["F8"],qx="toast.viewportPause",Kx="toast.viewportResume",vT=w.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=tD,label:r="Notifications ({hotkey})",...i}=n,o=fv(gT,t),a=ZI(t),l=w.useRef(null),u=w.useRef(null),d=w.useRef(null),f=w.useRef(null),p=Oe(e,f,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;w.useEffect(()=>{const S=g=>{var b;s.length!==0&&s.every(C=>g[C]||g.code===C)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[s]),w.useEffect(()=>{const S=l.current,g=f.current;if(y&&S&&g){const x=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(qx);g.dispatchEvent(N),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Kx);g.dispatchEvent(N),o.isClosePausedRef.current=!1}},C=N=>{!S.contains(N.relatedTarget)&&b()},T=()=>{S.contains(document.activeElement)||b()};return S.addEventListener("focusin",x),S.addEventListener("focusout",C),S.addEventListener("pointermove",x),S.addEventListener("pointerleave",T),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{S.removeEventListener("focusin",x),S.removeEventListener("focusout",C),S.removeEventListener("pointermove",x),S.removeEventListener("pointerleave",T),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const v=w.useCallback(({tabbingDirection:S})=>{const x=a().map(b=>{const C=b.ref.current,T=[C,...pD(C)];return S==="forwards"?T:T.reverse()});return(S==="forwards"?x.reverse():x).flat()},[a]);return w.useEffect(()=>{const S=f.current;if(S){const g=x=>{var T,N,P;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const k=document.activeElement,M=x.shiftKey;if(x.target===S&&M){(T=u.current)==null||T.focus();return}const R=v({tabbingDirection:M?"backwards":"forwards"}),O=R.findIndex(I=>I===k);by(R.slice(O+1))?x.preventDefault():M?(N=u.current)==null||N.focus():(P=d.current)==null||P.focus()}};return S.addEventListener("keydown",g),()=>S.removeEventListener("keydown",g)}},[a,v]),h.jsxs(VI,{ref:l,role:"region","aria-label":r.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&h.jsx(Xx,{ref:u,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"forwards"});by(S)}}),h.jsx($b.Slot,{scope:t,children:h.jsx(he.ol,{tabIndex:-1,...i,ref:p})}),y&&h.jsx(Xx,{ref:d,onFocusFromOutsideViewport:()=>{const S=v({tabbingDirection:"backwards"});by(S)}})]})});vT.displayName=gT;var yT="ToastFocusProxy",Xx=w.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=fv(yT,t);return h.jsx(ip,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&s()}})});Xx.displayName=yT;var pv="Toast",nD="toast.swipeStart",sD="toast.swipeMove",rD="toast.swipeCancel",iD="toast.swipeEnd",xT=w.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[a=!0,l]=td({prop:s,defaultProp:r,onChange:i});return h.jsx($l,{present:t||a,children:h.jsx(lD,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Mn(n.onPause),onResume:Mn(n.onResume),onSwipeStart:ee(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ee(n.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ee(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ee(n.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});xT.displayName=pv;var[oD,aD]=pT(pv,{onClose(){}}),lD=w.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=n,v=fv(pv,t),[S,g]=w.useState(null),x=Oe(e,I=>g(I)),b=w.useRef(null),C=w.useRef(null),T=r||v.duration,N=w.useRef(0),P=w.useRef(T),k=w.useRef(0),{onToastAdd:M,onToastRemove:j}=v,D=Mn(()=>{var B;(S==null?void 0:S.contains(document.activeElement))&&((B=v.viewport)==null||B.focus()),o()}),R=w.useCallback(I=>{!I||I===1/0||(window.clearTimeout(k.current),N.current=new Date().getTime(),k.current=window.setTimeout(D,I))},[D]);w.useEffect(()=>{const I=v.viewport;if(I){const B=()=>{R(P.current),u==null||u()},H=()=>{const F=new Date().getTime()-N.current;P.current=P.current-F,window.clearTimeout(k.current),l==null||l()};return I.addEventListener(qx,H),I.addEventListener(Kx,B),()=>{I.removeEventListener(qx,H),I.removeEventListener(Kx,B)}}},[v.viewport,T,l,u,R]),w.useEffect(()=>{i&&!v.isClosePausedRef.current&&R(T)},[i,T,v.isClosePausedRef,R]),w.useEffect(()=>(M(),()=>j()),[M,j]);const O=w.useMemo(()=>S?_T(S):null,[S]);return v.viewport?h.jsxs(h.Fragment,{children:[O&&h.jsx(cD,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),h.jsx(oD,{scope:t,onClose:D,children:Hl.createPortal(h.jsx($b.ItemSlot,{scope:t,children:h.jsx(UI,{asChild:!0,onEscapeKeyDown:ee(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(he.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ee(n.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:ee(n.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:ee(n.onPointerMove,I=>{if(!b.current)return;const B=I.clientX-b.current.x,H=I.clientY-b.current.y,F=!!C.current,L=["left","right"].includes(v.swipeDirection),z=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,G=L?z(0,B):0,X=L?0:z(0,H),Z=I.pointerType==="touch"?10:2,ie={x:G,y:X},be={originalEvent:I,delta:ie};F?(C.current=ie,Dp(sD,f,be,{discrete:!1})):cA(ie,v.swipeDirection,Z)?(C.current=ie,Dp(nD,d,be,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(B)>Z||Math.abs(H)>Z)&&(b.current=null)}),onPointerUp:ee(n.onPointerUp,I=>{const B=C.current,H=I.target;if(H.hasPointerCapture(I.pointerId)&&H.releasePointerCapture(I.pointerId),C.current=null,b.current=null,B){const F=I.currentTarget,L={originalEvent:I,delta:B};cA(B,v.swipeDirection,v.swipeThreshold)?Dp(iD,m,L,{discrete:!0}):Dp(rD,p,L,{discrete:!0}),F.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),cD=n=>{const{__scopeToast:e,children:t,...s}=n,r=fv(pv,e),[i,o]=w.useState(!1),[a,l]=w.useState(!1);return hD(()=>o(!0)),w.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:h.jsx(hv,{asChild:!0,children:h.jsx(ip,{...s,children:i&&h.jsxs(h.Fragment,{children:[r.label," ",t]})})})},uD="ToastTitle",wT=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return h.jsx(he.div,{...s,ref:e})});wT.displayName=uD;var dD="ToastDescription",bT=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return h.jsx(he.div,{...s,ref:e})});bT.displayName=dD;var ST="ToastAction",AT=w.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?h.jsx(CT,{altText:t,asChild:!0,children:h.jsx(Bb,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ST}\`. Expected non-empty \`string\`.`),null)});AT.displayName=ST;var ET="ToastClose",Bb=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=aD(ET,t);return h.jsx(CT,{asChild:!0,children:h.jsx(he.button,{type:"button",...s,ref:e,onClick:ee(n.onClick,r.onClose)})})});Bb.displayName=ET;var CT=w.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return h.jsx(he.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function _T(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),fD(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(..._T(s))}}),e}function Dp(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?uT(r,i):r.dispatchEvent(i)}var cA=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function hD(n=()=>{}){const e=Mn(n);gt(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function fD(n){return n.nodeType===n.ELEMENT_NODE}function pD(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function by(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var mD=mT,TT=vT,NT=xT,PT=wT,kT=bT,RT=AT,LT=Bb;function MT(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=MT(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function ud(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=MT(n))&&(s&&(s+=" "),s+=e);return s}const uA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,dA=ud,mv=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return dA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=t==null?void 0:t[u],f=i==null?void 0:i[u];if(d===null)return null;const p=uA(d)||uA(f);return r[u][p]}),a=t&&Object.entries(t).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(y=>{let[v,S]=y;return Array.isArray(S)?S.includes({...i,...a}[v]):{...i,...a}[v]===S})?[...u,f,p]:u},[]);return dA(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jT=(...n)=>n.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=w.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...a},l)=>w.createElement("svg",{ref:l,...vD,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:jT("lucide",r),...a},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,e)=>{const t=w.forwardRef(({className:s,...r},i)=>w.createElement(yD,{ref:i,iconNode:e,className:jT(`lucide-${gD(n)}`,s),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=ge("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ge("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ge("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ge("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ge("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ge("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=ge("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=ge("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=ge("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Wb="-",MD=n=>{const e=ID(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{const a=o.split(Wb);return a[0]===""&&a.length!==1&&a.shift(),OT(a,e)||jD(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&s[o]?[...l,...s[o]]:l}}},OT=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?OT(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(Wb);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},mA=/^\[(.+)\]$/,jD=n=>{if(mA.test(n)){const e=mA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ID=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return OD(Object.entries(n.classGroups),t).forEach(([i,o])=>{t0(o,s,i,e)}),s},t0=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:gA(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(DD(r)){t0(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{t0(o,gA(e,i),t,s)})})},gA=(n,e)=>{let t=n;return e.split(Wb).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},DD=n=>n.isThemeGetter,OD=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,r]}):n,FD=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},FT="!",HD=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,f;for(let S=0;S<a.length;S++){let g=a[S];if(u===0){if(g===r&&(s||a.slice(S,S+i)===e)){l.push(a.slice(d,S)),d=S+i;continue}if(g==="/"){f=S;continue}}g==="["?u++:g==="]"&&u--}const p=l.length===0?a:a.substring(d),m=p.startsWith(FT),y=m?p.substring(1):p,v=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:v}};return t?a=>t({className:a,parseClassName:o}):o},zD=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},$D=n=>({cache:FD(n.cacheSize),parseClassName:HD(n),...MD(n)}),BD=/\s+/,UD=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],o=n.trim().split(BD);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let y=!!m,v=s(y?p.substring(0,m):p);if(!v){if(!y){a=u+(a.length>0?" "+a:a);continue}if(v=s(p),!v){a=u+(a.length>0?" "+a:a);continue}y=!1}const S=zD(d).join(":"),g=f?S+FT:S,x=g+v;if(i.includes(x))continue;i.push(x);const b=r(v,y);for(let C=0;C<b.length;++C){const T=b[C];i.push(g+T)}a=u+(a.length>0?" "+a:a)}return a};function VD(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=HT(e))&&(s&&(s+=" "),s+=t);return s}const HT=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=HT(n[s]))&&(t&&(t+=" "),t+=e);return t};function WD(n,...e){let t,s,r,i=o;function o(l){const u=e.reduce((d,f)=>f(d),n());return t=$D(u),s=t.cache.get,r=t.cache.set,i=a,a(l)}function a(l){const u=s(l);if(u)return u;const d=UD(l,t);return r(l,d),d}return function(){return i(VD.apply(null,arguments))}}const $e=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},zT=/^\[(?:([a-z-]+):)?(.+)\]$/i,GD=/^\d+\/\d+$/,qD=new Set(["px","full","screen"]),KD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pr=n=>Nc(n)||qD.has(n)||GD.test(n),Li=n=>dd(n,"length",oO),Nc=n=>!!n&&!Number.isNaN(Number(n)),Sy=n=>dd(n,"number",Nc),Ad=n=>!!n&&Number.isInteger(Number(n)),JD=n=>n.endsWith("%")&&Nc(n.slice(0,-1)),oe=n=>zT.test(n),Mi=n=>KD.test(n),eO=new Set(["length","size","percentage"]),tO=n=>dd(n,eO,$T),nO=n=>dd(n,"position",$T),sO=new Set(["image","url"]),rO=n=>dd(n,sO,lO),iO=n=>dd(n,"",aO),Ed=()=>!0,dd=(n,e,t)=>{const s=zT.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},oO=n=>XD.test(n)&&!YD.test(n),$T=()=>!1,aO=n=>QD.test(n),lO=n=>ZD.test(n),cO=()=>{const n=$e("colors"),e=$e("spacing"),t=$e("blur"),s=$e("brightness"),r=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),u=$e("grayscale"),d=$e("hueRotate"),f=$e("invert"),p=$e("gap"),m=$e("gradientColorStops"),y=$e("gradientColorStopPositions"),v=$e("inset"),S=$e("margin"),g=$e("opacity"),x=$e("padding"),b=$e("saturate"),C=$e("scale"),T=$e("sepia"),N=$e("skew"),P=$e("space"),k=$e("translate"),M=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",oe,e],R=()=>[oe,e],O=()=>["",Pr,Li],I=()=>["auto",Nc,oe],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",oe],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Nc,oe];return{cacheSize:500,separator:":",theme:{colors:[Ed],spacing:[Pr,Li],blur:["none","",Mi,oe],brightness:X(),borderColor:[n],borderRadius:["none","","full",Mi,oe],borderSpacing:R(),borderWidth:O(),contrast:X(),grayscale:z(),hueRotate:X(),invert:z(),gap:R(),gradientColorStops:[n],gradientColorStopPositions:[JD,Li],inset:D(),margin:D(),opacity:X(),padding:R(),saturate:X(),scale:X(),sepia:z(),skew:X(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),oe]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ad,oe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Ad,oe]}],"grid-cols":[{"grid-cols":[Ed]}],"col-start-end":[{col:["auto",{span:["full",Ad,oe]},oe]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Ed]}],"row-start-end":[{row:["auto",{span:[Ad,oe]},oe]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,e]}],"min-w":[{"min-w":[oe,e,"min","max","fit"]}],"max-w":[{"max-w":[oe,e,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[oe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Li]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sy]}],"font-family":[{font:[Ed]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",Nc,Sy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr,Li]}],"underline-offset":[{"underline-offset":["auto",Pr,oe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),nO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rO]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:H()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Pr,oe]}],"outline-w":[{outline:[Pr,Li]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Pr,Li]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Mi,iO]}],"shadow-color":[{shadow:[Ed]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Mi,oe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ad,oe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Pr,Li,Sy]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uO=WD(cO);function Ce(...n){return uO(ud(n))}const dO=mD,BT=w.forwardRef(({className:n,...e},t)=>h.jsx(TT,{ref:t,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));BT.displayName=TT.displayName;const hO=mv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),UT=w.forwardRef(({className:n,variant:e,...t},s)=>h.jsx(NT,{ref:s,className:Ce(hO({variant:e}),n),...t}));UT.displayName=NT.displayName;const fO=w.forwardRef(({className:n,...e},t)=>h.jsx(RT,{ref:t,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));fO.displayName=RT.displayName;const VT=w.forwardRef(({className:n,...e},t)=>h.jsx(LT,{ref:t,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:h.jsx(op,{className:"h-4 w-4"})}));VT.displayName=LT.displayName;const WT=w.forwardRef(({className:n,...e},t)=>h.jsx(PT,{ref:t,className:Ce("text-sm font-semibold",n),...e}));WT.displayName=PT.displayName;const GT=w.forwardRef(({className:n,...e},t)=>h.jsx(kT,{ref:t,className:Ce("text-sm opacity-90",n),...e}));GT.displayName=kT.displayName;function pO(){const{toasts:n}=zl();return h.jsxs(dO,{children:[n.map(function({id:e,title:t,description:s,action:r,...i}){return h.jsxs(UT,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(WT,{children:t}),s&&h.jsx(GT,{children:s})]}),r,h.jsx(VT,{})]},e)}),h.jsx(BT,{})]})}var mO=zw[" useId ".trim().toString()]||(()=>{}),gO=0;function pi(n){const[e,t]=w.useState(mO());return gt(()=>{n||t(s=>s??String(gO++))},[n]),n||(e?`radix-${e}`:"")}const vO=["top","right","bottom","left"],$o=Math.min,qn=Math.max,xg=Math.round,Op=Math.floor,_r=n=>({x:n,y:n}),yO={left:"right",right:"left",bottom:"top",top:"bottom"},xO={start:"end",end:"start"};function n0(n,e,t){return qn(n,$o(e,t))}function Ci(n,e){return typeof n=="function"?n(e):n}function _i(n){return n.split("-")[0]}function hd(n){return n.split("-")[1]}function Gb(n){return n==="x"?"y":"x"}function qb(n){return n==="y"?"height":"width"}function Bo(n){return["top","bottom"].includes(_i(n))?"y":"x"}function Kb(n){return Gb(Bo(n))}function wO(n,e,t){t===void 0&&(t=!1);const s=hd(n),r=Kb(n),i=qb(r);let o=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=wg(o)),[o,wg(o)]}function bO(n){const e=wg(n);return[s0(n),e,s0(e)]}function s0(n){return n.replace(/start|end/g,e=>xO[e])}function SO(n,e,t){const s=["left","right"],r=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?i:o;default:return[]}}function AO(n,e,t,s){const r=hd(n);let i=SO(_i(n),t==="start",s);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(s0)))),i}function wg(n){return n.replace(/left|right|bottom|top/g,e=>yO[e])}function EO(n){return{top:0,right:0,bottom:0,left:0,...n}}function qT(n){return typeof n!="number"?EO(n):{top:n,right:n,bottom:n,left:n}}function bg(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function vA(n,e,t){let{reference:s,floating:r}=n;const i=Bo(e),o=Kb(e),a=qb(o),l=_i(e),u=i==="y",d=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,p=s[a]/2-r[a]/2;let m;switch(l){case"top":m={x:d,y:s.y-r.height};break;case"bottom":m={x:d,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:f};break;case"left":m={x:s.x-r.width,y:f};break;default:m={x:s.x,y:s.y}}switch(hd(e)){case"start":m[o]-=p*(t&&u?-1:1);break;case"end":m[o]+=p*(t&&u?-1:1);break}return m}const CO=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:d,y:f}=vA(u,s,l),p=s,m={},y=0;for(let v=0;v<a.length;v++){const{name:S,fn:g}=a[v],{x,y:b,data:C,reset:T}=await g({x:d,y:f,initialPlacement:s,placement:p,strategy:r,middlewareData:m,rects:u,platform:o,elements:{reference:n,floating:e}});d=x??d,f=b??f,m={...m,[S]:{...m[S],...C}},T&&y<=50&&(y++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):T.rects),{x:d,y:f}=vA(u,p,l)),v=-1)}return{x:d,y:f,placement:p,strategy:r,middlewareData:m}};async function Ph(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Ci(e,n),y=qT(m),S=a[p?f==="floating"?"reference":"floating":f],g=bg(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(S)))==null||t?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),x=f==="floating"?{x:s,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},T=bg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(g.top-T.top+y.top)/C.y,bottom:(T.bottom-g.bottom+y.bottom)/C.y,left:(g.left-T.left+y.left)/C.x,right:(T.right-g.right+y.right)/C.x}}const _O=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=Ci(n,e)||{};if(u==null)return{};const f=qT(d),p={x:t,y:s},m=Kb(r),y=qb(m),v=await o.getDimensions(u),S=m==="y",g=S?"top":"left",x=S?"bottom":"right",b=S?"clientHeight":"clientWidth",C=i.reference[y]+i.reference[m]-p[m]-i.floating[y],T=p[m]-i.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=N?N[b]:0;(!P||!await(o.isElement==null?void 0:o.isElement(N)))&&(P=a.floating[b]||i.floating[y]);const k=C/2-T/2,M=P/2-v[y]/2-1,j=$o(f[g],M),D=$o(f[x],M),R=j,O=P-v[y]-D,I=P/2-v[y]/2+k,B=n0(R,I,O),H=!l.arrow&&hd(r)!=null&&I!==B&&i.reference[y]/2-(I<R?j:D)-v[y]/2<0,F=H?I<R?I-R:I-O:0;return{[m]:p[m]+F,data:{[m]:B,centerOffset:I-B-F,...H&&{alignmentOffset:F}},reset:H}}}),TO=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...S}=Ci(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const g=_i(r),x=Bo(a),b=_i(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),T=p||(b||!v?[wg(a)]:bO(a)),N=y!=="none";!p&&N&&T.push(...AO(a,v,y,C));const P=[a,...T],k=await Ph(e,S),M=[];let j=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&M.push(k[g]),f){const I=wO(r,o,C);M.push(k[I[0]],k[I[1]])}if(j=[...j,{placement:r,overflows:M}],!M.every(I=>I<=0)){var D,R;const I=(((D=i.flip)==null?void 0:D.index)||0)+1,B=P[I];if(B)return{data:{index:I,overflows:j},reset:{placement:B}};let H=(R=j.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!H)switch(m){case"bestFit":{var O;const F=(O=j.filter(L=>{if(N){const z=Bo(L.placement);return z===x||z==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(z=>z>0).reduce((z,G)=>z+G,0)]).sort((L,z)=>L[1]-z[1])[0])==null?void 0:O[0];F&&(H=F);break}case"initialPlacement":H=a;break}if(r!==H)return{reset:{placement:H}}}return{}}}};function yA(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function xA(n){return vO.some(e=>n[e]>=0)}const NO=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=Ci(n,e);switch(s){case"referenceHidden":{const i=await Ph(e,{...r,elementContext:"reference"}),o=yA(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xA(o)}}}case"escaped":{const i=await Ph(e,{...r,altBoundary:!0}),o=yA(i,t.floating);return{data:{escapedOffsets:o,escaped:xA(o)}}}default:return{}}}}};async function PO(n,e){const{placement:t,platform:s,elements:r}=n,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),o=_i(t),a=hd(t),l=Bo(t)==="y",u=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=Ci(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const kO=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:i,placement:o,middlewareData:a}=e,l=await PO(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(s=a.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}}},RO=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:g,y:x}=S;return{x:g,y:x}}},...l}=Ci(n,e),u={x:t,y:s},d=await Ph(e,l),f=Bo(_i(r)),p=Gb(f);let m=u[p],y=u[f];if(i){const S=p==="y"?"top":"left",g=p==="y"?"bottom":"right",x=m+d[S],b=m-d[g];m=n0(x,m,b)}if(o){const S=f==="y"?"top":"left",g=f==="y"?"bottom":"right",x=y+d[S],b=y-d[g];y=n0(x,y,b)}const v=a.fn({...e,[p]:m,[f]:y});return{...v,data:{x:v.x-t,y:v.y-s,enabled:{[p]:i,[f]:o}}}}}},LO=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ci(n,e),d={x:t,y:s},f=Bo(r),p=Gb(f);let m=d[p],y=d[f];const v=Ci(a,e),S=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=p==="y"?"height":"width",C=i.reference[p]-i.floating[b]+S.mainAxis,T=i.reference[p]+i.reference[b]-S.mainAxis;m<C?m=C:m>T&&(m=T)}if(u){var g,x;const b=p==="y"?"width":"height",C=["top","left"].includes(_i(r)),T=i.reference[f]-i.floating[b]+(C&&((g=o.offset)==null?void 0:g[f])||0)+(C?0:S.crossAxis),N=i.reference[f]+i.reference[b]+(C?0:((x=o.offset)==null?void 0:x[f])||0)-(C?S.crossAxis:0);y<T?y=T:y>N&&(y=N)}return{[p]:m,[f]:y}}}},MO=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:r,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Ci(n,e),d=await Ph(e,u),f=_i(r),p=hd(r),m=Bo(r)==="y",{width:y,height:v}=i.floating;let S,g;f==="top"||f==="bottom"?(S=f,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,S=p==="end"?"top":"bottom");const x=v-d.top-d.bottom,b=y-d.left-d.right,C=$o(v-d[S],x),T=$o(y-d[g],b),N=!e.middlewareData.shift;let P=C,k=T;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=b),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(P=x),N&&!p){const j=qn(d.left,0),D=qn(d.right,0),R=qn(d.top,0),O=qn(d.bottom,0);m?k=y-2*(j!==0||D!==0?j+D:qn(d.left,d.right)):P=v-2*(R!==0||O!==0?R+O:qn(d.top,d.bottom))}await l({...e,availableWidth:k,availableHeight:P});const M=await o.getDimensions(a.floating);return y!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function gv(){return typeof window<"u"}function fd(n){return KT(n)?(n.nodeName||"").toLowerCase():"#document"}function Qn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Nr(n){var e;return(e=(KT(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function KT(n){return gv()?n instanceof Node||n instanceof Qn(n).Node:!1}function Ks(n){return gv()?n instanceof Element||n instanceof Qn(n).Element:!1}function Tr(n){return gv()?n instanceof HTMLElement||n instanceof Qn(n).HTMLElement:!1}function wA(n){return!gv()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Qn(n).ShadowRoot}function ap(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=Xs(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function jO(n){return["table","td","th"].includes(fd(n))}function vv(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Xb(n){const e=Yb(),t=Ks(n)?Xs(n):n;return["transform","translate","scale","rotate","perspective"].some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function IO(n){let e=Uo(n);for(;Tr(e)&&!sd(e);){if(Xb(e))return e;if(vv(e))return null;e=Uo(e)}return null}function Yb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sd(n){return["html","body","#document"].includes(fd(n))}function Xs(n){return Qn(n).getComputedStyle(n)}function yv(n){return Ks(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Uo(n){if(fd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||wA(n)&&n.host||Nr(n);return wA(e)?e.host:e}function XT(n){const e=Uo(n);return sd(e)?n.ownerDocument?n.ownerDocument.body:n.body:Tr(e)&&ap(e)?e:XT(e)}function kh(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=XT(n),i=r===((s=n.ownerDocument)==null?void 0:s.body),o=Qn(r);if(i){const a=r0(o);return e.concat(o,o.visualViewport||[],ap(r)?r:[],a&&t?kh(a):[])}return e.concat(r,kh(r,[],t))}function r0(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function YT(n){const e=Xs(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Tr(n),i=r?n.offsetWidth:t,o=r?n.offsetHeight:s,a=xg(t)!==i||xg(s)!==o;return a&&(t=i,s=o),{width:t,height:s,$:a}}function Qb(n){return Ks(n)?n:n.contextElement}function Pc(n){const e=Qb(n);if(!Tr(e))return _r(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:i}=YT(e);let o=(i?xg(t.width):t.width)/s,a=(i?xg(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const DO=_r(0);function QT(n){const e=Qn(n);return!Yb()||!e.visualViewport?DO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OO(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Qn(n)?!1:e}function Nl(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=Qb(n);let o=_r(1);e&&(s?Ks(s)&&(o=Pc(s)):o=Pc(n));const a=OO(i,t,s)?QT(i):_r(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,d=r.width/o.x,f=r.height/o.y;if(i){const p=Qn(i),m=s&&Ks(s)?Qn(s):s;let y=p,v=r0(y);for(;v&&s&&m!==y;){const S=Pc(v),g=v.getBoundingClientRect(),x=Xs(v),b=g.left+(v.clientLeft+parseFloat(x.paddingLeft))*S.x,C=g.top+(v.clientTop+parseFloat(x.paddingTop))*S.y;l*=S.x,u*=S.y,d*=S.x,f*=S.y,l+=b,u+=C,y=Qn(v),v=r0(y)}}return bg({width:d,height:f,x:l,y:u})}function Zb(n,e){const t=yv(n).scrollLeft;return e?e.left+t:Nl(Nr(n)).left+t}function ZT(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:Zb(n,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function FO(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const i=r==="fixed",o=Nr(s),a=e?vv(e.floating):!1;if(s===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},u=_r(1);const d=_r(0),f=Tr(s);if((f||!f&&!i)&&((fd(s)!=="body"||ap(o))&&(l=yv(s)),Tr(s))){const m=Nl(s);u=Pc(s),d.x=m.x+s.clientLeft,d.y=m.y+s.clientTop}const p=o&&!f&&!i?ZT(o,l,!0):_r(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:t.y*u.y-l.scrollTop*u.y+d.y+p.y}}function HO(n){return Array.from(n.getClientRects())}function zO(n){const e=Nr(n),t=yv(n),s=n.ownerDocument.body,r=qn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=qn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+Zb(n);const a=-t.scrollTop;return Xs(s).direction==="rtl"&&(o+=qn(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:o,y:a}}function $O(n,e){const t=Qn(n),s=Nr(n),r=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,a=0,l=0;if(r){i=r.width,o=r.height;const u=Yb();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:o,x:a,y:l}}function BO(n,e){const t=Nl(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,i=Tr(n)?Pc(n):_r(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,l=r*i.x,u=s*i.y;return{width:o,height:a,x:l,y:u}}function bA(n,e,t){let s;if(e==="viewport")s=$O(n,t);else if(e==="document")s=zO(Nr(n));else if(Ks(e))s=BO(e,t);else{const r=QT(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return bg(s)}function JT(n,e){const t=Uo(n);return t===e||!Ks(t)||sd(t)?!1:Xs(t).position==="fixed"||JT(t,e)}function UO(n,e){const t=e.get(n);if(t)return t;let s=kh(n,[],!1).filter(a=>Ks(a)&&fd(a)!=="body"),r=null;const i=Xs(n).position==="fixed";let o=i?Uo(n):n;for(;Ks(o)&&!sd(o);){const a=Xs(o),l=Xb(o);!l&&a.position==="fixed"&&(r=null),(i?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ap(o)&&!l&&JT(n,o))?s=s.filter(d=>d!==o):r=a,o=Uo(o)}return e.set(n,s),s}function VO(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const o=[...t==="clippingAncestors"?vv(e)?[]:UO(e,this._c):[].concat(t),s],a=o[0],l=o.reduce((u,d)=>{const f=bA(e,d,r);return u.top=qn(f.top,u.top),u.right=$o(f.right,u.right),u.bottom=$o(f.bottom,u.bottom),u.left=qn(f.left,u.left),u},bA(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function WO(n){const{width:e,height:t}=YT(n);return{width:e,height:t}}function GO(n,e,t){const s=Tr(e),r=Nr(e),i=t==="fixed",o=Nl(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=_r(0);if(s||!s&&!i)if((fd(e)!=="body"||ap(r))&&(a=yv(e)),s){const p=Nl(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&(l.x=Zb(r));const u=r&&!s&&!i?ZT(r,a):_r(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Ay(n){return Xs(n).position==="static"}function SA(n,e){if(!Tr(n)||Xs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Nr(n)===t&&(t=t.ownerDocument.body),t}function eN(n,e){const t=Qn(n);if(vv(n))return t;if(!Tr(n)){let r=Uo(n);for(;r&&!sd(r);){if(Ks(r)&&!Ay(r))return r;r=Uo(r)}return t}let s=SA(n,e);for(;s&&jO(s)&&Ay(s);)s=SA(s,e);return s&&sd(s)&&Ay(s)&&!Xb(s)?t:s||IO(n)||t}const qO=async function(n){const e=this.getOffsetParent||eN,t=this.getDimensions,s=await t(n.floating);return{reference:GO(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function KO(n){return Xs(n).direction==="rtl"}const XO={convertOffsetParentRelativeRectToViewportRelativeRect:FO,getDocumentElement:Nr,getClippingRect:VO,getOffsetParent:eN,getElementRects:qO,getClientRects:HO,getDimensions:WO,getScale:Pc,isElement:Ks,isRTL:KO};function tN(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function YO(n,e){let t=null,s;const r=Nr(n);function i(){var a;clearTimeout(s),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=n.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=u;if(a||e(),!p||!m)return;const y=Op(f),v=Op(r.clientWidth-(d+p)),S=Op(r.clientHeight-(f+m)),g=Op(d),b={rootMargin:-y+"px "+-v+"px "+-S+"px "+-g+"px",threshold:qn(0,$o(1,l))||1};let C=!0;function T(N){const P=N[0].intersectionRatio;if(P!==l){if(!C)return o();P?o(!1,P):s=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!tN(u,n.getBoundingClientRect())&&o(),C=!1}try{t=new IntersectionObserver(T,{...b,root:r.ownerDocument})}catch{t=new IntersectionObserver(T,b)}t.observe(n)}return o(!0),i}function QO(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=Qb(n),d=r||i?[...u?kh(u):[],...kh(e)]:[];d.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),i&&g.addEventListener("resize",t)});const f=u&&a?YO(u,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[x]=g;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let y,v=l?Nl(n):null;l&&S();function S(){const g=Nl(n);v&&!tN(v,g)&&t(),v=g,y=requestAnimationFrame(S)}return t(),()=>{var g;d.forEach(x=>{r&&x.removeEventListener("scroll",t),i&&x.removeEventListener("resize",t)}),f==null||f(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const ZO=kO,JO=RO,eF=TO,tF=MO,nF=NO,AA=_O,sF=LO,rF=(n,e,t)=>{const s=new Map,r={platform:XO,...t},i={...r.platform,_c:s};return CO(n,e,{...r,platform:i})};var hm=typeof document<"u"?w.useLayoutEffect:w.useEffect;function Sg(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!Sg(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const i=r[s];if(!(i==="_owner"&&n.$$typeof)&&!Sg(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function nN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function EA(n,e){const t=nN(n);return Math.round(e*t)/t}function Ey(n){const e=w.useRef(n);return hm(()=>{e.current=n}),e}function iF(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[d,f]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=w.useState(s);Sg(p,s)||m(s);const[y,v]=w.useState(null),[S,g]=w.useState(null),x=w.useCallback(L=>{L!==N.current&&(N.current=L,v(L))},[]),b=w.useCallback(L=>{L!==P.current&&(P.current=L,g(L))},[]),C=i||y,T=o||S,N=w.useRef(null),P=w.useRef(null),k=w.useRef(d),M=l!=null,j=Ey(l),D=Ey(r),R=Ey(u),O=w.useCallback(()=>{if(!N.current||!P.current)return;const L={placement:e,strategy:t,middleware:p};D.current&&(L.platform=D.current),rF(N.current,P.current,L).then(z=>{const G={...z,isPositioned:R.current!==!1};I.current&&!Sg(k.current,G)&&(k.current=G,Hl.flushSync(()=>{f(G)}))})},[p,e,t,D,R]);hm(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const I=w.useRef(!1);hm(()=>(I.current=!0,()=>{I.current=!1}),[]),hm(()=>{if(C&&(N.current=C),T&&(P.current=T),C&&T){if(j.current)return j.current(C,T,O);O()}},[C,T,O,j,M]);const B=w.useMemo(()=>({reference:N,floating:P,setReference:x,setFloating:b}),[x,b]),H=w.useMemo(()=>({reference:C,floating:T}),[C,T]),F=w.useMemo(()=>{const L={position:t,left:0,top:0};if(!H.floating)return L;const z=EA(H.floating,d.x),G=EA(H.floating,d.y);return a?{...L,transform:"translate("+z+"px, "+G+"px)",...nN(H.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:G}},[t,a,H.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:O,refs:B,elements:H,floatingStyles:F}),[d,O,B,H,F])}const oF=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?AA({element:s.current,padding:r}).fn(t):{}:s?AA({element:s,padding:r}).fn(t):{}}}},aF=(n,e)=>({...ZO(n),options:[n,e]}),lF=(n,e)=>({...JO(n),options:[n,e]}),cF=(n,e)=>({...sF(n),options:[n,e]}),uF=(n,e)=>({...eF(n),options:[n,e]}),dF=(n,e)=>({...tF(n),options:[n,e]}),hF=(n,e)=>({...nF(n),options:[n,e]}),fF=(n,e)=>({...oF(n),options:[n,e]});var pF="Arrow",sN=w.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...i}=n;return h.jsx(he.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});sN.displayName=pF;var mF=sN;function gF(n){const[e,t]=w.useState(void 0);return gt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var Jb="Popper",[rN,xv]=ki(Jb),[vF,iN]=rN(Jb),oN=n=>{const{__scopePopper:e,children:t}=n,[s,r]=w.useState(null);return h.jsx(vF,{scope:e,anchor:s,onAnchorChange:r,children:t})};oN.displayName=Jb;var aN="PopperAnchor",lN=w.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,i=iN(aN,t),o=w.useRef(null),a=Oe(e,o);return w.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:h.jsx(he.div,{...r,ref:a})});lN.displayName=aN;var e1="PopperContent",[yF,xF]=rN(e1),cN=w.forwardRef((n,e)=>{var U,ve,je,J,Se,Ae;const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...v}=n,S=iN(e1,t),[g,x]=w.useState(null),b=Oe(e,ce=>x(ce)),[C,T]=w.useState(null),N=gF(C),P=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,M=s+(i!=="center"?"-"+i:""),j=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],R=D.length>0,O={padding:j,boundary:D.filter(bF),altBoundary:R},{refs:I,floatingStyles:B,placement:H,isPositioned:F,middlewareData:L}=iF({strategy:"fixed",placement:M,whileElementsMounted:(...ce)=>QO(...ce,{animationFrame:m==="always"}),elements:{reference:S.anchor},middleware:[aF({mainAxis:r+k,alignmentAxis:o}),l&&lF({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?cF():void 0,...O}),l&&uF({...O}),dF({...O,apply:({elements:ce,rects:_e,availableWidth:nt,availableHeight:We})=>{const{width:ns,height:ea}=_e.reference,Wl=ce.floating.style;Wl.setProperty("--radix-popper-available-width",`${nt}px`),Wl.setProperty("--radix-popper-available-height",`${We}px`),Wl.setProperty("--radix-popper-anchor-width",`${ns}px`),Wl.setProperty("--radix-popper-anchor-height",`${ea}px`)}}),C&&fF({element:C,padding:a}),SF({arrowWidth:P,arrowHeight:k}),p&&hF({strategy:"referenceHidden",...O})]}),[z,G]=hN(H),X=Mn(y);gt(()=>{F&&(X==null||X())},[F,X]);const Z=(U=L.arrow)==null?void 0:U.x,ie=(ve=L.arrow)==null?void 0:ve.y,be=((je=L.arrow)==null?void 0:je.centerOffset)!==0,[tt,pe]=w.useState();return gt(()=>{g&&pe(window.getComputedStyle(g).zIndex)},[g]),h.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:F?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:tt,"--radix-popper-transform-origin":[(J=L.transformOrigin)==null?void 0:J.x,(Se=L.transformOrigin)==null?void 0:Se.y].join(" "),...((Ae=L.hide)==null?void 0:Ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:h.jsx(yF,{scope:t,placedSide:z,onArrowChange:T,arrowX:Z,arrowY:ie,shouldHideArrow:be,children:h.jsx(he.div,{"data-side":z,"data-align":G,...v,ref:b,style:{...v.style,animation:F?void 0:"none"}})})})});cN.displayName=e1;var uN="PopperArrow",wF={top:"bottom",right:"left",bottom:"top",left:"right"},dN=w.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,i=xF(uN,s),o=wF[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(mF,{...r,ref:t,style:{...r.style,display:"block"}})})});dN.displayName=uN;function bF(n){return n!==null}var SF=n=>({name:"transformOrigin",options:n,fn(e){var S,g,x;const{placement:t,rects:s,middlewareData:r}=e,o=((S=r.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[u,d]=hN(t),f={start:"0%",center:"50%",end:"100%"}[d],p=(((g=r.arrow)==null?void 0:g.x)??0)+a/2,m=(((x=r.arrow)==null?void 0:x.y)??0)+l/2;let y="",v="";return u==="bottom"?(y=o?f:`${p}px`,v=`${-l}px`):u==="top"?(y=o?f:`${p}px`,v=`${s.floating.height+l}px`):u==="right"?(y=`${-l}px`,v=o?f:`${m}px`):u==="left"&&(y=`${s.floating.width+l}px`,v=o?f:`${m}px`),{data:{x:y,y:v}}}});function hN(n){const[e,t="center"]=n.split("-");return[e,t]}var AF=oN,fN=lN,pN=cN,mN=dN,[wv,u5]=ki("Tooltip",[xv]),t1=xv(),gN="TooltipProvider",EF=700,CA="tooltip.open",[CF,vN]=wv(gN),yN=n=>{const{__scopeTooltip:e,delayDuration:t=EF,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=n,o=w.useRef(!0),a=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(CF,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:a,onPointerInTransitChange:w.useCallback(u=>{a.current=u},[]),disableHoverableContent:r,children:i})};yN.displayName=gN;var xN="Tooltip",[d5,bv]=wv(xN),i0="TooltipTrigger",_F=w.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=bv(i0,t),i=vN(i0,t),o=t1(t),a=w.useRef(null),l=Oe(e,a,r.onTriggerChange),u=w.useRef(!1),d=w.useRef(!1),f=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),h.jsx(fN,{asChild:!0,...o,children:h.jsx(he.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:l,onPointerMove:ee(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),d.current=!0)}),onPointerLeave:ee(n.onPointerLeave,()=>{r.onTriggerLeave(),d.current=!1}),onPointerDown:ee(n.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ee(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:ee(n.onBlur,r.onClose),onClick:ee(n.onClick,r.onClose)})})});_F.displayName=i0;var TF="TooltipPortal",[h5,NF]=wv(TF,{forceMount:void 0}),rd="TooltipContent",wN=w.forwardRef((n,e)=>{const t=NF(rd,n.__scopeTooltip),{forceMount:s=t.forceMount,side:r="top",...i}=n,o=bv(rd,n.__scopeTooltip);return h.jsx($l,{present:s||o.open,children:o.disableHoverableContent?h.jsx(bN,{side:r,...i,ref:e}):h.jsx(PF,{side:r,...i,ref:e})})}),PF=w.forwardRef((n,e)=>{const t=bv(rd,n.__scopeTooltip),s=vN(rd,n.__scopeTooltip),r=w.useRef(null),i=Oe(e,r),[o,a]=w.useState(null),{trigger:l,onClose:u}=t,d=r.current,{onPointerInTransitChange:f}=s,p=w.useCallback(()=>{a(null),f(!1)},[f]),m=w.useCallback((y,v)=>{const S=y.currentTarget,g={x:y.clientX,y:y.clientY},x=jF(g,S.getBoundingClientRect()),b=IF(g,x),C=DF(v.getBoundingClientRect()),T=FF([...b,...C]);a(T),f(!0)},[f]);return w.useEffect(()=>()=>p(),[p]),w.useEffect(()=>{if(l&&d){const y=S=>m(S,d),v=S=>m(S,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",v)}}},[l,d,m,p]),w.useEffect(()=>{if(o){const y=v=>{const S=v.target,g={x:v.clientX,y:v.clientY},x=(l==null?void 0:l.contains(S))||(d==null?void 0:d.contains(S)),b=!OF(g,o);x?p():b&&(p(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,o,u,p]),h.jsx(bN,{...n,ref:i})}),[kF,RF]=wv(xN,{isInside:!1}),LF=RI("TooltipContent"),bN=w.forwardRef((n,e)=>{const{__scopeTooltip:t,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,l=bv(rd,t),u=t1(t),{onClose:d}=l;return w.useEffect(()=>(document.addEventListener(CA,d),()=>document.removeEventListener(CA,d)),[d]),w.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),h.jsx(rp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:h.jsxs(pN,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(LF,{children:s}),h.jsx(kF,{scope:t,isInside:!0,children:h.jsx(QI,{id:l.contentId,role:"tooltip",children:r||s})})]})})});wN.displayName=rd;var SN="TooltipArrow",MF=w.forwardRef((n,e)=>{const{__scopeTooltip:t,...s}=n,r=t1(t);return RF(SN,t).isInside?null:h.jsx(mN,{...r,...s,ref:e})});MF.displayName=SN;function jF(n,e){const t=Math.abs(e.top-n.y),s=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,s,r,i)){case i:return"left";case r:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function IF(n,e,t=5){const s=[];switch(e){case"top":s.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":s.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":s.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":s.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return s}function DF(n){const{top:e,right:t,bottom:s,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:s},{x:r,y:s}]}function OF(n,e){const{x:t,y:s}=n;let r=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,d=e[o].y;l>s!=d>s&&t<(u-a)*(s-l)/(d-l)+a&&(r=!r)}return r}function FF(n){const e=n.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),HF(e)}function HF(n){if(n.length<=1)return n.slice();const e=[];for(let s=0;s<n.length;s++){const r=n[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let s=n.length-1;s>=0;s--){const r=n[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(r.y-o.y)>=(i.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var zF=yN,AN=wN;const $F=zF,BF=w.forwardRef(({className:n,sideOffset:e=4,...t},s)=>h.jsx(AN,{ref:s,sideOffset:e,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));BF.displayName=AN.displayName;function lp(){const n=Ob(),{data:e,isLoading:t,error:s}=Ho({queryKey:["/api/auth/user"],retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!0,staleTime:5*60*1e3}),r=xl({mutationFn:a=>wl("/api/auth/login","POST",a),onSuccess:a=>{n.setQueryData(["/api/auth/user"],a.user),n.invalidateQueries({queryKey:["/api/auth/user"]})}}),i=xl({mutationFn:a=>wl("/api/auth/register","POST",a),onSuccess:a=>{n.setQueryData(["/api/auth/user"],a.user),n.invalidateQueries({queryKey:["/api/auth/user"]})}}),o=xl({mutationFn:()=>wl("/api/auth/logout","POST"),onSuccess:()=>{n.setQueryData(["/api/auth/user"],null),n.invalidateQueries({queryKey:["/api/auth/user"]})}});return{user:e,isLoading:t,isAuthenticated:!!e&&e!==null,login:r.mutateAsync,register:i.mutateAsync,logout:o.mutateAsync,isLoginLoading:r.isPending,isRegisterLoading:i.isPending,isLoggingOut:o.isPending,loginError:r.error,registerError:i.error}}const UF=mv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=w.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?PI:"button";return h.jsx(o,{className:Ce(UF({variant:e,size:t,className:n})),ref:i,...r})});ae.displayName="Button";const lt=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));lt.displayName="Card";const Jt=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("flex flex-col space-y-1.5 p-6",n),...e}));Jt.displayName="CardHeader";const un=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("text-2xl font-semibold leading-none tracking-tight",n),...e}));un.displayName="CardTitle";const VF=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("text-sm text-muted-foreground",n),...e}));VF.displayName="CardDescription";const ft=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("p-6 pt-0",n),...e}));ft.displayName="CardContent";const WF=w.forwardRef(({className:n,...e},t)=>h.jsx("div",{ref:t,className:Ce("flex items-center p-6 pt-0",n),...e}));WF.displayName="CardFooter";const GF=mv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function bt({className:n,variant:e,...t}){return h.jsx("div",{className:Ce(GF({variant:e}),n),...t})}var Cy="focusScope.autoFocusOnMount",_y="focusScope.autoFocusOnUnmount",_A={bubbles:!1,cancelable:!0},qF="FocusScope",n1=w.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=n,[a,l]=w.useState(null),u=Mn(r),d=Mn(i),f=w.useRef(null),p=Oe(e,v=>l(v)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let v=function(b){if(m.paused||!a)return;const C=b.target;a.contains(C)?f.current=C:Di(f.current,{select:!0})},S=function(b){if(m.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||Di(f.current,{select:!0}))},g=function(b){if(document.activeElement===document.body)for(const T of b)T.removedNodes.length>0&&Di(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",S);const x=new MutationObserver(g);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",S),x.disconnect()}}},[s,a,m.paused]),w.useEffect(()=>{if(a){NA.add(m);const v=document.activeElement;if(!a.contains(v)){const g=new CustomEvent(Cy,_A);a.addEventListener(Cy,u),a.dispatchEvent(g),g.defaultPrevented||(KF(JF(EN(a)),{select:!0}),document.activeElement===v&&Di(a))}return()=>{a.removeEventListener(Cy,u),setTimeout(()=>{const g=new CustomEvent(_y,_A);a.addEventListener(_y,d),a.dispatchEvent(g),g.defaultPrevented||Di(v??document.body,{select:!0}),a.removeEventListener(_y,d),NA.remove(m)},0)}}},[a,u,d,m]);const y=w.useCallback(v=>{if(!t&&!s||m.paused)return;const S=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(S&&g){const x=v.currentTarget,[b,C]=XF(x);b&&C?!v.shiftKey&&g===C?(v.preventDefault(),t&&Di(b,{select:!0})):v.shiftKey&&g===b&&(v.preventDefault(),t&&Di(C,{select:!0})):g===x&&v.preventDefault()}},[t,s,m.paused]);return h.jsx(he.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});n1.displayName=qF;function KF(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Di(s,{select:e}),document.activeElement!==t)return}function XF(n){const e=EN(n),t=TA(e,n),s=TA(e.reverse(),n);return[t,s]}function EN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function TA(n,e){for(const t of n)if(!YF(t,{upTo:e}))return t}function YF(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function QF(n){return n instanceof HTMLInputElement&&"select"in n}function Di(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&QF(n)&&e&&n.select()}}var NA=ZF();function ZF(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=PA(n,e),n.unshift(e)},remove(e){var t;n=PA(n,e),(t=n[0])==null||t.resume()}}}function PA(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function JF(n){return n.filter(e=>e.tagName!=="A")}var Ty=0;function CN(){w.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??kA()),document.body.insertAdjacentElement("beforeend",n[1]??kA()),Ty++,()=>{Ty===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ty--}},[])}function kA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Ar=function(){return Ar=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ar.apply(this,arguments)};function _N(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function e4(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}var fm="right-scroll-bar-position",pm="width-before-scroll-bar",t4="with-scroll-bars-hidden",n4="--removed-body-scroll-bar-size";function Ny(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function s4(n,e){var t=w.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var r4=typeof window<"u"?w.useLayoutEffect:w.useEffect,RA=new WeakMap;function i4(n,e){var t=s4(null,function(s){return n.forEach(function(r){return Ny(r,s)})});return r4(function(){var s=RA.get(t);if(s){var r=new Set(s),i=new Set(n),o=t.current;r.forEach(function(a){i.has(a)||Ny(a,null)}),i.forEach(function(a){r.has(a)||Ny(a,o)})}RA.set(t,n)},[n]),t}function o4(n){return n}function a4(n,e){e===void 0&&(e=o4);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,s);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(s=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){s=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),t}}}};return r}function l4(n){n===void 0&&(n={});var e=a4(null);return e.options=Ar({async:!0,ssr:!1},n),e}var TN=function(n){var e=n.sideCar,t=_N(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,Ar({},t))};TN.isSideCarExport=!0;function c4(n,e){return n.useMedium(e),TN}var NN=l4(),Py=function(){},Sv=w.forwardRef(function(n,e){var t=w.useRef(null),s=w.useState({onScrollCapture:Py,onWheelCapture:Py,onTouchMoveCapture:Py}),r=s[0],i=s[1],o=n.forwardProps,a=n.children,l=n.className,u=n.removeScrollBar,d=n.enabled,f=n.shards,p=n.sideCar,m=n.noIsolation,y=n.inert,v=n.allowPinchZoom,S=n.as,g=S===void 0?"div":S,x=n.gapMode,b=_N(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,T=i4([t,e]),N=Ar(Ar({},b),r);return w.createElement(w.Fragment,null,d&&w.createElement(C,{sideCar:NN,removeScrollBar:u,shards:f,noIsolation:m,inert:y,setCallbacks:i,allowPinchZoom:!!v,lockRef:t,gapMode:x}),o?w.cloneElement(w.Children.only(a),Ar(Ar({},N),{ref:T})):w.createElement(g,Ar({},N,{className:l,ref:T}),a))});Sv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sv.classNames={fullWidth:pm,zeroRight:fm};var u4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function d4(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=u4();return e&&n.setAttribute("nonce",e),n}function h4(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function f4(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var p4=function(){var n=0,e=null;return{add:function(t){n==0&&(e=d4())&&(h4(e,t),f4(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m4=function(){var n=p4();return function(e,t){w.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},PN=function(){var n=m4(),e=function(t){var s=t.styles,r=t.dynamic;return n(s,r),null};return e},g4={left:0,top:0,right:0,gap:0},ky=function(n){return parseInt(n||"",10)||0},v4=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[ky(t),ky(s),ky(r)]},y4=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return g4;var e=v4(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},x4=PN(),kc="data-scroll-locked",w4=function(n,e,t,s){var r=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(t4,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(a,"px ").concat(s,`;
  }
  body[`).concat(kc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fm,` {
    right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(pm,` {
    margin-right: `).concat(a,"px ").concat(s,`;
  }
  
  .`).concat(fm," .").concat(fm,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(pm," .").concat(pm,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(kc,`] {
    `).concat(n4,": ").concat(a,`px;
  }
`)},LA=function(){var n=parseInt(document.body.getAttribute(kc)||"0",10);return isFinite(n)?n:0},b4=function(){w.useEffect(function(){return document.body.setAttribute(kc,(LA()+1).toString()),function(){var n=LA()-1;n<=0?document.body.removeAttribute(kc):document.body.setAttribute(kc,n.toString())}},[])},S4=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,r=s===void 0?"margin":s;b4();var i=w.useMemo(function(){return y4(r)},[r]);return w.createElement(x4,{styles:w4(i,!e,r,t?"":"!important")})},o0=!1;if(typeof window<"u")try{var Fp=Object.defineProperty({},"passive",{get:function(){return o0=!0,!0}});window.addEventListener("test",Fp,Fp),window.removeEventListener("test",Fp,Fp)}catch{o0=!1}var Kl=o0?{passive:!1}:!1,A4=function(n){return n.tagName==="TEXTAREA"},kN=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!A4(n)&&t[e]==="visible")},E4=function(n){return kN(n,"overflowY")},C4=function(n){return kN(n,"overflowX")},MA=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=RN(n,s);if(r){var i=LN(n,s),o=i[1],a=i[2];if(o>a)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},_4=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},T4=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},RN=function(n,e){return n==="v"?E4(e):C4(e)},LN=function(n,e){return n==="v"?_4(e):T4(e)},N4=function(n,e){return n==="h"&&e==="rtl"?-1:1},P4=function(n,e,t,s,r){var i=N4(n,window.getComputedStyle(e).direction),o=i*s,a=t.target,l=e.contains(a),u=!1,d=o>0,f=0,p=0;do{var m=LN(n,a),y=m[0],v=m[1],S=m[2],g=v-S-i*y;(y||g)&&RN(n,a)&&(f+=g,p+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!r)||!d&&(Math.abs(p)<1||!r))&&(u=!0),u},Hp=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},jA=function(n){return[n.deltaX,n.deltaY]},IA=function(n){return n&&"current"in n?n.current:n},k4=function(n,e){return n[0]===e[0]&&n[1]===e[1]},R4=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},L4=0,Xl=[];function M4(n){var e=w.useRef([]),t=w.useRef([0,0]),s=w.useRef(),r=w.useState(L4++)[0],i=w.useState(PN)[0],o=w.useRef(n);w.useEffect(function(){o.current=n},[n]),w.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var v=e4([n.lockRef.current],(n.shards||[]).map(IA),!0).filter(Boolean);return v.forEach(function(S){return S.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var a=w.useCallback(function(v,S){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var g=Hp(v),x=t.current,b="deltaX"in v?v.deltaX:x[0]-g[0],C="deltaY"in v?v.deltaY:x[1]-g[1],T,N=v.target,P=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in v&&P==="h"&&N.type==="range")return!1;var k=MA(P,N);if(!k)return!0;if(k?T=P:(T=P==="v"?"h":"v",k=MA(P,N)),!k)return!1;if(!s.current&&"changedTouches"in v&&(b||C)&&(s.current=T),!T)return!0;var M=s.current||T;return P4(M,S,v,M==="h"?b:C,!0)},[]),l=w.useCallback(function(v){var S=v;if(!(!Xl.length||Xl[Xl.length-1]!==i)){var g="deltaY"in S?jA(S):Hp(S),x=e.current.filter(function(T){return T.name===S.type&&(T.target===S.target||S.target===T.shadowParent)&&k4(T.delta,g)})[0];if(x&&x.should){S.cancelable&&S.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(IA).filter(Boolean).filter(function(T){return T.contains(S.target)}),C=b.length>0?a(S,b[0]):!o.current.noIsolation;C&&S.cancelable&&S.preventDefault()}}},[]),u=w.useCallback(function(v,S,g,x){var b={name:v,delta:S,target:g,should:x,shadowParent:j4(g)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),d=w.useCallback(function(v){t.current=Hp(v),s.current=void 0},[]),f=w.useCallback(function(v){u(v.type,jA(v),v.target,a(v,n.lockRef.current))},[]),p=w.useCallback(function(v){u(v.type,Hp(v),v.target,a(v,n.lockRef.current))},[]);w.useEffect(function(){return Xl.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Kl),document.addEventListener("touchmove",l,Kl),document.addEventListener("touchstart",d,Kl),function(){Xl=Xl.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Kl),document.removeEventListener("touchmove",l,Kl),document.removeEventListener("touchstart",d,Kl)}},[]);var m=n.removeScrollBar,y=n.inert;return w.createElement(w.Fragment,null,y?w.createElement(i,{styles:R4(r)}):null,m?w.createElement(S4,{gapMode:n.gapMode}):null)}function j4(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const I4=c4(NN,M4);var s1=w.forwardRef(function(n,e){return w.createElement(Sv,Ar({},n,{ref:e,sideCar:I4}))});s1.classNames=Sv.classNames;var D4=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Yl=new WeakMap,zp=new WeakMap,$p={},Ry=0,MN=function(n){return n&&(n.host||MN(n.parentNode))},O4=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=MN(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},F4=function(n,e,t,s){var r=O4(e,Array.isArray(n)?n:[n]);$p[t]||($p[t]=new WeakMap);var i=$p[t],o=[],a=new Set,l=new Set(r),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};r.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))d(p);else try{var m=p.getAttribute(s),y=m!==null&&m!=="false",v=(Yl.get(p)||0)+1,S=(i.get(p)||0)+1;Yl.set(p,v),i.set(p,S),o.push(p),v===1&&y&&zp.set(p,!0),S===1&&p.setAttribute(t,"true"),y||p.setAttribute(s,"true")}catch(g){console.error("aria-hidden: cannot operate on ",p,g)}})};return d(e),a.clear(),Ry++,function(){o.forEach(function(f){var p=Yl.get(f)-1,m=i.get(f)-1;Yl.set(f,p),i.set(f,m),p||(zp.has(f)||f.removeAttribute(s),zp.delete(f)),m||f.removeAttribute(t)}),Ry--,Ry||(Yl=new WeakMap,Yl=new WeakMap,zp=new WeakMap,$p={})}},jN=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),r=D4(n);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),F4(s,r,t,"aria-hidden")):function(){return null}},r1="Dialog",[IN,f5]=ki(r1),[H4,Ys]=IN(r1),DN=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:o=!0}=n,a=w.useRef(null),l=w.useRef(null),[u=!1,d]=td({prop:s,defaultProp:r,onChange:i});return h.jsx(H4,{scope:e,triggerRef:a,contentRef:l,contentId:pi(),titleId:pi(),descriptionId:pi(),open:u,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(f=>!f),[d]),modal:o,children:t})};DN.displayName=r1;var ON="DialogTrigger",z4=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ys(ON,t),i=Oe(e,r.triggerRef);return h.jsx(he.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":a1(r.open),...s,ref:i,onClick:ee(n.onClick,r.onOpenToggle)})});z4.displayName=ON;var i1="DialogPortal",[$4,FN]=IN(i1,{forceMount:void 0}),HN=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=n,i=Ys(i1,e);return h.jsx($4,{scope:e,forceMount:t,children:w.Children.map(s,o=>h.jsx($l,{present:t||i.open,children:h.jsx(hv,{asChild:!0,container:r,children:o})}))})};HN.displayName=i1;var Ag="DialogOverlay",zN=w.forwardRef((n,e)=>{const t=FN(Ag,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Ys(Ag,n.__scopeDialog);return i.modal?h.jsx($l,{present:s||i.open,children:h.jsx(U4,{...r,ref:e})}):null});zN.displayName=Ag;var B4=ed("DialogOverlay.RemoveScroll"),U4=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ys(Ag,t);return h.jsx(s1,{as:B4,allowPinchZoom:!0,shards:[r.contentRef],children:h.jsx(he.div,{"data-state":a1(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Pl="DialogContent",$N=w.forwardRef((n,e)=>{const t=FN(Pl,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=Ys(Pl,n.__scopeDialog);return h.jsx($l,{present:s||i.open,children:i.modal?h.jsx(V4,{...r,ref:e}):h.jsx(W4,{...r,ref:e})})});$N.displayName=Pl;var V4=w.forwardRef((n,e)=>{const t=Ys(Pl,n.__scopeDialog),s=w.useRef(null),r=Oe(e,t.contentRef,s);return w.useEffect(()=>{const i=s.current;if(i)return jN(i)},[]),h.jsx(BN,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ee(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ee(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ee(n.onFocusOutside,i=>i.preventDefault())})}),W4=w.forwardRef((n,e)=>{const t=Ys(Pl,n.__scopeDialog),s=w.useRef(!1),r=w.useRef(!1);return h.jsx(BN,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(s.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),BN=w.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=n,a=Ys(Pl,t),l=w.useRef(null),u=Oe(e,l);return CN(),h.jsxs(h.Fragment,{children:[h.jsx(n1,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:h.jsx(rp,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":a1(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(G4,{titleId:a.titleId}),h.jsx(K4,{contentRef:l,descriptionId:a.descriptionId})]})]})}),o1="DialogTitle",UN=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ys(o1,t);return h.jsx(he.h2,{id:r.titleId,...s,ref:e})});UN.displayName=o1;var VN="DialogDescription",WN=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ys(VN,t);return h.jsx(he.p,{id:r.descriptionId,...s,ref:e})});WN.displayName=VN;var GN="DialogClose",qN=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=Ys(GN,t);return h.jsx(he.button,{type:"button",...s,ref:e,onClick:ee(n.onClick,()=>r.onOpenChange(!1))})});qN.displayName=GN;function a1(n){return n?"open":"closed"}var KN="DialogTitleWarning",[p5,XN]=TI(KN,{contentName:Pl,titleName:o1,docsSlug:"dialog"}),G4=({titleId:n})=>{const e=XN(KN),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},q4="DialogDescriptionWarning",K4=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XN(q4).contentName}}.`;return w.useEffect(()=>{var i;const r=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},X4=DN,Y4=HN,YN=zN,QN=$N,ZN=UN,JN=WN,Q4=qN;const l1=X4,Z4=Y4,eP=w.forwardRef(({className:n,...e},t)=>h.jsx(YN,{ref:t,className:Ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));eP.displayName=YN.displayName;const Av=w.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(Z4,{children:[h.jsx(eP,{}),h.jsxs(QN,{ref:s,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,h.jsxs(Q4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(op,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Av.displayName=QN.displayName;const Ev=({className:n,...e})=>h.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Ev.displayName="DialogHeader";const Cv=w.forwardRef(({className:n,...e},t)=>h.jsx(ZN,{ref:t,className:Ce("text-lg font-semibold leading-none tracking-tight",n),...e}));Cv.displayName=ZN.displayName;const J4=w.forwardRef(({className:n,...e},t)=>h.jsx(JN,{ref:t,className:Ce("text-sm text-muted-foreground",n),...e}));J4.displayName=JN.displayName;const dn=w.forwardRef(({className:n,type:e,...t},s)=>h.jsx("input",{type:e,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));dn.displayName="Input";var e3="Label",tP=w.forwardRef((n,e)=>h.jsx(he.label,{...n,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=n.onMouseDown)==null||r.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));tP.displayName=e3;var nP=tP;const t3=mv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Gn=w.forwardRef(({className:n,...e},t)=>h.jsx(nP,{ref:t,className:Ce(t3(),n),...e}));Gn.displayName=nP.displayName;function n3({open:n,onOpenChange:e,onUploadComplete:t}){const[s,r]=w.useState(null),[i,o]=w.useState(""),[a,l]=w.useState(!1),u=w.useRef(null),{toast:d}=zl(),f=xl({mutationFn:async g=>{const x=await fetch("/api/documents/upload",{method:"POST",body:g,credentials:"include"});if(!x.ok){const b=await x.text();throw new Error(b||"Upload failed")}return x.json()},onSuccess:()=>{d({title:"Document uploaded successfully",description:"Your document is ready for signing."}),t(),p()},onError:g=>{d({title:"Upload failed",description:g.message,variant:"destructive"})}}),p=()=>{r(null),o(""),u.current&&(u.current.value="")},m=g=>{if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(g.type)){d({title:"Invalid file type",description:"Please select a PDF or DOCX file.",variant:"destructive"});return}if(g.size>10*1024*1024){d({title:"File too large",description:"Please select a file smaller than 10MB.",variant:"destructive"});return}r(g),i||o(g.name.replace(/\.[^/.]+$/,""))},y=g=>{g.preventDefault(),l(!1);const x=g.dataTransfer.files[0];x&&m(x)},v=()=>{if(!s)return;const g=new FormData;g.append("document",s),g.append("name",i||s.name),f.mutate(g)},S=()=>{f.isPending||(e(!1),p())};return h.jsx(l1,{open:n,onOpenChange:S,children:h.jsxs(Av,{className:"max-w-lg",children:[h.jsx(Ev,{children:h.jsxs(Cv,{className:"flex items-center space-x-2",children:[h.jsx(ah,{className:"w-5 h-5"}),h.jsx("span",{children:"Upload Document"})]})}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"documentName",children:"Document Name"}),h.jsx(dn,{id:"documentName",value:i,onChange:g=>o(g.target.value),placeholder:"Enter document name"})]}),h.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${a?"border-primary bg-blue-50":"border-gray-300 hover:border-primary hover:bg-blue-50"}`,onDrop:y,onDragOver:g=>{g.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onClick:()=>{var g;return(g=u.current)==null?void 0:g.click()},children:s?h.jsxs("div",{className:"space-y-2",children:[h.jsx(hi,{className:"mx-auto h-12 w-12 text-primary"}),h.jsx("p",{className:"font-medium text-gray-900",children:s.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:[(s.size/(1024*1024)).toFixed(2)," MB"]}),h.jsxs(ae,{variant:"outline",size:"sm",onClick:g=>{g.stopPropagation(),r(null),u.current&&(u.current.value="")},children:[h.jsx(op,{className:"w-4 h-4 mr-2"}),"Remove"]})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsx(ah,{className:"mx-auto h-12 w-12 text-gray-400"}),h.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Upload PDF or Word Document"}),h.jsx("p",{className:"text-gray-600",children:"Click to browse or drag and drop your file here"}),h.jsx("p",{className:"text-xs text-gray-500",children:"Supported formats: PDF, DOCX (up to 10MB)"})]})}),h.jsx("input",{ref:u,type:"file",className:"hidden",accept:".pdf,.docx",onChange:g=>{var b;const x=(b=g.target.files)==null?void 0:b[0];x&&m(x)}}),h.jsxs("div",{className:"flex justify-end space-x-3",children:[h.jsx(ae,{variant:"outline",onClick:S,disabled:f.isPending,children:"Cancel"}),h.jsx(ae,{onClick:v,disabled:!s||!i.trim()||f.isPending,className:"bg-primary hover:bg-blue-700",children:f.isPending?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):h.jsxs(h.Fragment,{children:[h.jsx(ah,{className:"w-4 h-4 mr-2"}),"Upload & Continue"]})})]})]})]})})}function Ly(){const[n,e]=w.useState(!1),{user:t,logout:s}=lp();zl();const{data:r=[],isLoading:i,refetch:o,error:a}=Ho({queryKey:["/api/documents"]});console.log("Dashboard state:",{documents:r==null?void 0:r.length,isLoading:i,error:a==null?void 0:a.message,user:t==null?void 0:t.username});const l=u=>{switch(u){case"completed":return h.jsxs(bt,{className:"bg-green-100 text-green-800",children:[h.jsx(nd,{className:"w-3 h-3 mr-1"}),"Completed"]});case"pending":return h.jsxs(bt,{className:"bg-yellow-100 text-yellow-800",children:[h.jsx(zo,{className:"w-3 h-3 mr-1"}),"Pending"]});case"draft":return h.jsxs(bt,{variant:"secondary",children:[h.jsx(hi,{className:"w-3 h-3 mr-1"}),"Draft"]});default:return h.jsx(bt,{variant:"outline",children:u})}};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(DT,{className:"h-8 w-8 text-primary"}),h.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SecureSign"})]}),h.jsxs("nav",{className:"hidden md:flex space-x-8 ml-8",children:[h.jsx(ih,{href:"/",className:"text-primary font-medium border-b-2 border-primary pb-4",children:"Documents"}),h.jsx(ih,{href:"/audit-logs",className:"text-gray-500 hover:text-gray-700 pb-4",children:"Audit Logs"}),h.jsx("a",{href:"#",className:"text-gray-500 hover:text-gray-700 pb-4",children:"Compliance"}),h.jsx("a",{href:"#",className:"text-gray-500 hover:text-gray-700 pb-4",children:"Team"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs(ae,{onClick:()=>e(!0),className:"bg-primary hover:bg-blue-700",children:[h.jsx(dm,{className:"w-4 h-4 mr-2"}),"New Document"]}),h.jsx("div",{className:"relative",children:h.jsx("button",{className:"flex items-center space-x-2 bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition-colors",children:h.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium",children:"JD"})})})]})]})})}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"My Documents"}),h.jsx("p",{className:"text-gray-600",children:"Manage your documents and signature requests"})]}),i?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((u,d)=>h.jsxs(lt,{className:"animate-pulse",children:[h.jsxs(Jt,{children:[h.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),h.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),h.jsx(ft,{children:h.jsx("div",{className:"h-20 bg-gray-200 rounded"})})]},d))}):r&&r.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(hi,{className:"mx-auto h-12 w-12 text-gray-400"}),h.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents"}),h.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by uploading a new document."}),h.jsx("div",{className:"mt-6",children:h.jsxs(ae,{onClick:()=>e(!0),className:"bg-primary hover:bg-blue-700",children:[h.jsx(dm,{className:"w-4 h-4 mr-2"}),"Upload Document"]})})]}):Array.isArray(r)&&r.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(u=>h.jsx(lt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:h.jsxs(ih,{href:`/document/${u.id}`,children:[h.jsxs(Jt,{children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx(un,{className:"text-lg font-semibold text-gray-900 truncate",children:u.name}),l(u.status)]}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(u.createdAt).toLocaleDateString()]})]}),h.jsx(ft,{children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(hi,{className:"w-4 h-4"}),h.jsxs("span",{children:[u.pages," page",u.pages!==1?"s":""]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(kD,{className:"w-4 h-4"}),h.jsx("span",{children:"View details"})]})]})})]})},u.id))}):h.jsxs("div",{className:"text-center py-12",children:[h.jsx(hi,{className:"mx-auto h-12 w-12 text-gray-400"}),h.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents"}),h.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by uploading a new document."}),h.jsx("div",{className:"mt-6",children:h.jsxs(ae,{onClick:()=>e(!0),className:"bg-primary hover:bg-blue-700",children:[h.jsx(dm,{className:"w-4 h-4 mr-2"}),"Upload Document"]})})]})]}),h.jsx(n3,{open:n,onOpenChange:e,onUploadComplete:()=>{e(!1),o()}})]})}var s3=w.createContext(void 0);function c1(n){const e=w.useContext(s3);return n||e||"ltr"}var My="rovingFocusGroup.onEntryFocus",r3={bubbles:!1,cancelable:!0},_v="RovingFocusGroup",[a0,sP,i3]=Hb(_v),[o3,rP]=ki(_v,[i3]),[a3,l3]=o3(_v),iP=w.forwardRef((n,e)=>h.jsx(a0.Provider,{scope:n.__scopeRovingFocusGroup,children:h.jsx(a0.Slot,{scope:n.__scopeRovingFocusGroup,children:h.jsx(c3,{...n,ref:e})})}));iP.displayName=_v;var c3=w.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=n,p=w.useRef(null),m=Oe(e,p),y=c1(i),[v=null,S]=td({prop:o,defaultProp:a,onChange:l}),[g,x]=w.useState(!1),b=Mn(u),C=sP(t),T=w.useRef(!1),[N,P]=w.useState(0);return w.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(My,b),()=>k.removeEventListener(My,b)},[b]),h.jsx(a3,{scope:t,orientation:s,dir:y,loop:r,currentTabStopId:v,onItemFocus:w.useCallback(k=>S(k),[S]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>P(k=>k+1),[]),onFocusableItemRemove:w.useCallback(()=>P(k=>k-1),[]),children:h.jsx(he.div,{tabIndex:g||N===0?-1:0,"data-orientation":s,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:ee(n.onMouseDown,()=>{T.current=!0}),onFocus:ee(n.onFocus,k=>{const M=!T.current;if(k.target===k.currentTarget&&M&&!g){const j=new CustomEvent(My,r3);if(k.currentTarget.dispatchEvent(j),!j.defaultPrevented){const D=C().filter(H=>H.focusable),R=D.find(H=>H.active),O=D.find(H=>H.id===v),B=[R,O,...D].filter(Boolean).map(H=>H.ref.current);lP(B,d)}}T.current=!1}),onBlur:ee(n.onBlur,()=>x(!1))})})}),oP="RovingFocusGroupItem",aP=w.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:i,...o}=n,a=pi(),l=i||a,u=l3(oP,t),d=u.currentTabStopId===l,f=sP(t),{onFocusableItemAdd:p,onFocusableItemRemove:m}=u;return w.useEffect(()=>{if(s)return p(),()=>m()},[s,p,m]),h.jsx(a0.ItemSlot,{scope:t,id:l,focusable:s,active:r,children:h.jsx(he.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ee(n.onMouseDown,y=>{s?u.onItemFocus(l):y.preventDefault()}),onFocus:ee(n.onFocus,()=>u.onItemFocus(l)),onKeyDown:ee(n.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=h3(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let g=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")g.reverse();else if(v==="prev"||v==="next"){v==="prev"&&g.reverse();const x=g.indexOf(y.currentTarget);g=u.loop?f3(g,x+1):g.slice(x+1)}setTimeout(()=>lP(g))}})})})});aP.displayName=oP;var u3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function d3(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function h3(n,e,t){const s=d3(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return u3[s]}function lP(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function f3(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var p3=iP,m3=aP,u1="Tabs",[g3,m5]=ki(u1,[rP]),cP=rP(),[v3,d1]=g3(u1),uP=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=n,d=c1(a),[f,p]=td({prop:s,onChange:r,defaultProp:i});return h.jsx(v3,{scope:t,baseId:pi(),value:f,onValueChange:p,orientation:o,dir:d,activationMode:l,children:h.jsx(he.div,{dir:d,"data-orientation":o,...u,ref:e})})});uP.displayName=u1;var dP="TabsList",hP=w.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=n,i=d1(dP,t),o=cP(t);return h.jsx(p3,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:h.jsx(he.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});hP.displayName=dP;var fP="TabsTrigger",pP=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...i}=n,o=d1(fP,t),a=cP(t),l=vP(o.baseId,s),u=yP(o.baseId,s),d=s===o.value;return h.jsx(m3,{asChild:!0,...a,focusable:!r,active:d,children:h.jsx(he.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:e,onMouseDown:ee(n.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:ee(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:ee(n.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!r&&f&&o.onValueChange(s)})})})});pP.displayName=fP;var mP="TabsContent",gP=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:i,...o}=n,a=d1(mP,t),l=vP(a.baseId,s),u=yP(a.baseId,s),d=s===a.value,f=w.useRef(d);return w.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),h.jsx($l,{present:r||d,children:({present:p})=>h.jsx(he.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});gP.displayName=mP;function vP(n,e){return`${n}-trigger-${e}`}function yP(n,e){return`${n}-content-${e}`}var y3=uP,xP=hP,wP=pP,bP=gP;const h1=y3,Tv=w.forwardRef(({className:n,...e},t)=>h.jsx(xP,{ref:t,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Tv.displayName=xP.displayName;const mi=w.forwardRef(({className:n,...e},t)=>h.jsx(wP,{ref:t,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));mi.displayName=wP.displayName;const gi=w.forwardRef(({className:n,...e},t)=>h.jsx(bP,{ref:t,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));gi.displayName=bP.displayName;const SP=w.forwardRef(({width:n,height:e,className:t},s)=>{const r=w.useRef(null),i=w.useRef(!1),o=w.useRef(!1);return w.useImperativeHandle(s,()=>({clear:()=>{const a=r.current;if(a){const l=a.getContext("2d");l&&(l.clearRect(0,0,a.width,a.height),o.current=!1)}},getSignatureData:()=>{const a=r.current;return a&&o.current?a.toDataURL():null}})),w.useEffect(()=>{const a=r.current;if(!a)return;const l=a.getContext("2d");if(!l)return;l.lineCap="round",l.lineJoin="round",l.strokeStyle="#000000",l.lineWidth=2;const u=m=>{const y=a.getBoundingClientRect(),v=a.width/y.width,S=a.height/y.height;if(m instanceof MouseEvent)return{x:(m.clientX-y.left)*v,y:(m.clientY-y.top)*S};{const g=m.touches[0];return{x:(g.clientX-y.left)*v,y:(g.clientY-y.top)*S}}},d=m=>{m.preventDefault(),i.current=!0;const{x:y,y:v}=u(m);l.beginPath(),l.moveTo(y,v)},f=m=>{if(!i.current)return;m.preventDefault();const{x:y,y:v}=u(m);l.lineTo(y,v),l.stroke(),o.current=!0},p=()=>{i.current&&(i.current=!1,l.closePath())};return a.addEventListener("mousedown",d),a.addEventListener("mousemove",f),a.addEventListener("mouseup",p),a.addEventListener("mouseout",p),a.addEventListener("touchstart",d),a.addEventListener("touchmove",f),a.addEventListener("touchend",p),()=>{a.removeEventListener("mousedown",d),a.removeEventListener("mousemove",f),a.removeEventListener("mouseup",p),a.removeEventListener("mouseout",p),a.removeEventListener("touchstart",d),a.removeEventListener("touchmove",f),a.removeEventListener("touchend",p)}},[]),h.jsx("canvas",{ref:r,width:n,height:e,className:`border-0 cursor-crosshair ${t||""}`,style:{touchAction:"none"}})});SP.displayName="SignatureCanvas";function x3({open:n,onOpenChange:e,onSignatureComplete:t,field:s}){const[r,i]=w.useState("draw"),[o,a]=w.useState(""),[l,u]=w.useState("elegant"),[d,f]=w.useState(null),p=w.useRef(null),m=w.useRef(null);w.useEffect(()=>{n||(a(""),f(null),p.current&&p.current.clear())},[n]);const y=()=>{if(p.current){const b=p.current.getSignatureData();b&&t(b,"drawn")}},v=()=>{if(o.trim()){const b=document.createElement("canvas");b.width=400,b.height=100;const C=b.getContext("2d");if(C){C.fillStyle="white",C.fillRect(0,0,b.width,b.height),C.fillStyle="black";const T=l==="elegant"?"32px":l==="professional"?"28px":"30px",N=l==="elegant"?"serif":l==="professional"?"sans-serif":"cursive",P=l==="elegant"||l==="modern"?"italic":"normal",k=l==="professional"||l==="elegant"?"bold":"normal";C.font=`${P} ${k} ${T} ${N}`,C.textAlign="center",C.textBaseline="middle",C.fillText(o,b.width/2,b.height/2);const M=b.toDataURL();t(M,"typed")}}},S=()=>{d&&t(d,"uploaded")},g=b=>{var T;const C=(T=b.target.files)==null?void 0:T[0];if(C){const N=new FileReader;N.onload=P=>{var k;f((k=P.target)==null?void 0:k.result)},N.readAsDataURL(C)}},x=[{id:"elegant",name:"Elegant Script",style:"font-bold italic text-2xl font-serif"},{id:"professional",name:"Professional",style:"font-semibold text-2xl font-sans"},{id:"modern",name:"Modern Italic",style:"font-light italic text-2xl font-sans"}];return h.jsx(l1,{open:n,onOpenChange:e,children:h.jsxs(Av,{className:"max-w-2xl max-h-[90vh] overflow-hidden",children:[h.jsx(Ev,{children:h.jsxs(Cv,{className:"flex items-center space-x-2",children:[h.jsx(yc,{className:"w-5 h-5"}),h.jsx("span",{children:"Create Your Signature"})]})}),h.jsxs(h1,{value:r,onValueChange:i,className:"w-full",children:[h.jsxs(Tv,{className:"grid w-full grid-cols-3",children:[h.jsxs(mi,{value:"draw",className:"flex items-center space-x-2",children:[h.jsx(yc,{className:"w-4 h-4"}),h.jsx("span",{children:"Draw"})]}),h.jsxs(mi,{value:"type",className:"flex items-center space-x-2",children:[h.jsx(ED,{className:"w-4 h-4"}),h.jsx("span",{children:"Type"})]}),h.jsxs(mi,{value:"upload",className:"flex items-center space-x-2",children:[h.jsx(ah,{className:"w-4 h-4"}),h.jsx("span",{children:"Upload"})]})]}),h.jsxs(gi,{value:"draw",className:"space-y-4",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Draw your signature in the box below using your mouse or finger on touch devices."}),h.jsx("div",{className:"border-2 border-gray-300 rounded-lg bg-white",children:h.jsx(SP,{ref:p,width:600,height:200})}),h.jsxs("div",{className:"flex justify-between",children:[h.jsxs(ae,{variant:"outline",onClick:()=>{var b;return(b=p.current)==null?void 0:b.clear()},children:[h.jsx(bD,{className:"w-4 h-4 mr-2"}),"Clear"]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(ae,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),h.jsxs(ae,{onClick:y,className:"bg-primary hover:bg-blue-700",children:[h.jsx(um,{className:"w-4 h-4 mr-2"}),"Apply Signature"]})]})]})]}),h.jsxs(gi,{value:"type",className:"space-y-4",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Type your name to create a signature."}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(dn,{value:o,onChange:b=>a(b.target.value),placeholder:"Enter your full name",className:"text-lg"}),h.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.map(b=>h.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer text-center transition-colors ${l===b.id?"border-primary bg-blue-50":"border-gray-300 hover:border-primary hover:bg-blue-50"}`,onClick:()=>u(b.id),children:[h.jsx("p",{className:`${b.style} text-gray-800`,children:o||"Your Name Here"}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b.name})]},b.id))})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("div",{}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(ae,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),h.jsxs(ae,{onClick:v,disabled:!o.trim(),className:"bg-primary hover:bg-blue-700",children:[h.jsx(um,{className:"w-4 h-4 mr-2"}),"Apply Signature"]})]})]})]}),h.jsxs(gi,{value:"upload",className:"space-y-4",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image of your signature (PNG, JPG, or GIF format)."}),d?h.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4 text-center",children:[h.jsx("img",{src:d,alt:"Uploaded signature",className:"max-h-32 mx-auto"}),h.jsxs(ae,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{f(null),m.current&&(m.current.value="")},children:[h.jsx(op,{className:"w-4 h-4 mr-2"}),"Remove"]})]}):h.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>{var b;return(b=m.current)==null?void 0:b.click()},children:[h.jsx(ah,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),h.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),h.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 2MB"}),h.jsx("input",{ref:m,type:"file",className:"hidden",accept:"image/*",onChange:g})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("div",{}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(ae,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),h.jsxs(ae,{onClick:S,disabled:!d,className:"bg-primary hover:bg-blue-700",children:[h.jsx(um,{className:"w-4 h-4 mr-2"}),"Apply Signature"]})]})]})]})]})]})})}function w3({open:n,onOpenChange:e,documentId:t,onInviteComplete:s}){const[r,i]=w.useState([{name:"",email:"",order:1}]),{toast:o}=zl(),a=xl({mutationFn:async y=>{const v=y.map(S=>wl("POST",`/api/documents/${t}/signers`,S));await Promise.all(v)},onSuccess:()=>{o({title:"Signers invited successfully",description:"All signers have been added to the document."}),s(),l()},onError:y=>{o({title:"Failed to invite signers",description:y.message,variant:"destructive"})}}),l=()=>{i([{name:"",email:"",order:1}])},u=()=>{i([...r,{name:"",email:"",order:r.length+1}])},d=y=>{if(r.length>1){const S=r.filter((g,x)=>x!==y).map((g,x)=>({...g,order:x+1}));i(S)}},f=(y,v,S)=>{const g=[...r];g[y]={...g[y],[v]:S},i(g)},p=()=>{const y=r.filter(v=>v.name.trim()&&v.email.trim());if(y.length===0){o({title:"No valid signers",description:"Please add at least one signer with name and email.",variant:"destructive"});return}a.mutate(y)},m=()=>{a.isPending||(e(!1),l())};return h.jsx(l1,{open:n,onOpenChange:m,children:h.jsxs(Av,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsx(Ev,{children:h.jsxs(Cv,{className:"flex items-center space-x-2",children:[h.jsx(PD,{className:"w-5 h-5"}),h.jsx("span",{children:"Invite Signers"})]})}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Add people who need to sign this document. They will sign in the order you specify."}),h.jsx("div",{className:"space-y-4",children:r.map((y,v)=>h.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h4",{className:"font-medium text-gray-900",children:["Signer ",v+1]}),r.length>1&&h.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>d(v),children:h.jsx(op,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:`name-${v}`,children:"Full Name"}),h.jsx(dn,{id:`name-${v}`,value:y.name,onChange:S=>f(v,"name",S.target.value),placeholder:"Enter full name"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:`email-${v}`,children:"Email Address"}),h.jsx(dn,{id:`email-${v}`,type:"email",value:y.email,onChange:S=>f(v,"email",S.target.value),placeholder:"Enter email address"})]})]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Signing order: ",y.order]})]},v))}),h.jsxs(ae,{variant:"outline",onClick:u,className:"w-full border-dashed",children:[h.jsx(dm,{className:"w-4 h-4 mr-2"}),"Add Another Signer"]}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[h.jsx(ae,{variant:"outline",onClick:m,disabled:a.isPending,children:"Cancel"}),h.jsx(ae,{onClick:p,disabled:a.isPending,className:"bg-primary hover:bg-blue-700",children:a.isPending?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Inviting..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Vb,{className:"w-4 h-4 mr-2"}),"Invite Signers"]})})]})]})]})})}var b3=zw[" useInsertionEffect ".trim().toString()]||gt;function S3({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,o]=A3({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r;{const d=w.useRef(n!==void 0);w.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=w.useCallback(d=>{var f;if(a){const p=E3(d)?d(n):d;p!==n&&((f=o.current)==null||f.call(o,p))}else i(d)},[a,n,i,o]);return[l,u]}function A3({defaultProp:n,onChange:e}){const[t,s]=w.useState(n),r=w.useRef(t),i=w.useRef(e);return b3(()=>{i.current=e},[e]),w.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,s,i]}function E3(n){return typeof n=="function"}function C3(n){const e=_3(n),t=w.forwardRef((s,r)=>{const{children:i,...o}=s,a=w.Children.toArray(i),l=a.find(N3);if(l){const u=l.props.children,d=a.map(f=>f===l?w.Children.count(u)>1?w.Children.only(null):w.isValidElement(u)?u.props.children:null:f);return h.jsx(e,{...o,ref:r,children:w.isValidElement(u)?w.cloneElement(u,void 0,d):null})}return h.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}function _3(n){const e=w.forwardRef((t,s)=>{const{children:r,...i}=t;if(w.isValidElement(r)){const o=k3(r),a=P3(i,r.props);return r.type!==w.Fragment&&(a.ref=s?Fb(s,o):o),w.cloneElement(r,a)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var T3=Symbol("radix.slottable");function N3(n){return w.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===T3}function P3(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function k3(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var R3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],f1=R3.reduce((n,e)=>{const t=C3(`Primitive.${e}`),s=w.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function L3(n,e){return w.useReducer((t,s)=>e[t][s]??t,n)}var AP=n=>{const{present:e,children:t}=n,s=M3(e),r=typeof t=="function"?t({present:s.isPresent}):w.Children.only(t),i=Oe(s.ref,j3(r));return typeof t=="function"||s.isPresent?w.cloneElement(r,{ref:i}):null};AP.displayName="Presence";function M3(n){const[e,t]=w.useState(),s=w.useRef(null),r=w.useRef(n),i=w.useRef("none"),o=n?"mounted":"unmounted",[a,l]=L3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const u=Bp(s.current);i.current=a==="mounted"?u:"none"},[a]),gt(()=>{const u=s.current,d=r.current;if(d!==n){const p=i.current,m=Bp(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),gt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const v=Bp(s.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=m=>{m.target===e&&(i.current=Bp(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(u=>{s.current=u?getComputedStyle(u):null,t(u)},[])}}function Bp(n){return(n==null?void 0:n.animationName)||"none"}function j3(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Nv="Collapsible",[I3,g5]=ki(Nv),[D3,p1]=I3(Nv),EP=w.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...a}=n,[l,u]=S3({prop:s,defaultProp:r??!1,onChange:o,caller:Nv});return h.jsx(D3,{scope:t,disabled:i,contentId:pi(),open:l,onOpenToggle:w.useCallback(()=>u(d=>!d),[u]),children:h.jsx(f1.div,{"data-state":g1(l),"data-disabled":i?"":void 0,...a,ref:e})})});EP.displayName=Nv;var CP="CollapsibleTrigger",_P=w.forwardRef((n,e)=>{const{__scopeCollapsible:t,...s}=n,r=p1(CP,t);return h.jsx(f1.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":g1(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:ee(n.onClick,r.onOpenToggle)})});_P.displayName=CP;var m1="CollapsibleContent",TP=w.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=p1(m1,n.__scopeCollapsible);return h.jsx(AP,{present:t||r.open,children:({present:i})=>h.jsx(O3,{...s,ref:e,present:i})})});TP.displayName=m1;var O3=w.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:s,children:r,...i}=n,o=p1(m1,t),[a,l]=w.useState(s),u=w.useRef(null),d=Oe(e,u),f=w.useRef(0),p=f.current,m=w.useRef(0),y=m.current,v=o.open||a,S=w.useRef(v),g=w.useRef(void 0);return w.useEffect(()=>{const x=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(x)},[]),gt(()=>{const x=u.current;if(x){g.current=g.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();f.current=b.height,m.current=b.width,S.current||(x.style.transitionDuration=g.current.transitionDuration,x.style.animationName=g.current.animationName),l(s)}},[o.open,s]),h.jsx(f1.div,{"data-state":g1(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:v&&r})});function g1(n){return n?"open":"closed"}var F3=EP;const H3=F3,z3=_P,$3=TP;function B3({documentId:n}){const[e,t]=w.useState(!1),{data:s,isLoading:r,refetch:i}=Ho({queryKey:[`/api/documents/${n}/integrity`],refetchInterval:3e4}),{data:o=[],isLoading:a}=Ho({queryKey:[`/api/documents/${n}/audit`],enabled:e}),l=()=>{i()},u=f=>{switch(f){case"created":return h.jsx(hi,{className:"w-4 h-4 text-blue-600"});case"signed":return h.jsx(yg,{className:"w-4 h-4 text-green-600"});case"completed":return h.jsx(fA,{className:"w-4 h-4 text-purple-600"});case"hash_verified":return h.jsx(AD,{className:"w-4 h-4 text-gray-600"});default:return h.jsx(zo,{className:"w-4 h-4 text-gray-400"})}},d=f=>{switch(f){case"created":return"Document Created";case"signed":return"Document Signed";case"completed":return"Document Completed";case"hash_verified":return"Integrity Verified";default:return f.charAt(0).toUpperCase()+f.slice(1)}};return r?h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs(un,{className:"flex items-center space-x-2",children:[h.jsx(Tc,{className:"w-5 h-5"}),h.jsx("span",{children:"Document Integrity"})]})}),h.jsx(ft,{children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Verifying integrity..."})]})})]}):h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs(un,{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Tc,{className:"w-5 h-5"}),h.jsx("span",{children:"Document Integrity"})]}),h.jsx(ae,{variant:"outline",size:"sm",onClick:l,children:"Verify Now"})]})}),h.jsxs(ft,{className:"space-y-4",children:[h.jsx("div",{className:"flex items-center space-x-3",children:s!=null&&s.isValid?h.jsxs(h.Fragment,{children:[h.jsx(fA,{className:"w-6 h-6 text-green-600"}),h.jsxs("div",{children:[h.jsx(bt,{className:"bg-green-100 text-green-800",children:"Verified"}),h.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Document integrity verified. No tampering detected."})]})]}):h.jsxs(h.Fragment,{children:[h.jsx(TD,{className:"w-6 h-6 text-red-600"}),h.jsxs("div",{children:[h.jsx(bt,{variant:"destructive",children:"Integrity Issues"}),h.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(s==null?void 0:s.errors.length)||0," integrity issue(s) detected."]})]})]})}),s&&!s.isValid&&h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[h.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Integrity Issues:"}),h.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:s.errors.map((f,p)=>h.jsxs("li",{className:"flex items-start space-x-2",children:[h.jsx("span",{className:"text-red-400",children:"•"}),h.jsx("span",{children:f})]},p))})]}),h.jsxs(H3,{open:e,onOpenChange:t,children:[h.jsx(z3,{asChild:!0,children:h.jsxs(ae,{variant:"outline",className:"w-full justify-between",children:[h.jsxs("span",{className:"flex items-center space-x-2",children:[h.jsx(IT,{className:"w-4 h-4"}),h.jsx("span",{children:"View Audit Trail"})]}),h.jsx(Ub,{className:`w-4 h-4 transition-transform ${e?"rotate-180":""}`})]})}),h.jsx($3,{className:"space-y-2 mt-3",children:a?h.jsxs("div",{className:"flex items-center space-x-2 p-3",children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),h.jsx("span",{className:"text-sm text-gray-600",children:"Loading audit trail..."})]}):o.length===0?h.jsx("p",{className:"text-sm text-gray-500 p-3",children:"No audit entries found."}):h.jsx("div",{className:"space-y-2",children:o.map(f=>h.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[u(f.action),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:d(f.action)}),h.jsx("p",{className:"text-xs text-gray-500",children:new Date(f.timestamp).toLocaleString()})]})]}),h.jsx("div",{className:"text-right",children:f.ipAddress&&h.jsxs("p",{className:"text-xs text-gray-500",children:["IP: ",f.ipAddress]})})]}),f.details&&h.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[h.jsxs("p",{className:"text-xs text-gray-600",children:["Hash: ",h.jsxs("code",{className:"bg-gray-200 px-1 rounded text-xs",children:[f.documentHash.substring(0,16),"..."]})]}),f.details.fileName&&h.jsxs("p",{className:"text-xs text-gray-600",children:["File: ",f.details.fileName]}),f.details.signatureType&&h.jsxs("p",{className:"text-xs text-gray-600",children:["Signature: ",f.details.signatureType]})]})]},f.id))})})]}),h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:h.jsxs("div",{className:"flex items-start space-x-2",children:[h.jsx(Tc,{className:"w-4 h-4 text-blue-600 mt-0.5"}),h.jsxs("div",{className:"text-sm text-blue-800",children:[h.jsx("p",{className:"font-medium",children:"Cryptographic Protection"}),h.jsx("p",{className:"text-blue-700 mt-1",children:"This document is protected with SHA-256 hashing and maintains a complete audit trail of all changes and signatures."})]})]})})]})]})}const U3="modulepreload",V3=function(n){return"/"+n},DA={},Up=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=V3(l),l in DA)return;DA[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":U3,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var lh={};lh.d=(n,e)=>{for(var t in e)lh.o(e,t)&&!lh.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};lh.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var se=globalThis.pdfjsLib={};lh.d(se,{AbortException:()=>Ul,AnnotationEditorLayer:()=>xw,AnnotationEditorParamsType:()=>ne,AnnotationEditorType:()=>le,AnnotationEditorUIManager:()=>Rl,AnnotationLayer:()=>Bz,AnnotationMode:()=>Ui,ColorPicker:()=>Tg,DOMSVGFactory:()=>N1,DrawLayer:()=>Aw,FeatureTest:()=>pn,GlobalWorkerOptions:()=>ci,ImageKind:()=>mm,InvalidPDFException:()=>PP,MissingPDFException:()=>Bl,OPS:()=>Cs,OutputScale:()=>h0,PDFDataRangeTransport:()=>Ck,PDFDateString:()=>b1,PDFWorker:()=>Lc,PasswordResponses:()=>K3,PermissionFlag:()=>q3,PixelsPerInch:()=>Vo,RenderingCancelledException:()=>x1,TextLayer:()=>z0,UnexpectedResponseException:()=>Lv,Util:()=>Y,VerbosityLevel:()=>Pv,XfaLayer:()=>Tk,build:()=>Sz,createValidAbsoluteUrl:()=>Z3,fetchData:()=>jv,getDocument:()=>fz,getFilenameFromUrl:()=>aH,getPdfFilenameFromUrl:()=>lH,getXfaPageViewport:()=>cH,isDataScheme:()=>Iv,isPdfFile:()=>w1,noContextMenu:()=>ws,normalizeUnicode:()=>rH,setLayerDimensions:()=>kl,shadow:()=>we,version:()=>bz});const nn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),NP=[1,0,0,1,0,0],l0=[.001,0,0,.001,0,0],W3=1e7,jy=1.35,Vn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ui={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},G3="pdfjs_internal_editor_",le={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ne={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},q3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},mm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Cd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Pv={ERRORS:0,WARNINGS:1,INFOS:5},Cs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},K3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let kv=Pv.WARNINGS;function X3(n){Number.isInteger(n)&&(kv=n)}function Y3(){return kv}function Rv(n){kv>=Pv.INFOS&&console.log(`Info: ${n}`)}function de(n){kv>=Pv.WARNINGS&&console.log(`Warning: ${n}`)}function Ue(n){throw new Error(n)}function Et(n,e){n||Ue(e)}function Q3(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Z3(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=sH(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(Q3(s))return s}catch{}return null}function we(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Qo=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class c0 extends Qo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class u0 extends Qo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class PP extends Qo{constructor(e){super(e,"InvalidPDFException")}}class Bl extends Qo{constructor(e){super(e,"MissingPDFException")}}class Lv extends Qo{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class J3 extends Qo{constructor(e){super(e,"FormatError")}}class Ul extends Qo{constructor(e){super(e,"AbortException")}}function kP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ue("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Mv(n){typeof n!="string"&&Ue("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function eH(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function v1(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function tH(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function nH(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return we(this,"isLittleEndian",tH())}static get isEvalSupported(){return we(this,"isEvalSupported",nH())}static get isOffscreenCanvasSupported(){return we(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?we(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):we(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return we(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Iy=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var xi,gm,d0;class Y{static makeHexColor(e,t,s){return`#${Iy[e]}${Iy[t]}${Iy[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[s,r]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[r,i]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],r[0],i[0],o[0]),Math.min(s[1],r[1],i[1],o[1]),Math.max(s[0],r[0],i[0],o[0]),Math.max(s[1],r[1],i[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(s+o)/2,l=Math.sqrt((s+o)**2-4*(s*o-i*r))/2,u=a+l||1,d=a-l||1;return[Math.sqrt(u),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static bezierBoundingBox(e,t,s,r,i,o,a,l,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],E(this,xi,d0).call(this,e,s,i,a,t,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),u),E(this,xi,d0).call(this,e,s,i,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),u),u}}xi=new WeakSet,gm=function(e,t,s,r,i,o,a,l,u,d){if(u<=0||u>=1)return;const f=1-u,p=u*u,m=p*u,y=f*(f*(f*e+3*u*t)+3*p*s)+m*r,v=f*(f*(f*i+3*u*o)+3*p*a)+m*l;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],v),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],v)},d0=function(e,t,s,r,i,o,a,l,u,d,f,p){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&E(this,xi,gm).call(this,e,t,s,r,i,o,a,l,-f/d,p);return}const m=d**2-4*f*u;if(m<0)return;const y=Math.sqrt(m),v=2*u;E(this,xi,gm).call(this,e,t,s,r,i,o,a,l,(-d+y)/v,p),E(this,xi,gm).call(this,e,t,s,r,i,o,a,l,(-d-y)/v,p)},_(Y,xi);function sH(n){return decodeURIComponent(escape(n))}let Dy=null,OA=null;function rH(n){return Dy||(Dy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,OA=new Map([["ﬅ","ſt"]])),n.replaceAll(Dy,(e,t,s)=>t?t.normalize("NFKC"):OA.get(s))}function iH(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return kP(n)}const y1="pdfjs_internal_id_",kr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function oH(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(kP(n))}const Mr="http://www.w3.org/2000/svg",ca=class ca{};te(ca,"CSS",96),te(ca,"PDF",72),te(ca,"PDF_TO_CSS_UNITS",ca.CSS/ca.PDF);let Vo=ca;async function jv(n,e="text"){if(Md(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class cp{constructor({viewBox:e,scale:t,rotation:s,offsetX:r=0,offsetY:i=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=r,this.offsetY=i;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let u,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,d=0,f=0,p=1;break;case 90:u=0,d=1,f=1,p=0;break;case 270:u=0,d=-1,f=-1,p=0;break;case 0:u=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let m,y,v,S;u===0?(m=Math.abs(l-e[1])*t+r,y=Math.abs(a-e[0])*t+i,v=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(m=Math.abs(a-e[0])*t+r,y=Math.abs(l-e[1])*t+i,v=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[u*t,d*t,f*t,p*t,m-u*t*a-f*t*l,y-d*t*a-p*t*l],this.width=v,this.height=S}get rawDims(){const{viewBox:e}=this;return we(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new cp({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return Y.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Y.applyTransform([e[0],e[1]],this.transform),s=Y.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return Y.applyInverseTransform([e,t],this.transform)}}class x1 extends Qo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Iv(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function w1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function aH(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function lH(n,e="document.pdf"){if(typeof n!="string")return e;if(Iv(n))return de('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let i=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(i&&(i=i[0],i.includes("%")))try{i=s.exec(decodeURIComponent(i))[0]}catch{}return i||e}class FA{constructor(){te(this,"started",Object.create(null));te(this,"times",[])}time(e){e in this.started&&de(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||de(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Md(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ws(n){n.preventDefault()}function HA(n){console.log("Deprecated API usage: "+n)}var Dh;class b1{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,Dh)||A(this,Dh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Dh).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(o+=d,a+=f):u==="+"&&(o-=d,a-=f),new Date(Date.UTC(s,r,i,o,a,l))}}Dh=new WeakMap,_(b1,Dh);function cH(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new cp({viewBox:i,scale:e,rotation:t})}function S1(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(de(`Not a valid color format: "${n}"`),[0,0,0])}function uH(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,S1(s))}e.remove()}function Qe(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function Rr(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function kl(n,e,t=!1,s=!0){if(e instanceof cp){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=pn.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${i}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,f=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=f):(o.width=f,o.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class h0{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ji,ba,Ts,Sa,Oh,Fh,Lg,RP,mn,LP,MP,vm,jP,p0;const Ir=class Ir{constructor(e){_(this,mn);_(this,Ji,null);_(this,ba,null);_(this,Ts);_(this,Sa,null);_(this,Oh,null);A(this,Ts,e),c(Ir,Fh)||A(Ir,Fh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=A(this,Ji,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Ts)._uiManager._signal;e.addEventListener("contextmenu",ws,{signal:t}),e.addEventListener("pointerdown",E(Ir,Lg,RP),{signal:t});const s=A(this,Sa,document.createElement("div"));s.className="buttons",e.append(s);const r=c(this,Ts).toolbarPosition;if(r){const{style:i}=e,o=c(this,Ts)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,mn,jP).call(this),e}get div(){return c(this,Ji)}hide(){var e;c(this,Ji).classList.add("hidden"),(e=c(this,ba))==null||e.hideDropdown()}show(){var e;c(this,Ji).classList.remove("hidden"),(e=c(this,Oh))==null||e.shown()}async addAltText(e){const t=await e.render();E(this,mn,vm).call(this,t),c(this,Sa).prepend(t,c(this,mn,p0)),A(this,Oh,e)}addColorPicker(e){A(this,ba,e);const t=e.renderButton();E(this,mn,vm).call(this,t),c(this,Sa).prepend(t,c(this,mn,p0))}remove(){var e;c(this,Ji).remove(),(e=c(this,ba))==null||e.destroy(),A(this,ba,null)}};Ji=new WeakMap,ba=new WeakMap,Ts=new WeakMap,Sa=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,Lg=new WeakSet,RP=function(e){e.stopPropagation()},mn=new WeakSet,LP=function(e){c(this,Ts)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},MP=function(e){c(this,Ts)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},vm=function(e){const t=c(this,Ts)._uiManager._signal;e.addEventListener("focusin",E(this,mn,LP).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,mn,MP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ws,{signal:t})},jP=function(){const{editorType:e,_uiManager:t}=c(this,Ts),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Ir,Fh)[e]),E(this,mn,vm).call(this,s),s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,Sa).append(s)},p0=function(){const e=document.createElement("div");return e.className="divider",e},_(Ir,Lg),_(Ir,Fh,null);let f0=Ir;var Hh,Aa,Ea,Go,IP,DP,OP;class dH{constructor(e){_(this,Go);_(this,Hh,null);_(this,Aa,null);_(this,Ea);A(this,Ea,e)}show(e,t,s){const[r,i]=E(this,Go,DP).call(this,t,s),{style:o}=c(this,Aa)||A(this,Aa,E(this,Go,IP).call(this));e.append(c(this,Aa)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Aa).remove()}}Hh=new WeakMap,Aa=new WeakMap,Ea=new WeakMap,Go=new WeakSet,IP=function(){const e=A(this,Aa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ws,{signal:c(this,Ea)._signal});const t=A(this,Hh,document.createElement("div"));return t.className="buttons",e.append(t),E(this,Go,OP).call(this),e},DP=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},OP=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,Ea)._signal;e.addEventListener("contextmenu",ws,{signal:s}),e.addEventListener("click",()=>{c(this,Ea).highlightSelection("floating_button")},{signal:s}),c(this,Hh).append(e)};function Eg(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}function hH(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Mg;class fH{constructor(){_(this,Mg,0)}get id(){return`${G3}${Tt(this,Mg)._++}`}}Mg=new WeakMap;var Kc,zh,Xt,Xc,ym;const L1=class L1{constructor(){_(this,Xc);_(this,Kc,iH());_(this,zh,0);_(this,Xt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return we(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return E(this,Xc,ym).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return E(this,Xc,ym).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,Xc,ym).call(this,e,s)}async getFromId(e){c(this,Xt)||A(this,Xt,new Map);const t=c(this,Xt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,Xt)||A(this,Xt,new Map);let s=c(this,Xt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Kc)}_${Tt(this,zh)._++}`,refCounter:1,isSvg:!1},c(this,Xt).set(e,s),c(this,Xt).set(s.id,s),s}getSvgUrl(e){const t=c(this,Xt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,Xt)||A(this,Xt,new Map);const t=c(this,Xt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Kc)}_`)}};Kc=new WeakMap,zh=new WeakMap,Xt=new WeakMap,Xc=new WeakSet,ym=async function(e,t){c(this,Xt)||A(this,Xt,new Map);let s=c(this,Xt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Kc)}_${Tt(this,zh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await jv(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=L1._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=d});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){console.error(r),s=null}return c(this,Xt).set(e,s),s&&c(this,Xt).set(s.id,s),s};let m0=L1;var Pt,eo,$h,kt;class pH{constructor(e=128){_(this,Pt,[]);_(this,eo,!1);_(this,$h);_(this,kt,-1);A(this,$h,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),c(this,eo))return;const l={cmd:e,undo:t,post:s,type:i};if(c(this,kt)===-1){c(this,Pt).length>0&&(c(this,Pt).length=0),A(this,kt,0),c(this,Pt).push(l);return}if(o&&c(this,Pt)[c(this,kt)].type===i){a&&(l.undo=c(this,Pt)[c(this,kt)].undo),c(this,Pt)[c(this,kt)]=l;return}const u=c(this,kt)+1;u===c(this,$h)?c(this,Pt).splice(0,1):(A(this,kt,u),u<c(this,Pt).length&&c(this,Pt).splice(u)),c(this,Pt).push(l)}undo(){if(c(this,kt)===-1)return;A(this,eo,!0);const{undo:e,post:t}=c(this,Pt)[c(this,kt)];e(),t==null||t(),A(this,eo,!1),A(this,kt,c(this,kt)-1)}redo(){if(c(this,kt)<c(this,Pt).length-1){A(this,kt,c(this,kt)+1),A(this,eo,!0);const{cmd:e,post:t}=c(this,Pt)[c(this,kt)];e(),t==null||t(),A(this,eo,!1)}}hasSomethingToUndo(){return c(this,kt)!==-1}hasSomethingToRedo(){return c(this,kt)<c(this,Pt).length-1}destroy(){A(this,Pt,null)}}Pt=new WeakMap,eo=new WeakMap,$h=new WeakMap,kt=new WeakMap;var jg,FP;class up{constructor(e){_(this,jg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,jg,FP).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||(t.stopPropagation(),t.preventDefault()))}}jg=new WeakSet,FP=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ig=class Ig{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return uH(e),we(this,"_colors",e)}convert(e){const t=S1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return Ig._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Y.makeHexColor(...t):e}};te(Ig,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let g0=Ig;var Yc,Dn,yt,Ot,Qc,Hr,Zc,Ns,to,Jc,Ca,rr,Ps,_a,Bh,Uh,eu,Vh,ir,no,tu,so,or,Dg,ro,Wh,io,Ta,Gh,qh,Rt,ke,zr,Na,Kh,Xh,oo,ar,$r,Yh,is,W,xm,v0,HP,zP,wm,$P,BP,UP,y0,VP,x0,w0,WP,rn,Oi,GP,qP,b0,KP,jd,S0;const xc=class xc{constructor(e,t,s,r,i,o,a,l,u,d,f){_(this,W);_(this,Yc,new AbortController);_(this,Dn,null);_(this,yt,new Map);_(this,Ot,new Map);_(this,Qc,null);_(this,Hr,null);_(this,Zc,null);_(this,Ns,new pH);_(this,to,null);_(this,Jc,0);_(this,Ca,new Set);_(this,rr,null);_(this,Ps,null);_(this,_a,new Set);_(this,Bh,!1);_(this,Uh,!1);_(this,eu,!1);_(this,Vh,null);_(this,ir,null);_(this,no,null);_(this,tu,null);_(this,so,!1);_(this,or,null);_(this,Dg,new fH);_(this,ro,!1);_(this,Wh,!1);_(this,io,null);_(this,Ta,null);_(this,Gh,null);_(this,qh,null);_(this,Rt,le.NONE);_(this,ke,new Set);_(this,zr,null);_(this,Na,null);_(this,Kh,null);_(this,Xh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,oo,[0,0]);_(this,ar,null);_(this,$r,null);_(this,Yh,null);_(this,is,null);const p=this._signal=c(this,Yc).signal;A(this,$r,e),A(this,Yh,t),A(this,Qc,s),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:p}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),r._on("setpreference",this.onSetPreference.bind(this),{signal:p}),r._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:p}),E(this,W,$P).call(this),E(this,W,WP).call(this),E(this,W,y0).call(this),A(this,Hr,i.annotationStorage),A(this,Vh,i.filterFactory),A(this,Na,o),A(this,tu,a||null),A(this,Bh,l),A(this,Uh,u),A(this,eu,d),A(this,qh,f||null),this.viewParameters={realScale:Vo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=xc.prototype,t=o=>c(o,$r).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return we(this,"_keyboardManager",new up([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,$r).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,$r).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r;(e=c(this,is))==null||e.resolve(),A(this,is,null),(t=c(this,Yc))==null||t.abort(),A(this,Yc,null),this._signal=null;for(const i of c(this,Ot).values())i.destroy();c(this,Ot).clear(),c(this,yt).clear(),c(this,_a).clear(),A(this,Dn,null),c(this,ke).clear(),c(this,Ns).destroy(),(s=c(this,Qc))==null||s.destroy(),(r=c(this,or))==null||r.hide(),A(this,or,null),c(this,ir)&&(clearTimeout(c(this,ir)),A(this,ir,null)),c(this,ar)&&(clearTimeout(c(this,ar)),A(this,ar,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,qh)}get useNewAltTextFlow(){return c(this,Uh)}get useNewAltTextWhenAddingImage(){return c(this,eu)}get hcmFilter(){return we(this,"hcmFilter",c(this,Na)?c(this,Vh).addHCMFilter(c(this,Na).foreground,c(this,Na).background):"none")}get direction(){return we(this,"direction",getComputedStyle(c(this,$r)).direction)}get highlightColors(){return we(this,"highlightColors",c(this,tu)?new Map(c(this,tu).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return we(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){A(this,Gh,e)}editAltText(e,t=!1){var s;(s=c(this,Qc))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,eu,t);break}}onPageChanging({pageNumber:e}){A(this,Jc,e-1)}focusMainContainer(){c(this,$r).focus()}findParent(e,t){for(const s of c(this,Ot).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){c(this,Yh).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,_a).add(e)}removeShouldRescale(e){c(this,_a).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Vo.PDF_TO_CSS_UNITS;for(const t of c(this,_a))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o}=t,a=t.toString(),u=E(this,W,xm).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;t.empty();const f=E(this,W,v0).call(this,u),p=c(this,Rt)===le.NONE,m=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:o,text:a}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(le.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Hr)&&!c(this,Hr).has(e.id)&&c(this,Hr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,so)&&(A(this,so,!1),E(this,W,wm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,ke))if(t.div.contains(e)){A(this,Ta,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Ta))return;const[e,t]=c(this,Ta);A(this,Ta,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,W,y0).call(this),E(this,W,x0).call(this)}removeEditListeners(){E(this,W,VP).call(this),E(this,W,w0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,Ps))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,Ps))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,Dn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,ke)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,Ps))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){de(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const u=await r.deserialize(l);if(!u)return;i.push(u)}const o=()=>{for(const l of i)E(this,W,b0).call(this,l);E(this,W,S0).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){de(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Rt)!==le.NONE&&!this.isEditorHandlingKeyboard&&xc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,so)&&(A(this,so,!1),E(this,W,wm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(E(this,W,BP).call(this),E(this,W,x0).call(this),E(this,W,rn).call(this,{isEditing:c(this,Rt)!==le.NONE,isEmpty:E(this,W,jd).call(this),hasSomethingToUndo:c(this,Ns).hasSomethingToUndo(),hasSomethingToRedo:c(this,Ns).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,W,UP).call(this),E(this,W,w0).call(this),E(this,W,rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Ps)){A(this,Ps,e);for(const t of c(this,Ps))E(this,W,Oi).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Dg).id}get currentLayer(){return c(this,Ot).get(c(this,Jc))}getLayer(e){return c(this,Ot).get(e)}get currentPageIndex(){return c(this,Jc)}addLayer(e){c(this,Ot).set(e.pageIndex,e),c(this,ro)?e.enable():e.disable()}removeLayer(e){c(this,Ot).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){if(c(this,Rt)!==e&&!(c(this,is)&&(await c(this,is).promise,!c(this,is)))){if(A(this,is,Promise.withResolvers()),A(this,Rt,e),e===le.NONE){this.setEditingState(!1),E(this,W,qP).call(this),c(this,is).resolve();return}this.setEditingState(!0),await E(this,W,GP).call(this),this.unselectAll();for(const r of c(this,Ot).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),c(this,is).resolve();return}for(const r of c(this,yt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,is).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,Rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(c(this,Ps)){switch(e){case ne.CREATE:this.currentLayer.addNewEditor();return;case ne.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,Gh))==null||s.updateColor(t);break;case ne.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Kh)||A(this,Kh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of c(this,ke))r.updateParams(e,t);for(const r of c(this,Ps))r.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of c(this,yt).values())o.editorType===e&&o.show(t);(((i=c(this,Kh))==null?void 0:i.get(ne.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,W,Oi).call(this,[[ne.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Wh)!==e){A(this,Wh,e);for(const t of c(this,Ot).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of c(this,yt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return c(this,yt).get(e)}addEditor(e){c(this,yt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,ir)&&clearTimeout(c(this,ir)),A(this,ir,setTimeout(()=>{this.focusMainContainer(),A(this,ir,null)},0))),c(this,yt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Ca).has(e.annotationElementId))&&((t=c(this,Hr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,Ca).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Ca).has(e)}removeDeletedAnnotationElement(e){c(this,Ca).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Dn)!==e&&(A(this,Dn,e),e&&E(this,W,Oi).call(this,e.propertiesToUpdate))}updateUI(e){c(this,W,KP)===e&&E(this,W,Oi).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,ke).has(e)){c(this,ke).delete(e),e.unselect(),E(this,W,rn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ke).add(e),e.select(),E(this,W,Oi).call(this,e.propertiesToUpdate),E(this,W,rn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of c(this,ke))t!==e&&t.unselect();c(this,ke).clear(),c(this,ke).add(e),e.select(),E(this,W,Oi).call(this,e.propertiesToUpdate),E(this,W,rn).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,ke).has(e)}get firstSelectedEditor(){return c(this,ke).values().next().value}unselect(e){e.unselect(),c(this,ke).delete(e),E(this,W,rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ke).size!==0}get isEnterHandled(){return c(this,ke).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,Ns).undo(),E(this,W,rn).call(this,{hasSomethingToUndo:c(this,Ns).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,W,jd).call(this)})}redo(){c(this,Ns).redo(),E(this,W,rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Ns).hasSomethingToRedo(),isEmpty:E(this,W,jd).call(this)})}addCommands(e){c(this,Ns).add(e),E(this,W,rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,W,jd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,ke)],t=()=>{for(const r of e)r.remove()},s=()=>{for(const r of e)E(this,W,b0).call(this,r)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Dn))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Dn)||this.hasSelection}selectAll(){for(const e of c(this,ke))e.commit();E(this,W,S0).call(this,c(this,yt).values())}unselectAll(){if(!(c(this,Dn)&&(c(this,Dn).commitOrRemove(),c(this,Rt)!==le.NONE))&&this.hasSelection){for(const e of c(this,ke))e.unselect();c(this,ke).clear(),E(this,W,rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,oo)[0]+=e,c(this,oo)[1]+=t;const[r,i]=c(this,oo),o=[...c(this,ke)],a=1e3;c(this,ar)&&clearTimeout(c(this,ar)),A(this,ar,setTimeout(()=>{A(this,ar,null),c(this,oo)[0]=c(this,oo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,yt).has(l.id)&&l.translateInPage(r,i)},undo:()=>{for(const l of o)c(this,yt).has(l.id)&&l.translateInPage(-r,-i)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,rr,new Map);for(const e of c(this,ke))c(this,rr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,rr))return!1;this.disableUserSelect(!1);const e=c(this,rr);A(this,rr,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(c(this,yt).has(r.id)){const l=c(this,Ot).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,rr))for(const s of c(this,rr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,ke).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Dn)===e}getActive(){return c(this,Dn)}getMode(){return c(this,Rt)}get imageManager(){return we(this,"imageManager",new m0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,f,p)=>({x:(d-r)/o,y:1-(u+f-s)/i,width:p/o,height:f/i});break;case"180":a=(u,d,f,p)=>({x:1-(u+f-s)/i,y:1-(d+p-r)/o,width:f/i,height:p/o});break;case"270":a=(u,d,f,p)=>({x:1-(d+p-r)/o,y:(u-s)/i,width:p/o,height:f/i});break;default:a=(u,d,f,p)=>({x:(u-s)/i,y:(d-r)/o,width:f/i,height:p/o});break}const l=[];for(let u=0,d=t.rangeCount;u<d;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:p,y:m,width:y,height:v}of f.getClientRects())y===0||v===0||l.push(a(p,m,y,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Zc)||A(this,Zc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Zc))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Zc))==null?void 0:r.get(e.data.id);if(!t)return;const s=c(this,Hr).getRawValue(t);s&&(c(this,Rt)===le.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};Yc=new WeakMap,Dn=new WeakMap,yt=new WeakMap,Ot=new WeakMap,Qc=new WeakMap,Hr=new WeakMap,Zc=new WeakMap,Ns=new WeakMap,to=new WeakMap,Jc=new WeakMap,Ca=new WeakMap,rr=new WeakMap,Ps=new WeakMap,_a=new WeakMap,Bh=new WeakMap,Uh=new WeakMap,eu=new WeakMap,Vh=new WeakMap,ir=new WeakMap,no=new WeakMap,tu=new WeakMap,so=new WeakMap,or=new WeakMap,Dg=new WeakMap,ro=new WeakMap,Wh=new WeakMap,io=new WeakMap,Ta=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Rt=new WeakMap,ke=new WeakMap,zr=new WeakMap,Na=new WeakMap,Kh=new WeakMap,Xh=new WeakMap,oo=new WeakMap,ar=new WeakMap,$r=new WeakMap,Yh=new WeakMap,is=new WeakMap,W=new WeakSet,xm=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},v0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,Ot).values())if(s.hasTextLayer(e))return s;return null},HP=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,W,xm).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(c(this,or)||A(this,or,new dH(this)),c(this,or).show(s,r,this.direction==="ltr"))},zP=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){c(this,zr)&&((i=c(this,or))==null||i.hide(),A(this,zr,null),E(this,W,rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,zr))return;const r=E(this,W,xm).call(this,e).closest(".textLayer");if(!r){c(this,zr)&&((o=c(this,or))==null||o.hide(),A(this,zr,null),E(this,W,rn).call(this,{hasSelectedText:!1}));return}if((a=c(this,or))==null||a.hide(),A(this,zr,t),E(this,W,rn).call(this,{hasSelectedText:!0}),!(c(this,Rt)!==le.HIGHLIGHT&&c(this,Rt)!==le.NONE)&&(c(this,Rt)===le.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,so,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,Rt)===le.HIGHLIGHT?E(this,W,v0).call(this,r):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),f=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&E(this,W,wm).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}},wm=function(e=""){c(this,Rt)===le.HIGHLIGHT?this.highlightSelection(e):c(this,Bh)&&E(this,W,HP).call(this)},$P=function(){document.addEventListener("selectionchange",E(this,W,zP).bind(this),{signal:this._signal})},BP=function(){if(c(this,no))return;A(this,no,new AbortController);const e=this.combinedSignal(c(this,no));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},UP=function(){var e;(e=c(this,no))==null||e.abort(),A(this,no,null)},y0=function(){if(c(this,io))return;A(this,io,new AbortController);const e=this.combinedSignal(c(this,io));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},VP=function(){var e;(e=c(this,io))==null||e.abort(),A(this,io,null)},x0=function(){if(c(this,to))return;A(this,to,new AbortController);const e=this.combinedSignal(c(this,to));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},w0=function(){var e;(e=c(this,to))==null||e.abort(),A(this,to,null)},WP=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},rn=function(e){Object.entries(e).some(([s,r])=>c(this,Xh)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Xh),e)}),c(this,Rt)===le.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,W,Oi).call(this,[[ne.HIGHLIGHT_FREE,!0]]))},Oi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},GP=async function(){if(!c(this,ro)){A(this,ro,!0);const e=[];for(const t of c(this,Ot).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,yt).values())t.enable()}},qP=function(){if(this.unselectAll(),c(this,ro)){A(this,ro,!1);for(const e of c(this,Ot).values())e.disable();for(const e of c(this,yt).values())e.disable()}},b0=function(e){const t=c(this,Ot).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},KP=function(){let e=null;for(e of c(this,ke));return e},jd=function(){if(c(this,yt).size===0)return!0;if(c(this,yt).size===1)for(const e of c(this,yt).values())return e.isEmpty();return!1},S0=function(e){for(const t of c(this,ke))t.unselect();c(this,ke).clear();for(const t of e)t.isEmpty()||(c(this,ke).add(t),t.select());E(this,W,rn).call(this,{hasSelectedEditor:this.hasSelection})},te(xc,"TRANSLATE_SMALL",1),te(xc,"TRANSLATE_BIG",10);let Rl=xc;var Lt,lr,ks,nu,cr,On,su,ur,An,Br,Pa,dr,ao,Vs,Id,bm;const on=class on{constructor(e){_(this,Vs);_(this,Lt,null);_(this,lr,!1);_(this,ks,null);_(this,nu,null);_(this,cr,null);_(this,On,null);_(this,su,!1);_(this,ur,null);_(this,An,null);_(this,Br,null);_(this,Pa,null);_(this,dr,!1);A(this,An,e),A(this,dr,e._uiManager.useNewAltTextFlow),c(on,ao)||A(on,ao,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){on._l10n??(on._l10n=e)}async render(){const e=A(this,ks,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,nu,document.createElement("span"));e.append(t),c(this,dr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(on,ao).missing),t.setAttribute("data-l10n-id",c(on,ao)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,An)._uiManager._signal;e.addEventListener("contextmenu",ws,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),c(this,An)._uiManager.editAltText(c(this,An)),c(this,dr)&&c(this,An)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Vs,Id)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(A(this,su,!0),r(i))},{signal:s}),await E(this,Vs,bm).call(this),e}finish(){c(this,ks)&&(c(this,ks).focus({focusVisible:c(this,su)}),A(this,su,!1))}isEmpty(){return c(this,dr)?c(this,Lt)===null:!c(this,Lt)&&!c(this,lr)}hasData(){return c(this,dr)?c(this,Lt)!==null||!!c(this,Br):this.isEmpty()}get guessedText(){return c(this,Br)}async setGuessedText(e){c(this,Lt)===null&&(A(this,Br,e),A(this,Pa,await on._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Vs,bm).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,dr)||c(this,Lt)){(t=c(this,ur))==null||t.remove(),A(this,ur,null);return}if(!c(this,ur)){const s=A(this,ur,document.createElement("div"));s.className="noAltTextBadge",c(this,An).div.append(s)}c(this,ur).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Lt);return!e&&c(this,Br)===t&&(t=c(this,Pa)),{altText:t,decorative:c(this,lr),guessedText:c(this,Br),textWithDisclaimer:c(this,Pa)}}get data(){return{altText:c(this,Lt),decorative:c(this,lr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(A(this,Br,s),A(this,Pa,r)),!(c(this,Lt)===e&&c(this,lr)===t)&&(i||(A(this,Lt,e),A(this,lr,t)),E(this,Vs,bm).call(this))}toggle(e=!1){c(this,ks)&&(!e&&c(this,On)&&(clearTimeout(c(this,On)),A(this,On,null)),c(this,ks).disabled=!e)}shown(){c(this,An)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Vs,Id)}})}destroy(){var e,t;(e=c(this,ks))==null||e.remove(),A(this,ks,null),A(this,nu,null),A(this,cr,null),(t=c(this,ur))==null||t.remove(),A(this,ur,null)}};Lt=new WeakMap,lr=new WeakMap,ks=new WeakMap,nu=new WeakMap,cr=new WeakMap,On=new WeakMap,su=new WeakMap,ur=new WeakMap,An=new WeakMap,Br=new WeakMap,Pa=new WeakMap,dr=new WeakMap,ao=new WeakMap,Vs=new WeakSet,Id=function(){return c(this,Lt)&&"added"||c(this,Lt)===null&&this.guessedText&&"review"||"missing"},bm=async function(){var r,i,o;const e=c(this,ks);if(!e)return;if(c(this,dr)){if(e.classList.toggle("done",!!c(this,Lt)),e.setAttribute("data-l10n-id",c(on,ao)[c(this,Vs,Id)]),(r=c(this,nu))==null||r.setAttribute("data-l10n-id",c(on,ao)[`${c(this,Vs,Id)}-label`]),!c(this,Lt)){(i=c(this,cr))==null||i.remove();return}}else{if(!c(this,Lt)&&!c(this,lr)){e.classList.remove("done"),(o=c(this,cr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,cr);if(!t){A(this,cr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,An).id}`;const a=100,l=c(this,An)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,On)),A(this,On,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,On,setTimeout(()=>{A(this,On,null),c(this,cr).classList.add("show"),c(this,An)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,On)&&(clearTimeout(c(this,On)),A(this,On,null)),(u=c(this,cr))==null||u.classList.remove("show")},{signal:l})}c(this,lr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Lt)),t.parentNode||e.append(t);const s=c(this,An).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},_(on,ao,null),te(on,"_l10n",null);let Cg=on;var ka,Rs,Xe,ru,Ra,Ft,La,lo,Qh,Ma,co,Zh,ja,Ur,hr,iu,ou,os,Jh,Og,ue,A0,ef,E0,C0,XP,YP,_0,T0,N0,QP,P0,ZP,JP,ek,k0,Dd;const Ne=class Ne{constructor(e){_(this,ue);_(this,ka,null);_(this,Rs,null);_(this,Xe,null);_(this,ru,!1);_(this,Ra,!1);_(this,Ft,null);_(this,La,null);_(this,lo,null);_(this,Qh,"");_(this,Ma,!1);_(this,co,null);_(this,Zh,!1);_(this,ja,!1);_(this,Ur,!1);_(this,hr,null);_(this,iu,0);_(this,ou,0);_(this,os,null);te(this,"_editToolbar",null);te(this,"_initialOptions",Object.create(null));te(this,"_initialData",null);te(this,"_isVisible",!0);te(this,"_uiManager",null);te(this,"_focusEventsAllowed",!0);_(this,Jh,!1);_(this,Og,Ne._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ne.prototype._resizeWithKeyboard,t=Rl.TRANSLATE_SMALL,s=Rl.TRANSLATE_BIG;return we(this,"_resizerKeyboardManager",new up([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ne.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return we(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new mH({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ne._l10n??(Ne._l10n=e),Ne._l10nResizer||(Ne._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ne._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ne._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Jh)}set _isDraggable(e){var t;A(this,Jh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Og)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):E(this,ue,Dd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Ma)?A(this,Ma,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}translate(e,t){E(this,ue,A0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,co)||A(this,co,[this.x,this.y]),E(this,ue,A0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,co)||A(this,co,[this.x,this.y]);const[s,r]=this.parentDimensions;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:o}=this;const[a,l]=this.getBaseTranslation();i+=a,o+=l,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,co)&&(c(this,co)[0]!==this.x||c(this,co)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ne,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:r,y:i,width:o,height:a}=this;if(o*=t,a*=s,r*=t,i*=s,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),i=Math.max(0,Math.min(s-a,i));break;case 90:r=Math.max(0,Math.min(t-a,r)),i=Math.min(s,Math.max(o,i));break;case 180:r=Math.min(t,Math.max(o,r)),i=Math.min(s,Math.max(a,i));break;case 270:r=Math.min(t,Math.max(a,r)),i=Math.max(0,Math.min(s-o,i));break}this.x=r/=t,this.y=i/=s;const[l,u]=this.getBaseTranslation();r+=l,i+=u;const{style:d}=this.div;d.left=`${(100*r).toFixed(2)}%`,d.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=Ne,ef,E0).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=Ne,ef,E0).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,r]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,c(this,Ra)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),i=!c(this,Ra)&&t.endsWith("%");if(r&&i)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!c(this,Ra)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,Xe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,ja)?this._editToolbar:(this._editToolbar=new f0(this),this.div.append(this._editToolbar.render()),c(this,Xe)&&await this._editToolbar.addAltText(c(this,Xe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,Xe))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Xe)||(Cg.initialize(Ne._l10n),A(this,Xe,new Cg(this)),c(this,ka)&&(c(this,Xe).data=c(this,ka),A(this,ka,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Xe))==null?void 0:e.data}set altTextData(e){c(this,Xe)&&(c(this,Xe).data=e)}get guessedAltText(){var e;return(e=c(this,Xe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Xe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Xe))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Xe)&&!c(this,Xe).isEmpty()}hasAltTextData(){var e;return((e=c(this,Xe))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,ru)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,ue,P0).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),Eg(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,Ma,!0),this._isDraggable){E(this,ue,QP).call(this,e);return}E(this,ue,N0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(this,hr)&&clearTimeout(c(this,hr)),A(this,hr,setTimeout(()=>{var e;A(this,hr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/r,d=t/r,f=this.x*i,p=this.y*o,m=this.width*i,y=this.height*o;switch(s){case 0:return[f+u+a,o-p-d-y+l,f+u+m+a,o-p-d+l];case 90:return[f+d+a,o-p+u+l,f+d+y+a,o-p+u+m+l];case 180:return[f-u-m+a,o-p+d+l,f-u+a,o-p+d+y+l];case 270:return[f-d-y+a,o-p-u-m+l,f-d+a,o-p-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-r,l,a];case 180:return[i,t-r,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){A(this,ja,!0)}disableEditMode(){A(this,ja,!1)}isInEditMode(){return c(this,ja)}shouldGetKeyboardEvents(){return c(this,Ur)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){E(this,ue,P0).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ue("An editor must be serializable")}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});r.rotation=e.rotation,A(r,ka,e.accessibilityData);const[i,o]=r.pageDimensions,[a,l,u,d]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=u/i,r.height=d/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=c(this,lo))==null||e.abort(),A(this,lo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,hr)&&(clearTimeout(c(this,hr)),A(this,hr,null)),E(this,ue,Dd).call(this),this.removeEditToolbar(),c(this,os)){for(const t of c(this,os).values())clearTimeout(t);A(this,os,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,ue,XP).call(this),c(this,Ft).classList.remove("hidden"),Eg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,La,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Ft).children;if(!c(this,Rs)){A(this,Rs,Array.from(t));const o=E(this,ue,ZP).bind(this),a=E(this,ue,JP).bind(this),l=this._uiManager._signal;for(const u of c(this,Rs)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",E(this,ue,ek).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",Ne._l10nResizer[d])}}const s=c(this,Rs)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,Rs).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)c(this,Ft).append(c(this,Ft).firstChild);else if(i>r)for(let a=0;a<i-r;a++)c(this,Ft).firstChild.before(c(this,Ft).lastChild);let o=0;for(const a of t){const u=c(this,Rs)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ne._l10nResizer[u])}}E(this,ue,k0).call(this,0),A(this,Ur,!0),c(this,Ft).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ur)&&E(this,ue,T0).call(this,c(this,Qh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){E(this,ue,Dd).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,Xe))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,r,i;(e=c(this,Ft))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,Xe))==null||i.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Zh)}set isEditing(e){A(this,Zh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){A(this,Ra,!0);const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,os)||A(this,os,new Map);const{action:s}=e;let r=c(this,os).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,os).delete(s),c(this,os).size===0&&A(this,os,null)},Ne._telemetryTimeout),c(this,os).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,ru,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,ru,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ka=new WeakMap,Rs=new WeakMap,Xe=new WeakMap,ru=new WeakMap,Ra=new WeakMap,Ft=new WeakMap,La=new WeakMap,lo=new WeakMap,Qh=new WeakMap,Ma=new WeakMap,co=new WeakMap,Zh=new WeakMap,ja=new WeakMap,Ur=new WeakMap,hr=new WeakMap,iu=new WeakMap,ou=new WeakMap,os=new WeakMap,Jh=new WeakMap,Og=new WeakMap,ue=new WeakSet,A0=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this.fixAndSetPosition()},ef=new WeakSet,E0=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},C0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},XP=function(){if(c(this,Ft))return;A(this,Ft,document.createElement("div")),c(this,Ft).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");c(this,Ft).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",E(this,ue,YP).bind(this,s),{signal:t}),r.addEventListener("contextmenu",ws,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Ft))},YP=function(e,t){var y;t.preventDefault();const{isMac:s}=pn.platform;if(t.button!==0||t.ctrlKey&&s)return;(y=c(this,Xe))==null||y.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,ue,T0).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",ws,{signal:o});const a=this.x,l=this.y,u=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{var v;i.abort(),this.parent.togglePointerEvents(!0),(v=c(this,Xe))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=f,this.div.style.cursor=p,E(this,ue,_0).call(this,a,l,u,d)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},_0=function(e,t,s,r){const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===s&&l===r||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=i,this.y=o;const[u,d]=this.parentDimensions;this.setDims(u*a,d*l),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=r,this.x=e,this.y=t;const[u,d]=this.parentDimensions;this.setDims(u*s,d*r),this.fixAndSetPosition()},mustExec:!0})},T0=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,u=Ne.MIN_SIZE/s,d=Ne.MIN_SIZE/r,f=F=>Math.round(F*1e4)/1e4,p=E(this,ue,C0).call(this,this.rotation),m=(F,L)=>[p[0]*F+p[2]*L,p[1]*F+p[3]*L],y=E(this,ue,C0).call(this,360-this.rotation),v=(F,L)=>[y[0]*F+y[2]*L,y[1]*F+y[3]*L];let S,g,x=!1,b=!1;switch(e){case"topLeft":x=!0,S=(F,L)=>[0,0],g=(F,L)=>[F,L];break;case"topMiddle":S=(F,L)=>[F/2,0],g=(F,L)=>[F/2,L];break;case"topRight":x=!0,S=(F,L)=>[F,0],g=(F,L)=>[0,L];break;case"middleRight":b=!0,S=(F,L)=>[F,L/2],g=(F,L)=>[0,L/2];break;case"bottomRight":x=!0,S=(F,L)=>[F,L],g=(F,L)=>[0,0];break;case"bottomMiddle":S=(F,L)=>[F/2,L],g=(F,L)=>[F/2,0];break;case"bottomLeft":x=!0,S=(F,L)=>[0,L],g=(F,L)=>[F,0];break;case"middleLeft":b=!0,S=(F,L)=>[0,L/2],g=(F,L)=>[F,L/2];break}const C=S(a,l),T=g(a,l);let N=m(...T);const P=f(i+N[0]),k=f(o+N[1]);let M=1,j=1,[D,R]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,R]=v(D/s,R/r),x){const F=Math.hypot(a,l);M=j=Math.max(Math.min(Math.hypot(T[0]-C[0]-D,T[1]-C[1]-R)/F,1/a,1/l),u/a,d/l)}else b?M=Math.max(u,Math.min(1,Math.abs(T[0]-C[0]-D)))/a:j=Math.max(d,Math.min(1,Math.abs(T[1]-C[1]-R)))/l;const O=f(a*M),I=f(l*j);N=m(...g(O,I));const B=P-N[0],H=k-N[1];this.width=O,this.height=I,this.x=B,this.y=H,this.setDims(s*O,r*I),this.fixAndSetPosition()},N0=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QP=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const s=new AbortController,r=this._uiManager.combinedSignal(s);if(t){this.div.classList.add("moving"),A(this,iu,e.clientX),A(this,ou,e.clientY);const o=a=>{const{clientX:l,clientY:u}=a,[d,f]=this.screenToPageTranslation(l-c(this,iu),u-c(this,ou));A(this,iu,l),A(this,ou,u),this._uiManager.dragSelectedEditors(d,f)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:r})}const i=()=>{s.abort(),t&&this.div.classList.remove("moving"),A(this,Ma,!1),this._uiManager.endDragSession()||E(this,ue,N0).call(this,e)};window.addEventListener("pointerup",i,{signal:r}),window.addEventListener("blur",i,{signal:r})},P0=function(){if(c(this,lo)||!this.div)return;A(this,lo,new AbortController);const e=this._uiManager.combinedSignal(c(this,lo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ZP=function(e){Ne._resizerKeyboardManager.exec(this,e)},JP=function(e){var t;c(this,Ur)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Ft)&&E(this,ue,Dd).call(this)},ek=function(e){A(this,Qh,c(this,Ur)?e:"")},k0=function(e){if(c(this,Rs))for(const t of c(this,Rs))t.tabIndex=e},Dd=function(){if(A(this,Ur,!1),E(this,ue,k0).call(this,-1),c(this,La)){const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=c(this,La);E(this,ue,_0).call(this,e,t,s,r),A(this,La,null)}},_(Ne,ef),te(Ne,"_l10n",null),te(Ne,"_l10nResizer",null),te(Ne,"_borderLineWidth",-1),te(Ne,"_colorManager",new g0),te(Ne,"_zIndex",1),te(Ne,"_telemetryTimeout",1e3);let Le=Ne;class mH extends Le{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zA=3285377520,ss=4294901760,Zs=65535;class tk{constructor(e){this.h1=e?e&4294967295:zA,this.h2=e?e&4294967295:zA}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let v=0,S=e.length;v<S;v++){const g=e.charCodeAt(v);g<=255?t[s++]=g:(t[s++]=g>>>8,t[s++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,u=this.h1,d=this.h2;const f=3432918353,p=461845907,m=f&Zs,y=p&Zs;for(let v=0;v<r;v++)v&1?(a=o[v],a=a*f&ss|a*m&Zs,a=a<<15|a>>>17,a=a*p&ss|a*y&Zs,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[v],l=l*f&ss|l*m&Zs,l=l<<15|l>>>17,l=l*p&ss|l*y&Zs,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*f&ss|a*m&Zs,a=a<<15|a>>>17,a=a*p&ss|a*y&Zs,r&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ss|e*36045&Zs,t=t*4283543511&ss|((t<<16|e>>>16)*2950163797&ss)>>>16,e^=t>>>1,e=e*444984403&ss|e*60499&Zs,t=t*3301882366&ss|((t<<16|e>>>16)*3120437893&ss)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const R0=Object.freeze({map:null,hash:"",transfer:void 0});var Ia,Da,Mt,Fg,nk;class A1{constructor(){_(this,Fg);_(this,Ia,!1);_(this,Da,null);_(this,Mt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,Mt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,Mt).get(e)}remove(e){if(c(this,Mt).delete(e),c(this,Mt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,Mt).values())if(t instanceof Le)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,Mt).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,c(this,Mt).set(e,t);r&&E(this,Fg,nk).call(this),t instanceof Le&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,Mt).has(e)}getAll(){return c(this,Mt).size>0?v1(c(this,Mt)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return c(this,Mt).size}resetModified(){c(this,Ia)&&(A(this,Ia,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sk(this)}get serializable(){if(c(this,Mt).size===0)return R0;const e=new Map,t=new tk,s=[],r=Object.create(null);let i=!1;for(const[o,a]of c(this,Mt)){const l=a instanceof Le?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:R0}get editorStats(){let e=null;const t=new Map;for(const s of c(this,Mt).values()){if(!(s instanceof Le))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,l]of Object.entries(r)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){A(this,Da,null)}get modifiedIds(){if(c(this,Da))return c(this,Da);const e=[];for(const t of c(this,Mt).values())!(t instanceof Le)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return A(this,Da,{ids:new Set(e),hash:e.join(",")})}}Ia=new WeakMap,Da=new WeakMap,Mt=new WeakMap,Fg=new WeakSet,nk=function(){c(this,Ia)||(A(this,Ia,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var tf;class sk extends A1{constructor(t){super();_(this,tf);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);A(this,tf,{map:o,hash:r,transfer:i})}get print(){Ue("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,tf)}get modifiedIds(){return we(this,"modifiedIds",{ids:new Set,hash:""})}}tf=new WeakMap;var au;class gH{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){_(this,au,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,au).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,au).has(e.loadedName))){if(Et(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:i}=e,o=new FontFace(s,r,i);this.addNativeFontFace(o);try{await o.load(),c(this,au).add(s),t==null||t(e)}catch{de(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw de(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return we(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(nn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),we(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Et(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return we(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(C,T){return C.charCodeAt(T)<<24|C.charCodeAt(T+1)<<16|C.charCodeAt(T+2)<<8|C.charCodeAt(T+3)&255}function r(C,T,N,P){const k=C.substring(0,T),M=C.substring(T+N);return k+P+M}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function d(C,T){if(++u>30){de("Load test font never loaded."),T();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,C,T))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,f.length,f);const y=16,v=1482184792;let S=s(p,y);for(i=0,o=f.length-3;i<o;i+=4)S=S-v+s(f,i)|0;i<f.length&&(S=S-v+s(f+"XXX",i)|0),p=r(p,y,4,eH(S));const g=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${f}";src:${g}}`;this.insertRule(x);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const C of[e.loadedName,f]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=C,b.append(T)}this._document.body.append(b),d(f,()=>{b.remove(),t.complete()})}}au=new WeakMap;class vH{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${oH(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(i){de(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(i,o){};const r=[];for(let i=0,o=s.length;i<o;)switch(s[i++]){case kr.BEZIER_CURVE_TO:{const[a,l,u,d,f,p]=s.slice(i,i+6);r.push(m=>m.bezierCurveTo(a,l,u,d,f,p)),i+=6}break;case kr.MOVE_TO:{const[a,l]=s.slice(i,i+2);r.push(u=>u.moveTo(a,l)),i+=2}break;case kr.LINE_TO:{const[a,l]=s.slice(i,i+2);r.push(u=>u.lineTo(a,l)),i+=2}break;case kr.QUADRATIC_CURVE_TO:{const[a,l,u,d]=s.slice(i,i+4);r.push(f=>f.quadraticCurveTo(a,l,u,d)),i+=4}break;case kr.RESTORE:r.push(a=>a.restore());break;case kr.SAVE:r.push(a=>a.save());break;case kr.SCALE:Et(r.length===2,"Scale command is only valid at the third position.");break;case kr.TRANSFORM:{const[a,l,u,d,f,p]=s.slice(i,i+6);r.push(m=>m.transform(a,l,u,d,f,p)),i+=6}break;case kr.TRANSLATE:{const[a,l]=s.slice(i,i+2);r.push(u=>u.translate(a,l)),i+=2}break}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let l=2,u=r.length;l<u;l++)r[l](o)}}}var nf;class rk{constructor({enableHWA:e=!1}){_(this,nf,!1);A(this,nf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,nf)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ue("Abstract method `_createCanvas` called.")}}nf=new WeakMap;class yH extends rk{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class ik{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class ok extends ik{async _fetch(e){const t=await jv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Mv(t)}}class ak{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Oa,Fa,fr,Vr,Yt,Hg,Ha,q,qt,Zl,Jl,Sm,ec,lk,L0,tc,Od,Fd,M0,Hd;class xH extends ak{constructor({docId:t,ownerDocument:s=globalThis.document}){super();_(this,q);_(this,Oa);_(this,Fa);_(this,fr);_(this,Vr);_(this,Yt);_(this,Hg);_(this,Ha,0);A(this,Vr,t),A(this,Yt,s)}addFilter(t){if(!t)return"none";let s=c(this,q,qt).get(t);if(s)return s;const[r,i,o]=E(this,q,Sm).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=c(this,q,qt).get(a),s)return c(this,q,qt).set(t,s),s;const l=`g_${c(this,Vr)}_transfer_map_${Tt(this,Ha)._++}`,u=E(this,q,ec).call(this,l);c(this,q,qt).set(t,u),c(this,q,qt).set(a,u);const d=E(this,q,tc).call(this,l);return E(this,q,Fd).call(this,r,i,o,d),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=c(this,q,Zl).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,q,Zl).set(i,o)),!t||!s))return o.url;const a=E(this,q,Hd).call(this,t);t=Y.makeHexColor(...a);const l=E(this,q,Hd).call(this,s);if(s=Y.makeHexColor(...l),c(this,q,Jl).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const S=v/255;u[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=u.join(","),f=`g_${c(this,Vr)}_hcm_filter`,p=o.filter=E(this,q,tc).call(this,f);E(this,q,Fd).call(this,d,d,d,p),E(this,q,L0).call(this,p);const m=(v,S)=>{const g=a[v]/255,x=l[v]/255,b=new Array(S+1);for(let C=0;C<=S;C++)b[C]=g+C/S*(x-g);return b.join(",")};return E(this,q,Fd).call(this,m(0,5),m(1,5),m(2,5),p),o.url=E(this,q,ec).call(this,f),o.url}addAlphaFilter(t){let s=c(this,q,qt).get(t);if(s)return s;const[r]=E(this,q,Sm).call(this,[t]),i=`alpha_${r}`;if(s=c(this,q,qt).get(i),s)return c(this,q,qt).set(t,s),s;const o=`g_${c(this,Vr)}_alpha_map_${Tt(this,Ha)._++}`,a=E(this,q,ec).call(this,o);c(this,q,qt).set(t,a),c(this,q,qt).set(i,a);const l=E(this,q,tc).call(this,o);return E(this,q,M0).call(this,r,l),a}addLuminosityFilter(t){let s=c(this,q,qt).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=E(this,q,Sm).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=c(this,q,qt).get(i),s)return c(this,q,qt).set(t,s),s;const o=`g_${c(this,Vr)}_luminosity_map_${Tt(this,Ha)._++}`,a=E(this,q,ec).call(this,o);c(this,q,qt).set(t,a),c(this,q,qt).set(i,a);const l=E(this,q,tc).call(this,o);return E(this,q,lk).call(this,l),t&&E(this,q,M0).call(this,r,l),a}addHighlightHCMFilter(t,s,r,i,o){var x;const a=`${s}-${r}-${i}-${o}`;let l=c(this,q,Zl).get(t);if((l==null?void 0:l.key)===a||(l?((x=l.filter)==null||x.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,q,Zl).set(t,l)),!s||!r))return l.url;const[u,d]=[s,r].map(E(this,q,Hd).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,o].map(E(this,q,Hd).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),c(this,q,Jl).style.color="";const v=(b,C,T)=>{const N=new Array(256),P=(p-f)/T,k=b/255,M=(C-b)/(255*T);let j=0;for(let D=0;D<=T;D++){const R=Math.round(f+D*P),O=k+D*M;for(let I=j;I<=R;I++)N[I]=O;j=R+1}for(let D=j;D<256;D++)N[D]=N[j-1];return N.join(",")},S=`g_${c(this,Vr)}_hcm_${t}_filter`,g=l.filter=E(this,q,tc).call(this,S);return E(this,q,L0).call(this,g),E(this,q,Fd).call(this,v(m[0],y[0],5),v(m[1],y[1],5),v(m[2],y[2],5),g),l.url=E(this,q,ec).call(this,S),l.url}destroy(t=!1){t&&c(this,q,Zl).size!==0||(c(this,fr)&&(c(this,fr).parentNode.parentNode.remove(),A(this,fr,null)),c(this,Fa)&&(c(this,Fa).clear(),A(this,Fa,null)),A(this,Ha,0))}}Oa=new WeakMap,Fa=new WeakMap,fr=new WeakMap,Vr=new WeakMap,Yt=new WeakMap,Hg=new WeakMap,Ha=new WeakMap,q=new WeakSet,qt=function(){return c(this,Fa)||A(this,Fa,new Map)},Zl=function(){return c(this,Hg)||A(this,Hg,new Map)},Jl=function(){if(!c(this,fr)){const t=c(this,Yt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=c(this,Yt).createElementNS(Mr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,fr,c(this,Yt).createElementNS(Mr,"defs")),t.append(r),r.append(c(this,fr)),c(this,Yt).body.append(t)}return c(this,fr)},Sm=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=u[p]/255;const f=d.join(",");return[f,f,f]}const[s,r,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=r[u]/255,l[u]=i[u]/255;return[o.join(","),a.join(","),l.join(",")]},ec=function(t){if(c(this,Oa)===void 0){A(this,Oa,"");const s=c(this,Yt).URL;s!==c(this,Yt).baseURI&&(Iv(s)?de('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Oa,s.split("#",1)[0]))}return`url(${c(this,Oa)}#${t})`},lk=function(t){const s=c(this,Yt).createElementNS(Mr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},L0=function(t){const s=c(this,Yt).createElementNS(Mr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},tc=function(t){const s=c(this,Yt).createElementNS(Mr,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,q,Jl).append(s),s},Od=function(t,s,r){const i=c(this,Yt).createElementNS(Mr,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Fd=function(t,s,r,i){const o=c(this,Yt).createElementNS(Mr,"feComponentTransfer");i.append(o),E(this,q,Od).call(this,o,"feFuncR",t),E(this,q,Od).call(this,o,"feFuncG",s),E(this,q,Od).call(this,o,"feFuncB",r)},M0=function(t,s){const r=c(this,Yt).createElementNS(Mr,"feComponentTransfer");s.append(r),E(this,q,Od).call(this,r,"feFuncA",t)},Hd=function(t){return c(this,q,Jl).style.color=t,S1(getComputedStyle(c(this,q,Jl)).getPropertyValue("color"))};class ck{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class uk extends ck{async _fetch(e){const t=await jv(e,"arraybuffer");return new Uint8Array(t)}}if(nn){var j0=Promise.withResolvers(),ch=null;(async()=>{const e=await Up(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Up(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Up(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Up(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,o;return new Map(Object.entries({fs:e,http:t,https:s,url:r,canvas:i,path2d:o}))})().then(e=>{ch=e,j0.resolve()},e=>{de(`loadPackages: ${e}`),ch=new Map,j0.resolve()})}class Wo{static get promise(){return j0.promise}static get(e){return ch==null?void 0:ch.get(e)}}async function dk(n){const t=await Wo.get("fs").promises.readFile(n);return new Uint8Array(t)}class wH extends ak{}class bH extends rk{_createCanvas(e,t){return Wo.get("canvas").createCanvas(e,t)}}class SH extends ik{async _fetch(e){return dk(e)}}class AH extends ck{async _fetch(e){return dk(e)}}const hn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function I0(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class E1{getPattern(){Ue("Abstract method `getPattern` called.")}}class EH extends E1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===hn.STROKE||r===hn.FILL){const o=t.current.getClippedPathBoundingBox(r,Qe(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=Y.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),I0(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else I0(e,this._bbox),i=this._createGradient(e);return i}}function Oy(n,e,t,s,r,i,o,a){const l=e.coords,u=e.colors,d=n.data,f=n.width*4;let p;l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=i,i=o,o=p),l[s+1]>l[r+1]&&(p=s,s=r,r=p,p=o,o=a,a=p),l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=i,i=o,o=p);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,S=(l[s+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,x=(l[r+1]+e.offsetY)*e.scaleY;if(y>=x)return;const b=u[i],C=u[i+1],T=u[i+2],N=u[o],P=u[o+1],k=u[o+2],M=u[a],j=u[a+1],D=u[a+2],R=Math.round(y),O=Math.round(x);let I,B,H,F,L,z,G,X;for(let Z=R;Z<=O;Z++){if(Z<S){const U=Z<y?0:(y-Z)/(y-S);I=m-(m-v)*U,B=b-(b-N)*U,H=C-(C-P)*U,F=T-(T-k)*U}else{let U;Z>x?U=1:S===x?U=0:U=(S-Z)/(S-x),I=v-(v-g)*U,B=N-(N-M)*U,H=P-(P-j)*U,F=k-(k-D)*U}let ie;Z<y?ie=0:Z>x?ie=1:ie=(y-Z)/(y-x),L=m-(m-g)*ie,z=b-(b-M)*ie,G=C-(C-j)*ie,X=T-(T-D)*ie;const be=Math.round(Math.min(I,L)),tt=Math.round(Math.max(I,L));let pe=f*Z+be*4;for(let U=be;U<=tt;U++)ie=(I-U)/(I-L),ie<0?ie=0:ie>1&&(ie=1),d[pe++]=B-(B-z)*ie|0,d[pe++]=H-(H-G)*ie|0,d[pe++]=F-(F-X)*ie|0,d[pe++]=255}}function CH(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,u=a-1;for(i=0;i<l;i++){let d=i*a;for(let f=0;f<u;f++,d++)Oy(n,t,s[d],s[d+1],s[d+a],r[d],r[d+1],r[d+a]),Oy(n,t,s[d+a+1],s[d+1],s[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)Oy(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class _H extends E1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=u/f,y=d/p,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/y},S=f+2*2,g=p+2*2,x=s.getCanvas("mesh",S,g),b=x.context,C=b.createImageData(f,p);if(t){const N=C.data;for(let P=0,k=N.length;P<k;P+=4)N[P]=t[0],N[P+1]=t[1],N[P+2]=t[2],N[P+3]=255}for(const N of this._figures)CH(C,N,v);return b.putImageData(C,2,2),{canvas:x.canvas,offsetX:a-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}getPattern(e,t,s,r){I0(e,this._bbox);let i;if(r===hn.SHADING)i=Y.singularValueDecompose2dScale(Qe(e));else if(i=Y.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Y.singularValueDecompose2dScale(this.matrix);i=[i[0]*a[0],i[1]*a[1]]}const o=this._createMeshCanvas(i,r===hn.SHADING?null:this._background,t.cachedCanvases);return r!==hn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class TH extends E1{getPattern(){return"hotpink"}}function NH(n){switch(n[0]){case"RadialAxial":return new EH(n);case"Mesh":return new _H(n);case"Dummy":return new TH}throw new Error(`Unknown IR type: ${n[0]}`)}const $A={COLORED:1,UNCOLORED:2},zg=class zg{constructor(e,t,s,r,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:r,tilingType:i,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),Rv("TilingType: "+i);const d=t[0],f=t[1],p=t[2],m=t[3],y=p-d,v=m-f,S=Y.singularValueDecompose2dScale(this.matrix),g=Y.singularValueDecompose2dScale(this.baseTransform),x=S[0]*g[0],b=S[1]*g[1];let C=y,T=v,N=!1,P=!1;const k=Math.ceil(l*x),M=Math.ceil(u*b),j=Math.ceil(y*x),D=Math.ceil(v*b);k>=j?C=l:N=!0,M>=D?T=u:P=!0;const R=this.getSizeAndScale(C,this.ctx.canvas.width,x),O=this.getSizeAndScale(T,this.ctx.canvas.height,b),I=e.cachedCanvases.getCanvas("pattern",R.size,O.size),B=I.context,H=a.createCanvasGraphics(B);if(H.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(H,r,o),B.translate(-R.scale*d,-O.scale*f),H.transform(R.scale,0,0,O.scale,0,0),B.save(),this.clipBbox(H,d,f,p,m),H.baseTransform=Qe(H.ctx),H.executeOperatorList(s),H.endDrawing(),B.restore(),N||P){const F=I.canvas;N&&(C=l),P&&(T=u);const L=this.getSizeAndScale(C,this.ctx.canvas.width,x),z=this.getSizeAndScale(T,this.ctx.canvas.height,b),G=L.size,X=z.size,Z=e.cachedCanvases.getCanvas("pattern-workaround",G,X),ie=Z.context,be=N?Math.floor(y/l):0,tt=P?Math.floor(v/u):0;for(let pe=0;pe<=be;pe++)for(let U=0;U<=tt;U++)ie.drawImage(F,G*pe,X*U,G,X,0,0,G,X);return{canvas:Z.canvas,scaleX:L.scale,scaleY:z.scale,offsetX:d,offsetY:f}}return{canvas:I.canvas,scaleX:R.scale,scaleY:O.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(zg.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),e.current.updateRectMinMax(Qe(e.ctx),[t,s,r,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case $A.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case $A.UNCOLORED:const a=Y.makeHexColor(s[0],s[1],s[2]);r.fillStyle=a,r.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new J3(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,r){let i=s;r!==hn.SHADING&&(i=Y.transform(i,t.baseTransform),this.matrix&&(i=Y.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};te(zg,"MAX_PATTERN_SIZE",3e3);let D0=zg;function PH({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=pn.isLittleEndian?4278190080:255,[l,u]=o?[i,a]:[a,i],d=s>>3,f=s&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const S=e+d;e<S;e++){const g=e<p?n[e]:255;t[m++]=g&128?u:l,t[m++]=g&64?u:l,t[m++]=g&32?u:l,t[m++]=g&16?u:l,t[m++]=g&8?u:l,t[m++]=g&4?u:l,t[m++]=g&2?u:l,t[m++]=g&1?u:l}if(f===0)continue;const v=e<p?n[e++]:255;for(let S=0;S<f;S++)t[m++]=v&1<<7-S?u:l}return{srcPos:e,destPos:m}}const BA=16,UA=100,kH=15,VA=10,WA=1e3,_n=16;function RH(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,r){e.translate(s,r),this.__originalTranslate(s,r)},n.scale=function(s,r){e.scale(s,r),this.__originalScale(s,r)},n.transform=function(s,r,i,o,a,l){e.transform(s,r,i,o,a,l),this.__originalTransform(s,r,i,o,a,l)},n.setTransform=function(s,r,i,o,a,l){e.setTransform(s,r,i,o,a,l),this.__originalSetTransform(s,r,i,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class LH{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Vp(n,e,t,s,r,i,o,a,l,u){const[d,f,p,m,y,v]=Qe(n);if(f===0&&p===0){const x=o*d+y,b=Math.round(x),C=a*m+v,T=Math.round(C),N=(o+l)*d+y,P=Math.abs(Math.round(N)-b)||1,k=(a+u)*m+v,M=Math.abs(Math.round(k)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),b,T),n.drawImage(e,t,s,r,i,0,0,P,M),n.setTransform(d,f,p,m,y,v),[P,M]}if(d===0&&m===0){const x=a*p+y,b=Math.round(x),C=o*f+v,T=Math.round(C),N=(a+u)*p+y,P=Math.abs(Math.round(N)-b)||1,k=(o+l)*f+v,M=Math.abs(Math.round(k)-T)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,b,T),n.drawImage(e,t,s,r,i,0,0,M,P),n.setTransform(d,f,p,m,y,v),[M,P]}n.drawImage(e,t,s,r,i,o,a,l,u);const S=Math.hypot(d,f),g=Math.hypot(p,m);return[S*l,g*u]}function MH(n){const{width:e,height:t}=n;if(e>WA||t>WA)return null;const s=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let o=new Uint8Array(i*(t+1)),a,l,u;const d=e+7&-8;let f=new Uint8Array(d*t),p=0;for(const g of n.data){let x=128;for(;x>0;)f[p++]=g&x?0:255,x>>=1}let m=0;for(p=0,f[p]!==0&&(o[0]=1,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[l]=f[p]?2:1,++m),p++;for(f[p]!==0&&(o[l]=2,++m),a=1;a<t;a++){p=a*d,u=a*i,f[p-d]!==f[p]&&(o[u]=f[p]?1:8,++m);let g=(f[p]?4:0)+(f[p-d]?8:0);for(l=1;l<e;l++)g=(g>>2)+(f[p+1]?4:0)+(f[p-d+1]?8:0),r[g]&&(o[u+l]=r[g],++m),p++;if(f[p-d]!==f[p]&&(o[u+l]=f[p]?2:4,++m),m>s)return null}for(p=d*(t-1),u=a*i,f[p]!==0&&(o[u]=8,++m),l=1;l<e;l++)f[p]!==f[p+1]&&(o[u+l]=f[p]?4:8,++m),p++;if(f[p]!==0&&(o[u+l]=4,++m),m>s)return null;const y=new Int32Array([0,i,-1,0,-i,0,0,0,1]),v=new Path2D;for(a=0;m&&a<=t;a++){let g=a*i;const x=g+e;for(;g<x&&!o[g];)g++;if(g===x)continue;v.moveTo(g%i,a);const b=g;let C=o[g];do{const T=y[C];do g+=T;while(!o[g]);const N=o[g];N!==5&&N!==10?(C=N,o[g]=0):(C=N&51*C>>4,o[g]&=C>>2|C<<2),v.lineTo(g%i,g/i|0),o[g]||--m}while(b!==g);--a}return f=null,o=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(v),g.beginPath(),g.restore()}}class GA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=NP,this.textMatrixScale=1,this.fontMatrix=l0,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Gt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=Y.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=Y.applyTransform(t,e),r=Y.applyTransform(t.slice(2),e),i=Y.applyTransform([t[0],t[3]],e),o=Y.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],r[0],i[0],o[0]),this.minY=Math.min(this.minY,s[1],r[1],i[1],o[1]),this.maxX=Math.max(this.maxX,s[0],r[0],i[0],o[0]),this.maxY=Math.max(this.maxY,s[1],r[1],i[1],o[1])}updateScalingPathMinMax(e,t){Y.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,r,i,o,a,l,u,d){const f=Y.bezierBoundingBox(t,s,r,i,o,a,l,u,d);d||this.updateRectMinMax(e,f)}getPathBoundingBox(e=hn.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===hn.STROKE){t||Ue("Stroke bounding box must include transform.");const r=Y.singularValueDecompose2dScale(t),i=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;s[0]-=i,s[1]-=o,s[2]+=i,s[3]+=o}return s}updateClipFromPath(){const e=Y.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=hn.FILL,t=null){return Y.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function qA(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%_n,i=(t-r)/_n,o=r===0?i:i+1,a=n.createImageData(s,_n);let l=0,u;const d=e.data,f=a.data;let p,m,y,v;if(e.kind===mm.GRAYSCALE_1BPP){const S=d.byteLength,g=new Uint32Array(f.buffer,0,f.byteLength>>2),x=g.length,b=s+7>>3,C=4294967295,T=pn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(y=p<i?_n:r,u=0,m=0;m<y;m++){const N=S-l;let P=0;const k=N>b?s:N*8-7,M=k&-8;let j=0,D=0;for(;P<M;P+=8)D=d[l++],g[u++]=D&128?C:T,g[u++]=D&64?C:T,g[u++]=D&32?C:T,g[u++]=D&16?C:T,g[u++]=D&8?C:T,g[u++]=D&4?C:T,g[u++]=D&2?C:T,g[u++]=D&1?C:T;for(;P<k;P++)j===0&&(D=d[l++],j=128),g[u++]=D&j?C:T,j>>=1}for(;u<x;)g[u++]=0;n.putImageData(a,0,p*_n)}}else if(e.kind===mm.RGBA_32BPP){for(m=0,v=s*_n*4,p=0;p<i;p++)f.set(d.subarray(l,l+v)),l+=v,n.putImageData(a,0,m),m+=_n;p<o&&(v=s*r*4,f.set(d.subarray(l,l+v)),n.putImageData(a,0,m))}else if(e.kind===mm.RGB_24BPP)for(y=_n,v=s*y,p=0;p<o;p++){for(p>=i&&(y=r,v=s*y),u=0,m=v;m--;)f[u++]=d[l++],f[u++]=d[l++],f[u++]=d[l++],f[u++]=255;n.putImageData(a,0,p*_n)}else throw new Error(`bad image kind: ${e.kind}`)}function KA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%_n,i=(t-r)/_n,o=r===0?i:i+1,a=n.createImageData(s,_n);let l=0;const u=e.data,d=a.data;for(let f=0;f<o;f++){const p=f<i?_n:r;({srcPos:l}=PH({src:u,srcPos:l,dest:d,width:s,height:p,nonBlackColor:0})),n.putImageData(a,0,f*_n)}}function _d(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Wp(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!nn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function XA(n,e){if(e)return!0;const t=Y.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Vo.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const jH=["butt","round","square"],IH=["miter","round","bevel"],DH={},YA={};var qo,O0,F0;const M1=class M1{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,u){_(this,qo);this.ctx=e,this.current=new GA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new LH(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Qe(this.compositeCtx))}this.ctx.save(),Wp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Qe(this.ctx)}executeOperatorList(e,t,s,r){const i=e.argsArray,o=e.fnArray;let a=t||0;const l=i.length;if(l===a)return a;const u=l-a>VA&&typeof s=="function",d=u?Date.now()+kH:0;let f=0;const p=this.commonObjs,m=this.objs;let y;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,s),a;if(y=o[a],y!==Cs.dependency)this[y].apply(this,i[a]);else for(const v of i[a]){const S=v.startsWith("g_")?p:m;if(!S.has(v))return S.get(v,s),a}if(a++,a===l)return a;if(u&&++f>VA){if(Date.now()>d)return s(),a;f=0}}}endDrawing(){E(this,qo,O0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,qo,F0).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=r,u="prescale1",d,f;for(;i>2&&a>1||o>2&&l>1;){let p=a,m=l;i>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/p),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),d=this.cachedCanvases.getCanvas(u,p,m),f=d.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,a,l,0,0,p,m),e=d.canvas,a=p,l=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,i=this.current.fillColor,o=this.current.patternFill,a=Qe(t);let l,u,d,f;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),i]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const M=l.get(u);if(M&&!o){const j=Math.round(Math.min(a[0],a[2])+a[4]),D=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:j,offsetY:D}}d=M}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),KA(f.context,e));let p=Y.transform(a,[1/s,0,0,-1/r,0,0]);p=Y.transform(p,[1,0,0,1,0,-r]);const[m,y,v,S]=Y.getAxialAlignedBoundingBox([0,0,s,r],p),g=Math.round(v-m)||1,x=Math.round(S-y)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,x),C=b.context,T=m,N=y;C.translate(-T,-N),C.transform(...p),d||(d=this._scaleImage(f.canvas,Rr(C)),d=d.img,l&&o&&l.set(u,d)),C.imageSmoothingEnabled=XA(Qe(C),e.interpolate),Vp(C,d,0,0,d.width,d.height,0,0,s,r),C.globalCompositeOperation="source-in";const P=Y.transform(Rr(C),[1,0,0,1,-T,-N]);return C.fillStyle=o?i.getPattern(t,this,P,hn.FILL):i,C.fillRect(0,0,s,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,b.canvas)),{canvas:b.canvas,offsetX:Math.round(T),offsetY:Math.round(N)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=jH[e]}setLineJoin(e){this.ctx.lineJoin=IH[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const i=this.ctx;i.setTransform(...Qe(this.suspendedCtx)),_d(this.suspendedCtx,i),RH(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_d(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,l,u,d,f){let p=e.canvas,m=l-d,y=u-f;if(o){const S=Y.makeHexColor(...o);if(m<0||y<0||m+s>p.width||y+r>p.height){const g=this.cachedCanvases.getCanvas("maskExtension",s,r),x=g.context;x.drawImage(p,-m,-y),x.globalCompositeOperation="destination-atop",x.fillStyle=S,x.fillRect(0,0,s,r),x.globalCompositeOperation="source-over",p=g.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(m,y,s,r),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(m,y,s,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,u,s,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,s,r,l,u,s,r),t.restore()}save(){this.inSMaskMode?(_d(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_d(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,r,i,o){this.ctx.transform(e,t,s,r,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const r=this.ctx,i=this.current;let o=i.x,a=i.y,l,u;const d=Qe(r),f=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,p=f?s.slice(0):null;for(let m=0,y=0,v=e.length;m<v;m++)switch(e[m]|0){case Cs.rectangle:o=t[y++],a=t[y++];const S=t[y++],g=t[y++],x=o+S,b=a+g;r.moveTo(o,a),S===0||g===0?r.lineTo(x,b):(r.lineTo(x,a),r.lineTo(x,b),r.lineTo(o,b)),f||i.updateRectMinMax(d,[o,a,x,b]),r.closePath();break;case Cs.moveTo:o=t[y++],a=t[y++],r.moveTo(o,a),f||i.updatePathMinMax(d,o,a);break;case Cs.lineTo:o=t[y++],a=t[y++],r.lineTo(o,a),f||i.updatePathMinMax(d,o,a);break;case Cs.curveTo:l=o,u=a,o=t[y+4],a=t[y+5],r.bezierCurveTo(t[y],t[y+1],t[y+2],t[y+3],o,a),i.updateCurvePathMinMax(d,l,u,t[y],t[y+1],t[y+2],t[y+3],o,a,p),y+=6;break;case Cs.curveTo2:l=o,u=a,r.bezierCurveTo(o,a,t[y],t[y+1],t[y+2],t[y+3]),i.updateCurvePathMinMax(d,l,u,o,a,t[y],t[y+1],t[y+2],t[y+3],p),o=t[y+2],a=t[y+3],y+=4;break;case Cs.curveTo3:l=o,u=a,o=t[y+2],a=t[y+3],r.bezierCurveTo(t[y],t[y+1],o,a,o,a),i.updateCurvePathMinMax(d,l,u,t[y],t[y+1],o,a,o,a,p),y+=4;break;case Cs.closePath:r.closePath();break}f&&i.updateScalingPathMinMax(d,p),i.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,Rr(t),hn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let i=!1;r&&(t.save(),t.fillStyle=s.getPattern(t,this,Rr(t),hn.FILL),i=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=DH}eoClip(){this.pendingClip=YA}beginText(){this.current.textMatrix=NP,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||l0,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&de("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const i=s.loadedName||"sans-serif",o=((d=s.systemFontInfo)==null?void 0:d.css)||`"${i}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let u=t;t<BA?u=BA:t>UA&&(u=UA),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,r,i,o){this.current.textMatrix=[e,t,s,r,i,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,r){const i=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,d=l&Gt.FILL_STROKE_MASK,f=!!(l&Gt.ADD_TO_PATH_FLAG),p=o.patternFill&&!a.missingFile;let m;(a.disableFontFace||f||p)&&(m=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||p?(i.save(),i.translate(t,s),i.beginPath(),m(i,u),r&&i.setTransform(...r),(d===Gt.FILL||d===Gt.FILL_STROKE)&&i.fill(),(d===Gt.STROKE||d===Gt.FILL_STROKE)&&i.stroke(),i.restore()):((d===Gt.FILL||d===Gt.FILL_STROKE)&&i.fillText(e,t,s),(d===Gt.STROKE||d===Gt.FILL_STROKE)&&i.strokeText(e,t,s)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Qe(i),x:t,y:s,fontSize:u,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return we(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,f=e.length,p=s.vertical,m=p?1:-1,y=s.defaultVMetrics,v=r*t.fontMatrix[0],S=t.textRenderingMode===Gt.FILL&&!s.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),u>0?i.scale(d,-1):i.scale(d,1);let g;if(t.patternFill){i.save();const N=t.fillColor.getPattern(i,this,Rr(i),hn.FILL);g=Qe(i),i.restore(),i.fillStyle=N}let x=t.lineWidth;const b=t.textMatrixScale;if(b===0||x===0){const N=t.textRenderingMode&Gt.FILL_STROKE_MASK;(N===Gt.STROKE||N===Gt.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=b;if(o!==1&&(i.scale(o,o),x/=o),i.lineWidth=x,s.isInvalidPDFjsFont){const N=[];let P=0;for(const k of e)N.push(k.unicode),P+=k.width;i.fillText(N.join(""),0,0),t.x+=P*v*d,i.restore(),this.compose();return}let C=0,T;for(T=0;T<f;++T){const N=e[T];if(typeof N=="number"){C+=m*N*r/1e3;continue}let P=!1;const k=(N.isSpace?l:0)+a,M=N.fontChar,j=N.accent;let D,R,O=N.width;if(p){const B=N.vmetric||y,H=-(N.vmetric?B[1]:O*.5)*v,F=B[2]*v;O=B?-B[0]:O,D=H/o,R=(C+F)/o}else D=C/o,R=0;if(s.remeasure&&O>0){const B=i.measureText(M).width*1e3/r*o;if(O<B&&this.isFontSubpixelAAEnabled){const H=O/B;P=!0,i.save(),i.scale(H,1),D/=H}else O!==B&&(D+=(O-B)/2e3*r/o)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(S&&!j)i.fillText(M,D,R);else if(this.paintChar(M,D,R,g),j){const B=D+r*j.offset.x/o,H=R-r*j.offset.y/o;this.paintChar(j.fontChar,B,H,g)}}const I=p?O*v-k*u:O*v+k*u;C+=I,P&&i.restore()}p?t.y-=C:t.x+=C*d,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,i=s.fontSize,o=s.fontDirection,a=r.vertical?1:-1,l=s.charSpacing,u=s.wordSpacing,d=s.textHScale*o,f=s.fontMatrix||l0,p=e.length,m=s.textRenderingMode===Gt.INVISIBLE;let y,v,S,g;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(d,o),y=0;y<p;++y){if(v=e[y],typeof v=="number"){g=a*v*i/1e3,this.ctx.translate(g,0),s.x+=g*d;continue}const x=(v.isSpace?u:0)+l,b=r.charProcOperatorList[v.operatorListId];if(!b){de(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(b),this.restore()),S=Y.applyTransform([v.width,0],f)[0]*i+x,t.translate(S,0),s.x+=S*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,i,o){this.ctx.rect(s,r,i-s,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],r=this.baseTransform||Qe(this.ctx),i={createCanvasGraphics:o=>new M1(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new D0(e,s,this.ctx,i,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=Y.makeHexColor(e,t,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=Y.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=NH(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Rr(t),hn.SHADING);const r=Rr(t);if(r){const{width:i,height:o}=t.canvas,[a,l,u,d]=Y.getAxialAlignedBoundingBox([0,0,i,o],r);this.ctx.fillRect(a,l,u-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ue("Should not call beginInlineImage")}beginImageData(){Ue("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Qe(this.ctx),t)){const s=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],s,r),this.current.updateRectMinMax(Qe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Rv("TODO: Support non-isolated groups."),e.knockout&&de("Knockout groups not supported.");const s=Qe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Y.getAxialAlignedBoundingBox(e.bbox,Qe(t));const i=[0,0,t.canvas.width,t.canvas.height];r=Y.intersect(r,i)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,l,u),p=f.context;p.translate(-o,-a),p.transform(...s),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),_d(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Qe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=Y.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,s,r,i){if(E(this,qo,O0).call(this),Wp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,u]=Y.singularValueDecompose2dScale(Qe(this.ctx)),{viewportScale:d}=this,f=Math.ceil(o*this.outputScaleX*d),p=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),Wp(this.ctx)}else Wp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new GA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,qo,F0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=MH(e)),r.compiled)){r.compiled(s);return}const i=this._createMaskCanvas(e),o=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Qe(a);a.transform(t,s,r,i,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,f=o.length;d<f;d+=2){const p=Y.transform(l,[t,s,r,i,o[d],o[d+1]]),[m,y]=Y.applyTransform([0,0],p);a.drawImage(u.canvas,m,y)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:o,width:a,height:l,transform:u}=i,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=d.context;f.save();const p=this.getObject(o,i);KA(f,p),f.globalCompositeOperation="source-in",f.fillStyle=r?s.getPattern(f,this,Rr(t),hn.FILL):s,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),Vp(t,d.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){de("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){de("Dependent image isn't ready yet");return}const o=i.width,a=i.height,l=[];for(let u=0,d=r.length;u<d;u+=2)l.push({transform:[t,0,0,s,r[u],r[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;if(this.save(),!nn){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/t,-1/s);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,s).context;qA(l,e),i=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(i,Rr(r));r.imageSmoothingEnabled=XA(Qe(r),e.interpolate),Vp(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,o).context;qA(l,e),r=this.applyTransferMapsToCanvas(l)}for(const i of t)s.save(),s.transform(...i.transform),s.scale(1,-1),Vp(s,r,i.x,i.y,i.w,i.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===YA?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Qe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(t),u=Math.abs(i);if(l===u)if(e===0)o=a=1/l;else{const d=l*e;o=a=d<1?1/d:1}else if(e===0)o=1/l,a=1/u;else{const d=l*e,f=u*e;o=d<1?1/d:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-s*r),u=Math.hypot(t,s),d=Math.hypot(r,i);if(e===0)o=d/l,a=u/l;else{const f=e*l;o=d>f?d/f:1,a=u>f?u/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=s||1,r===1&&i===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(r,i),o.length>0){const a=Math.max(r,i);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};qo=new WeakSet,O0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},F0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Rc=M1;for(const n in Cs)Rc.prototype[n]!==void 0&&(Rc.prototype[Cs[n]]=Rc.prototype[n]);var sf,rf;class ci{static get workerPort(){return c(this,sf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,sf,e)}static get workerSrc(){return c(this,rf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,rf,e)}}sf=new WeakMap,rf=new WeakMap,_(ci,sf,null),_(ci,rf,"");const Gp={UNKNOWN:0,DATA:1,ERROR:2},dt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function jn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ul(n.message);case"MissingPDFException":return new Bl(n.message);case"PasswordException":return new c0(n.message,n.code);case"UnexpectedResponseException":return new Lv(n.message,n.status);case"UnknownErrorException":return new u0(n.message,n.details);default:return new u0(n.message,n.toString())}}var lu,vs,hk,fk,pk,Am;class zd{constructor(e,t,s){_(this,vs);_(this,lu,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,vs,hk).bind(this),{signal:c(this,lu).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:dt.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Et(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:dt.CANCEL,streamId:i,reason:jn(u)}),d.promise}},s)}destroy(){var e;(e=c(this,lu))==null||e.abort(),A(this,lu,null)}}lu=new WeakMap,vs=new WeakSet,hk=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,vs,pk).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Gp.DATA)r.resolve(e.data);else if(e.callback===Gp.ERROR)r.reject(jn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:Gp.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:Gp.ERROR,callbackId:e.callbackId,reason:jn(o)})});return}if(e.streamId){E(this,vs,fk).call(this,e);return}t(e.data)},fk=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,d=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:dt.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:dt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Et(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:dt.ERROR,streamId:t,reason:jn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(u){u(a(e.data,l))}).then(function(){i.postMessage({sourceName:s,targetName:r,stream:dt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:dt.START_COMPLETE,streamId:t,reason:jn(u)})})},pk=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case dt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(jn(e.reason));break;case dt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(jn(e.reason));break;case dt.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:dt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){var u;l((u=a.onPull)==null?void 0:u.call(a))}).then(function(){i.postMessage({sourceName:s,targetName:r,stream:dt.PULL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:s,targetName:r,stream:dt.PULL_COMPLETE,streamId:t,reason:jn(l)})});break;case dt.ENQUEUE:if(Et(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case dt.CLOSE:if(Et(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,vs,Am).call(this,o,t);break;case dt.ERROR:Et(o,"error should have stream controller"),o.controller.error(jn(e.reason)),E(this,vs,Am).call(this,o,t);break;case dt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(jn(e.reason)),E(this,vs,Am).call(this,o,t);break;case dt.CANCEL:if(!a)break;new Promise(function(l){var u;l((u=a.onCancel)==null?void 0:u.call(a,jn(e.reason)))}).then(function(){i.postMessage({sourceName:s,targetName:r,stream:dt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){i.postMessage({sourceName:s,targetName:r,stream:dt.CANCEL_COMPLETE,streamId:t,reason:jn(l)})}),a.sinkCapability.reject(jn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Am=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var za,of;class OH{constructor({parsedData:e,rawData:t}){_(this,za);_(this,of);A(this,za,e),A(this,of,t)}getRaw(){return c(this,of)}get(e){return c(this,za).get(e)??null}getAll(){return v1(c(this,za))}has(e){return c(this,za).has(e)}}za=new WeakMap,of=new WeakMap;const nc=Symbol("INTERNAL");var af,lf,cf,cu;class FH{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){_(this,af,!1);_(this,lf,!1);_(this,cf,!1);_(this,cu,!0);A(this,af,!!(e&Vn.DISPLAY)),A(this,lf,!!(e&Vn.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(c(this,cf))return c(this,cu);if(!c(this,cu))return!1;const{print:e,view:t}=this.usage;return c(this,af)?(t==null?void 0:t.viewState)!=="OFF":c(this,lf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==nc&&Ue("Internal method `_setVisible` called."),A(this,cf,s),A(this,cu,t)}}af=new WeakMap,lf=new WeakMap,cf=new WeakMap,cu=new WeakMap;var uo,Re,uu,du,uf,H0;class HH{constructor(e,t=Vn.DISPLAY){_(this,uf);_(this,uo,null);_(this,Re,new Map);_(this,uu,null);_(this,du,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,du,e.order);for(const s of e.groups)c(this,Re).set(s.id,new FH(t,s));if(e.baseState==="OFF")for(const s of c(this,Re).values())s._setVisible(nc,!1);for(const s of e.on)c(this,Re).get(s)._setVisible(nc,!0);for(const s of e.off)c(this,Re).get(s)._setVisible(nc,!1);A(this,uu,this.getHash())}}isVisible(e){if(c(this,Re).size===0)return!0;if(!e)return Rv("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Re).has(e.id)?c(this,Re).get(e.id).visible:(de(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,uf,H0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Re).has(t))return de(`Optional content group not found: ${t}`),!0;if(c(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Re).has(t))return de(`Optional content group not found: ${t}`),!0;if(!c(this,Re).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Re).has(t))return de(`Optional content group not found: ${t}`),!0;if(!c(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Re).has(t))return de(`Optional content group not found: ${t}`),!0;if(c(this,Re).get(t).visible)return!1}return!0}return de(`Unknown optional content policy ${e.policy}.`),!0}return de(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=c(this,Re).get(e);if(!r){de(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=c(this,Re).get(a))==null||i._setVisible(nc,!1,!0));r._setVisible(nc,!!t,!0),A(this,uo,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=c(this,Re).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}A(this,uo,null)}get hasInitialVisibility(){return c(this,uu)===null||this.getHash()===c(this,uu)}getOrder(){return c(this,Re).size?c(this,du)?c(this,du).slice():[...c(this,Re).keys()]:null}getGroups(){return c(this,Re).size>0?v1(c(this,Re)):null}getGroup(e){return c(this,Re).get(e)||null}getHash(){if(c(this,uo)!==null)return c(this,uo);const e=new tk;for(const[t,s]of c(this,Re))e.update(`${t}:${s.visible}`);return A(this,uo,e.hexdigest())}}uo=new WeakMap,Re=new WeakMap,uu=new WeakMap,du=new WeakMap,uf=new WeakSet,H0=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=E(this,uf,H0).call(this,i);else if(c(this,Re).has(i))o=c(this,Re).get(i).visible;else return de(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class zH{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Et(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Et(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Et(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new $H(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new BH(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class $H{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=w1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class BH{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function UH(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=l(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function s(d,f){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(d,f){if(d){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(d,{fatal:!0}),m=Mv(f);f=p.decode(m),e=!1}catch{}}return f}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function o(d){const f=[];let p;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(d))!==null;){let[,v,S,g]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[S,g]}const y=[];for(let v=0;v<f.length&&v in f;++v){let[S,g]=f[v];g=a(g),S&&(g=unescape(g),v===0&&(g=l(g))),y.push(g)}return y.join("")}function a(d){if(d.startsWith('"')){const f=d.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}d=f.join('"')}return d}function l(d){const f=d.indexOf("'");if(f===-1)return d;const p=d.slice(0,f),y=d.slice(f+1).replace(/^[^']*'/,"");return r(p,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),r(p,y);try{y=atob(y)}catch{}return r(p,y)})}return""}function C1(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function _1({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function T1(n){const e=n.get("Content-Disposition");if(e){let t=UH(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(w1(t))return t}return null}function Dv(n,e){return n===404||n===0&&e.startsWith("file:")?new Bl('Missing PDF "'+e+'".'):new Lv(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function mk(n){return n===200||n===206}function gk(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vk(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(de(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class QA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=C1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Et(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new VH(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new WH(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class VH{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,gk(s,this._withCredentials,this._abortController)).then(i=>{if(!mk(i.status))throw Dv(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=_1({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=T1(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ul("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vk(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class WH{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,gk(i,this._withCredentials,this._abortController)).then(a=>{if(!mk(a.status))throw Dv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:vk(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Fy=200,Hy=206;function GH(n){const e=n.response;return typeof e!="string"?e:Mv(e).buffer}class qH{constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=C1(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const r={begin:e,end:t};for(const i in s)r[i]=s[i];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Hy):r.expectedStatus=Fy,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){var l,u,d;const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(l=s.onError)==null||l.call(s,r.status);return}const i=r.status||Fy;if(!(i===Fy&&s.expectedStatus===Hy)&&i!==s.expectedStatus){(u=s.onError)==null||u.call(s,r.status);return}const a=GH(r);if(i===Hy){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);s.onDone({begin:parseInt(p[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):(d=s.onError)==null||d.call(s,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class KH{constructor(e){this._source=e,this._manager=new qH(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Et(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new XH(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new YH(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class XH{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...l]=o.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:r,suggestedLength:i}=_1({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=T1(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Dv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class YH{constructor(e,t,s){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Dv(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const QH=/^[a-z][a-z0-9\-+.]+:/i;function ZH(n){if(QH.test(n))return new URL(n);const e=Wo.get("url");return new URL(e.pathToFileURL(n))}function yk(n,e,t){return n.protocol==="http:"?Wo.get("http").request(n,{headers:e},t):Wo.get("https").request(n,{headers:e},t)}class JH{constructor(e){this.source=e,this.url=ZH(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=C1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Et(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new nz(this):new ez(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new sz(this,e,t):new tz(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class xk{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ul("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wk{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ez extends xk{constructor(e){super(e);const t=Object.fromEntries(e.headers),s=r=>{if(r.statusCode===404){const l=new Bl(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(r);const i=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=_1({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=T1(i)};this._request=yk(this._url,t,s),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class tz extends wk{constructor(e,t,s){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${s-1}`;const i=o=>{if(o.statusCode===404){const a=new Bl(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=yk(this._url,r,i),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class nz extends xk{constructor(e){super(e);const t=Wo.get("fs");t.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Bl(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class sz extends wk{constructor(e,t,s){super(e);const r=Wo.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}}const rz=1e5,xn=30,iz=.8;var SE,ho,En,df,hf,$a,Wr,ff,pf,Ba,hu,fu,fo,pu,mf,mu,Ua,gf,vf,it,Va,Wa,yf,po,gu,Ti,bk,Sk,$0,Zn,Em,B0,Ak,Ek;let z0=(it=class{constructor({textContentSource:e,container:t,viewport:s}){_(this,Ti);_(this,ho,Promise.withResolvers());_(this,En,null);_(this,df,!1);_(this,hf,!!((SE=globalThis.FontInspector)!=null&&SE.enabled));_(this,$a,null);_(this,Wr,null);_(this,ff,0);_(this,pf,0);_(this,Ba,null);_(this,hu,null);_(this,fu,0);_(this,fo,0);_(this,pu,Object.create(null));_(this,mf,[]);_(this,mu,null);_(this,Ua,[]);_(this,gf,new WeakMap);_(this,vf,null);var l;if(e instanceof ReadableStream)A(this,mu,e);else if(typeof e=="object")A(this,mu,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,En,A(this,hu,t)),A(this,fo,s.scale*(globalThis.devicePixelRatio||1)),A(this,fu,s.rotation),A(this,Wr,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;A(this,vf,[1,0,0,-1,-o,a+i]),A(this,pf,r),A(this,ff,i),E(l=it,Zn,Ak).call(l),kl(t,s),c(this,ho).promise.finally(()=>{c(it,gu).delete(this),A(this,Wr,null),A(this,pu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return we(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Ba).read().then(({value:t,done:s})=>{if(s){c(this,ho).resolve();return}c(this,$a)??A(this,$a,t.lang),Object.assign(c(this,pu),t.styles),E(this,Ti,bk).call(this,t.items),e()},c(this,ho).reject)};return A(this,Ba,c(this,mu).getReader()),c(it,gu).add(this),e(),c(this,ho).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==c(this,fu)&&(t==null||t(),A(this,fu,r),kl(c(this,hu),{rotation:r})),s!==c(this,fo)){t==null||t(),A(this,fo,s);const o={div:null,properties:null,ctx:E(i=it,Zn,Em).call(i,c(this,$a))};for(const a of c(this,Ua))o.properties=c(this,gf).get(a),o.div=a,E(this,Ti,$0).call(this,o)}}cancel(){var t;const e=new Ul("TextLayer task cancelled.");(t=c(this,Ba))==null||t.cancel(e).catch(()=>{}),A(this,Ba,null),c(this,ho).reject(e)}get textDivs(){return c(this,Ua)}get textContentItemsStr(){return c(this,mf)}static cleanup(){if(!(c(this,gu).size>0)){c(this,Va).clear();for(const{canvas:e}of c(this,Wa).values())e.remove();c(this,Wa).clear()}}},ho=new WeakMap,En=new WeakMap,df=new WeakMap,hf=new WeakMap,$a=new WeakMap,Wr=new WeakMap,ff=new WeakMap,pf=new WeakMap,Ba=new WeakMap,hu=new WeakMap,fu=new WeakMap,fo=new WeakMap,pu=new WeakMap,mf=new WeakMap,mu=new WeakMap,Ua=new WeakMap,gf=new WeakMap,vf=new WeakMap,Va=new WeakMap,Wa=new WeakMap,yf=new WeakMap,po=new WeakMap,gu=new WeakMap,Ti=new WeakSet,bk=function(e){var r,i;if(c(this,df))return;(i=c(this,Wr)).ctx??(i.ctx=E(r=it,Zn,Em).call(r,c(this,$a)));const t=c(this,Ua),s=c(this,mf);for(const o of e){if(t.length>rz){de("Ignoring additional textDivs for performance reasons."),A(this,df,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,En);A(this,En,document.createElement("span")),c(this,En).classList.add("markedContent"),o.id!==null&&c(this,En).setAttribute("id",`${o.id}`),a.append(c(this,En))}else o.type==="endMarkedContent"&&A(this,En,c(this,En).parentNode);continue}s.push(o.str),E(this,Ti,Sk).call(this,o)}},Sk=function(e){var v;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Ua).push(t);const r=Y.transform(c(this,vf),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,pu)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=c(this,hf)&&o.fontSubstitution||o.fontFamily;a=it.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),u=l*E(v=it,Zn,Ek).call(v,a,c(this,$a));let d,f;i===0?(d=r[4],f=r[5]-u):(d=r[4]+u*Math.sin(i),f=r[5]-u*Math.cos(i));const p="calc(var(--scale-factor)*",m=t.style;c(this,En)===c(this,hu)?(m.left=`${(100*d/c(this,pf)).toFixed(2)}%`,m.top=`${(100*f/c(this,ff)).toFixed(2)}%`):(m.left=`${p}${d.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(c(it,po)*l).toFixed(2)}px)`,m.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,hf)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);S!==g&&Math.max(S,g)/Math.min(S,g)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),c(this,gf).set(t,s),c(this,Wr).div=t,c(this,Wr).properties=s,E(this,Ti,$0).call(this,c(this,Wr)),s.hasText&&c(this,En).append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,En).append(S)}},$0=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(c(it,po)>1&&(o=`scale(${1/c(it,po)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:u,fontSize:d}=s;E(a=it,Zn,B0).call(a,r,d*c(this,fo),l);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${u*c(this,fo)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Zn=new WeakSet,Em=function(e=null){let t=c(this,Wa).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Wa).set(e,t),c(this,yf).set(t,{size:0,family:""})}return t},B0=function(e,t,s){const r=c(this,yf).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},Ak=function(){if(c(this,po)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,po,e.getBoundingClientRect().height),e.remove()},Ek=function(e,t){const s=c(this,Va).get(e);if(s)return s;const r=E(this,Zn,Em).call(this,t);r.canvas.width=r.canvas.height=xn,E(this,Zn,B0).call(this,r,xn,e);const i=r.measureText("");let o=i.fontBoundingBoxAscent,a=Math.abs(i.fontBoundingBoxDescent);if(o){const d=o/(o+a);return c(this,Va).set(e,d),r.canvas.width=r.canvas.height=0,d}r.strokeStyle="red",r.clearRect(0,0,xn,xn),r.strokeText("g",0,0);let l=r.getImageData(0,0,xn,xn).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/xn);break}r.clearRect(0,0,xn,xn),r.strokeText("A",0,xn),l=r.getImageData(0,0,xn,xn).data,o=0;for(let d=0,f=l.length;d<f;d+=4)if(l[d]>0){o=xn-Math.floor(d/4/xn);break}r.canvas.width=r.canvas.height=0;const u=o?o/(o+a):iz;return c(this,Va).set(e,u),u},_(it,Zn),_(it,Va,new Map),_(it,Wa,new Map),_(it,yf,new WeakMap),_(it,po,null),_(it,gu,new Set),it);class Rh{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(Rh.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const oz=65536,az=100,lz=5e3,cz=nn?bH:yH,uz=nn?SH:ok,dz=nn?wH:xH,hz=nn?AH:uk;function fz(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new U0,{docId:t}=e,s=n.url?pz(n.url):null,r=n.data?mz(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof Ck?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:oz;let d=n.worker instanceof Lc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Iv(n.docBaseUrl)?n.docBaseUrl:null,m=typeof n.cMapUrl=="string"?n.cMapUrl:null,y=n.cMapPacked!==!1,v=n.CMapReaderFactory||uz,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||hz,x=n.stopAtErrors!==!0,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=n.isEvalSupported!==!1,T=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!nn,N=typeof n.isChrome=="boolean"?n.isChrome:!pn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,k=typeof n.disableFontFace=="boolean"?n.disableFontFace:nn,M=n.fontExtraProperties===!0,j=n.enableXfa===!0,D=n.ownerDocument||globalThis.document,R=n.disableRange===!0,O=n.disableStream===!0,I=n.disableAutoFetch===!0,B=n.pdfBug===!0,H=n.CanvasFactory||cz,F=n.FilterFactory||dz,L=n.enableHWA===!0,z=l?l.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!nn&&!k,X=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:v===ok&&g===uk&&m&&S&&Md(m,document.baseURI)&&Md(S,document.baseURI);n.canvasFactory&&HA("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&HA("`filterFactory`-instance option, please use `FilterFactory` instead.");const Z=null;X3(f);const ie={canvasFactory:new H({ownerDocument:D,enableHWA:L}),filterFactory:new F({docId:t,ownerDocument:D}),cMapReaderFactory:X?null:new v({baseUrl:m,isCompressed:y}),standardFontDataFactory:X?null:new g({baseUrl:S})};if(!d){const pe={verbosity:f,port:ci.workerPort};d=pe.port?Lc.fromPort(pe):new Lc(pe),e._worker=d}const be={docId:t,apiVersion:"4.8.69",data:r,password:a,disableAutoFetch:I,rangeChunkSize:u,length:z,docBaseUrl:p,enableXfa:j,evaluatorOptions:{maxImageSize:b,disableFontFace:k,ignoreErrors:x,isEvalSupported:C,isOffscreenCanvasSupported:T,isChrome:N,canvasMaxAreaInBytes:P,fontExtraProperties:M,useSystemFonts:G,cMapUrl:X?m:null,standardFontDataUrl:X?S:null}},tt={disableFontFace:k,fontExtraProperties:M,ownerDocument:D,pdfBug:B,styleElement:Z,loadingParams:{disableAutoFetch:I,enableXfa:j}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const pe=d.messageHandler.sendWithPromise("GetDocRequest",be,r?[r.buffer]:null);let U;if(l)U=new zH(l,{disableRange:R,disableStream:O});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");let ve;nn?ve=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Md(s)?QA:JH:ve=Md(s)?QA:KH,U=new ve({url:s,length:z,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:R,disableStream:O})}return pe.then(ve=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const je=new zd(t,ve,d.port),J=new xz(je,e,U,tt,ie);e._transport=J,je.send("Ready",null)})}).catch(e._capability.reject),e}function pz(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(nn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function mz(n){if(nn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Mv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ZA(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var $g;const Bg=class Bg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Tt(Bg,$g)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};$g=new WeakMap,_(Bg,$g,0);let U0=Bg,Ck=class{constructor(e,t,s=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class gz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var mo,Gr,fs,sc,Cm;class vz{constructor(e,t,s,r=!1){_(this,fs);_(this,mo,null);_(this,Gr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new FA:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new _k,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new cp({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return we(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:r=Ui.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:f=!1}){var C,T;(C=this._stats)==null||C.time("Overall");const p=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:m,cacheKey:y}=p;A(this,Gr,!1),E(this,fs,Cm).call(this),a||(a=this._transport.getOptionalContentConfig(m));let v=this._intentStates.get(y);v||(v=Object.create(null),this._intentStates.set(y,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const S=!!(m&Vn.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(p));const g=N=>{var P;v.renderTasks.delete(x),(this._maybeCleanupAfterRender||S)&&A(this,Gr,!0),E(this,fs,sc).call(this,!S),N?(x.capability.reject(N),this._abortOperatorList({intentState:v,reason:N instanceof Error?N:new Error(N)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new W0({callback:g,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(v.renderTasks||(v.renderTasks=new Set)).add(x);const b=x.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([N,P])=>{var k;if(this.destroyed){g();return}if((k=this._stats)==null||k.time("Rendering"),!(P.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:N,optionalContentConfig:P}),x.operatorListChanged()}).catch(g),b}getOperatorList({intent:e="display",annotationMode:t=Ui.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Rh.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:u}){if(u){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),A(this,Gr,!1),E(this,fs,Cm).call(this),Promise.all(e)}cleanup(e=!1){A(this,Gr,!0);const t=E(this,fs,sc).call(this,!1);return e&&t&&this._stats&&(this._stats=new FA),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,fs,sc).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=l;const d=()=>{l.read().then(({value:f,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),d())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();E(this,fs,sc).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof x1){let r=az;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ul(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}mo=new WeakMap,Gr=new WeakMap,fs=new WeakSet,sc=function(e=!1){if(E(this,fs,Cm).call(this),!c(this,Gr)||this.destroyed)return!1;if(e)return A(this,mo,setTimeout(()=>{A(this,mo,null),E(this,fs,sc).call(this,!1)},lz)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Gr,!1),!0},Cm=function(){c(this,mo)&&(clearTimeout(c(this,mo)),A(this,mo,null))};var qr,Ug;class yz{constructor(){_(this,qr,new Map);_(this,Ug,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Ug).then(()=>{for(const[r]of c(this,qr))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){de("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,qr).set(t,r)}removeEventListener(e,t){const s=c(this,qr).get(t);s==null||s(),c(this,qr).delete(t)}terminate(){for(const[,e]of c(this,qr))e==null||e();c(this,qr).clear()}}qr=new WeakMap,Ug=new WeakMap;var Vg,Ga,qa,vu,_m,yu,Tm;const Ge=class Ge{constructor({name:e=null,port:t=null,verbosity:s=Y3()}={}){_(this,vu);var r;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=c(Ge,qa))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(Ge,qa)||A(Ge,qa,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return nn?Promise.all([Wo.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new zd("main","worker",e),this._messageHandler.on("ready",function(){}),E(this,vu,_m).call(this)}_initialize(){if(c(Ge,Ga)||c(Ge,yu,Tm)){this._setupFakeWorker();return}let{workerSrc:e}=Ge;try{Ge._isSameOrigin(window.location.href,e)||(e=Ge._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new zd("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}this._messageHandler=s,this._port=t,this._webWorker=t,E(this,vu,_m).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{Rv("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Ge,Ga)||(de("Setting up fake worker."),A(Ge,Ga,!0)),Ge._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new yz;this._port=t;const s=`fake${Tt(Ge,Vg)._++}`,r=new zd(s+"_worker",s,t);e.setup(r,t),this._messageHandler=new zd(s,s+"_worker",t),E(this,vu,_m).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(Ge,qa))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=c(this,qa))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ge(e)}static get workerSrc(){if(ci.workerSrc)return ci.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return we(this,"_setupFakeWorkerGlobal",(async()=>c(this,yu,Tm)?c(this,yu,Tm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Vg=new WeakMap,Ga=new WeakMap,qa=new WeakMap,vu=new WeakSet,_m=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},yu=new WeakSet,Tm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},_(Ge,yu),_(Ge,Vg,0),_(Ge,Ga,!1),_(Ge,qa),nn&&(A(Ge,Ga,!0),ci.workerSrc||(ci.workerSrc="./pdf.worker.mjs")),Ge._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const r=new URL(t,s);return s.origin===r.origin},Ge._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Lc=Ge;var Kr,pr,xu,wu,mr,Ka,$d;class xz{constructor(e,t,s,r,i){_(this,Ka);_(this,Kr,new Map);_(this,pr,new Map);_(this,xu,new Map);_(this,wu,new Map);_(this,mr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new _k,this.fontLoader=new gH({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return we(this,"annotationStorage",new A1)}getRenderingIntent(e,t=Ui.ENABLE,s=null,r=!1,i=!1){let o=Vn.DISPLAY,a=R0;switch(e){case"any":o=Vn.ANY;break;case"display":break;case"print":o=Vn.PRINT;break;default:de(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Vn.PRINT&&s instanceof sk?s:this.annotationStorage;switch(t){case Ui.DISABLE:o+=Vn.ANNOTATIONS_DISABLE;break;case Ui.ENABLE:break;case Ui.ENABLE_FORMS:o+=Vn.ANNOTATIONS_FORMS;break;case Ui.ENABLE_STORAGE:o+=Vn.ANNOTATIONS_STORAGE,a=l.serializable;break;default:de(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Vn.IS_EDITING),i&&(o+=Vn.OPLIST);const{ids:u,hash:d}=l.modifiedIds,f=[o,a.hash,d];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,mr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,pr).values())e.push(r._destroy());c(this,pr).clear(),c(this,xu).clear(),c(this,wu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Kr).clear(),this.filterFactory.destroy(),z0.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ul("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Et(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Et(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Et(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Et(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new gz(s,this))}),e.on("DocException",function(s){let r;switch(s.name){case"PasswordException":r=new c0(s.message,s.code);break;case"InvalidPDFException":r=new PP(s.message);break;case"MissingPDFException":r=new Bl(s.message);break;case"UnexpectedResponseException":r=new Lv(s.message,s.status);break;case"UnknownErrorException":r=new u0(s.message,s.details);break;default:Ue("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",s=>{if(A(this,mr,Promise.withResolvers()),t.onPassword){const r=i=>{i instanceof Error?c(this,mr).reject(i):c(this,mr).resolve({password:i})};try{t.onPassword(r,s.code)}catch(i){c(this,mr).reject(i)}}else c(this,mr).reject(new c0(s.message,s.code));return c(this,mr).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,pr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in i){const m=i.error;de(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const d=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,f=new vH(i,{disableFontFace:a,inspectFont:d});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(s,f)});break;case"CopyLocalImage":const{imageRef:p}=i;Et(p,"The imageRef must be defined.");for(const m of c(this,pr).values())for(const[,y]of m.objs)if((y==null?void 0:y.ref)===p)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=c(this,pr).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":a.objs.resolve(s,o),(o==null?void 0:o.dataLen)>W3&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&de("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,xu).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&c(this,wu).set(i.refStr,e);const o=new vz(t,i,this,this._params.pdfBug);return c(this,pr).set(t,o),o});return c(this,xu).set(t,r),r}getPageIndex(e){return ZA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,Ka,$d).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Ka,$d).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Ka,$d).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,Ka,$d).call(this,"GetOptionalContentConfig").then(t=>new HH(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Kr).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new OH(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Kr).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,pr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Kr).clear(),this.filterFactory.destroy(!0),z0.cleanup()}}cachedPageNumber(e){if(!ZA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,wu).get(t)??null}}Kr=new WeakMap,pr=new WeakMap,xu=new WeakMap,wu=new WeakMap,mr=new WeakMap,Ka=new WeakSet,$d=function(e,t=null){const s=c(this,Kr).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Kr).set(e,r),r};const qp=Symbol("INITIAL_DATA");var Ls,xf,V0;class _k{constructor(){_(this,xf);_(this,Ls,Object.create(null))}get(e,t=null){if(t){const r=E(this,xf,V0).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=c(this,Ls)[e];if(!s||s.data===qp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,Ls)[e];return!!t&&t.data!==qp}resolve(e,t=null){const s=E(this,xf,V0).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,Ls)){const{data:s}=c(this,Ls)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}A(this,Ls,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Ls)){const{data:t}=c(this,Ls)[e];t!==qp&&(yield[e,t])}}}Ls=new WeakMap,xf=new WeakSet,V0=function(e){var t;return(t=c(this,Ls))[e]||(t[e]={...Promise.withResolvers(),data:qp})};var go;class wz{constructor(e){_(this,go,null);A(this,go,e),this.onContinue=null}get promise(){return c(this,go).capability.promise}cancel(e=0){c(this,go).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,go).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,go);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}go=new WeakMap;var vo,Xa;const ua=class ua{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:p=null}){_(this,vo,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new wz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(ua,Xa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(ua,Xa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:i,background:o}=this.params;this.gfx=new Rc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,vo)&&(window.cancelAnimationFrame(c(this,vo)),A(this,vo,null)),c(ua,Xa).delete(this._canvas),this.callback(e||new x1(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,vo,window.requestAnimationFrame(()=>{A(this,vo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(ua,Xa).delete(this._canvas),this.callback())))}};vo=new WeakMap,Xa=new WeakMap,_(ua,Xa,new WeakSet);let W0=ua;const bz="4.8.69",Sz="3634dab10";function JA(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Td(n){return Math.max(0,Math.min(255,255*n))}class eE{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Td(e),[e,e,e]}static G_HTML([e]){const t=JA(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Td)}static RGB_HTML(e){return`#${e.map(JA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Td(1-Math.min(1,e+r)),Td(1-Math.min(1,s+r)),Td(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class Az{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ue("Abstract method `_createSVG` called.")}}class N1 extends Az{_createSVG(e){return document.createElementNS(Mr,e)}}class Tk{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var f,p;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);o.append(m),a&&Rh.shouldBuildText(r.name)&&u.push(m)}return{textDivs:u}}const d=[[r,-1,o]];for(;d.length>0;){const[m,y,v]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const S=m.children[++d.at(-1)[1]];if(S===null)continue;const{name:g}=S;if(g==="#text"){const b=document.createTextNode(S.value);u.push(b),v.append(b);continue}const x=(f=S==null?void 0:S.attributes)!=null&&f.xmlns?document.createElementNS(S.attributes.xmlns,g):document.createElement(g);if(v.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:t,intent:i,linkService:s}),((p=S.children)==null?void 0:p.length)>0)d.push([S,-1,x]);else if(S.value){const b=document.createTextNode(S.value);a&&Rh.shouldBuildText(g)&&u.push(b),x.append(b)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dp=1e3,Ez=9,Ll=new WeakSet;function vi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class Cz{static create(e){switch(e.data.annotationType){case vt.LINK:return new Nk(e);case vt.TEXT:return new _z(e);case vt.WIDGET:switch(e.data.fieldType){case"Tx":return new Tz(e);case"Btn":return e.data.radioButton?new Rk(e):e.data.checkBox?new Pz(e):new kz(e);case"Ch":return new Rz(e);case"Sig":return new Nz(e)}return new Vl(e);case vt.POPUP:return new q0(e);case vt.FREETEXT:return new Dk(e);case vt.LINE:return new Mz(e);case vt.SQUARE:return new jz(e);case vt.CIRCLE:return new Iz(e);case vt.POLYLINE:return new Ok(e);case vt.CARET:return new Oz(e);case vt.INK:return new P1(e);case vt.POLYGON:return new Dz(e);case vt.HIGHLIGHT:return new Fk(e);case vt.UNDERLINE:return new Fz(e);case vt.SQUIGGLY:return new Hz(e);case vt.STRIKEOUT:return new zz(e);case vt.STAMP:return new Hk(e);case vt.FILEATTACHMENT:return new $z(e);default:return new ut(e)}}}var Ya,bu,Su,wf,G0;const j1=class j1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){_(this,wf);_(this,Ya,null);_(this,bu,!1);_(this,Su,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return j1._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;c(this,Ya)||A(this,Ya,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&E(this,wf,G0).call(this,t),(s=c(this,Su))==null||s.popup.updateEdited(e)}resetEdited(){var e;c(this,Ya)&&(E(this,wf,G0).call(this,c(this,Ya).rect),(e=c(this,Su))==null||e.popup.resetEdited(),A(this,Ya,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Vl||(i.tabIndex=dp);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof q0){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:a,height:l}=vi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(v>0||S>0){const x=`calc(${v}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;o.borderRadius=x}else if(this instanceof Rk){const x=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=x}switch(t.borderStyle.style){case Cd.SOLID:o.borderStyle="solid";break;case Cd.DASHED:o.borderStyle="dashed";break;case Cd.BEVELED:de("Unimplemented border style: beveled");break;case Cd.INSET:de("Unimplemented border style: inset");break;case Cd.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(A(this,bu,!0),o.borderColor=Y.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=Y.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:f,pageX:p,pageY:m}=r.rawDims;o.left=`${100*(u[0]-p)/d}%`,o.top=`${100*(u[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/d}%`,o.height=`${100*l/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims,{width:i,height:o}=vi(this.data.rect);let a,l;e%180===0?(a=100*i/s,l=100*o/r):(a=100*o/s,l=100*i/r),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=eE[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:eE[`${o}_rgb`](a)})};return we(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,S,g,x]=e.subarray(2,6);if(r===v&&i===S&&t===g&&s===x)return}const{style:o}=this.container;let a;if(c(this,bu)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=r-t,u=i-s,{svgFactory:d}=this,f=d.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=d.createElement("defs");f.append(p);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let v=2,S=e.length;v<S;v+=8){const g=e[v],x=e[v+1],b=e[v+2],C=e[v+3],T=d.createElement("rect"),N=(b-t)/l,P=(i-x)/u,k=(g-b)/l,M=(x-C)/u;T.setAttribute("x",N),T.setAttribute("y",P),T.setAttribute("width",k),T.setAttribute("height",M),m.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${P}" width="${k}" height="${M}"/>`)}c(this,bu)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=A(this,Su,new q0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ll.has(u)){de(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Ll.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ya=new WeakMap,bu=new WeakMap,Su=new WeakMap,wf=new WeakSet,G0=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:d}=vi(e);t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*u/i}%`,t.height=`${100*d/o}%`):this.setRotation(r)};let ut=j1;var Kn,ia,Pk,kk;class Nk extends ut{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});_(this,Kn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action),i=!0):t.attachment?(E(this,Kn,Pk).call(this,r,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(E(this,Kn,kk).call(this,r,t.setOCGState),i=!0):t.dest?(this._bindLink(r,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,Kn,ia).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),E(this,Kn,ia).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),E(this,Kn,ia).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,Kn,ia).call(this),!this._fieldObjects){de('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:v}of y)p.add(v)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===a&&l.push(y)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const u=this.annotationStorage,d=[];for(const p of l){const{id:m}=p;switch(d.push(m),p.type){case"text":{const v=p.defaultValue||"";u.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;u.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";u.setValue(m,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Ll.has(y)){de(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Kn=new WeakSet,ia=function(){this.container.setAttribute("data-internal-link","")},Pk=function(t,s,r=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(s.content,s.filename,r),!1},E(this,Kn,ia).call(this)},kk=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),E(this,Kn,ia).call(this)};class _z extends ut{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Vl extends ut{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[l,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Y.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Ez,i=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(jy*r))||1,f=u/d;o=Math.min(r,l(f/jy))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(u/jy))}i.fontSize=`calc(${o}px * var(--scale-factor))`,i.color=Y.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Tz extends Vl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ll.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=dp,this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";s.value=d.userValue=m,d.formattedValue=null});let f=p=>{const{formattedValue:m}=d;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",m=>{var v;if(d.focused)return;const{target:y}=m;d.userValue&&(y.value=d.userValue),d.lastCommittedValue=y.value,d.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(v){d.userValue=v.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:S}=v.detail;d.formattedValue=S,S!=null&&v.target!==document.activeElement&&(v.target.value=S),e.setValue(t,{formattedValue:S})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var b;const{charLimit:S}=v.detail,{target:g}=v;if(S===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",S);let x=d.userValue;!x||x.length<=S||(x=x.slice(0,S),g.value=d.userValue=x,e.setValue(t,{value:x}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),s.addEventListener("keydown",m=>{var S;d.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(d.commitKey=3),y===-1)return;const{value:v}=m.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",m=>{var v,S;if(!d.focused||!m.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(d.focused=!1);const{value:y}=m.target;d.userValue=y,d.lastCommittedValue!==y&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:d.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",m=>{var T;d.lastCommittedValue=null;const{data:y,target:v}=m,{value:S,selectionStart:g,selectionEnd:x}=v;let b=g,C=x;switch(m.inputType){case"deleteWordBackward":{const N=S.substring(0,g).match(/\w*[^\w]*$/);N&&(b-=N[0].length);break}case"deleteWordForward":{const N=S.substring(g).match(/^[^\w]*\w*/);N&&(C+=N[0].length);break}case"deleteContentBackward":g===x&&(b-=1);break;case"deleteContentForward":g===x&&(C+=1);break}m.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:y||"",willCommit:!1,selStart:b,selEnd:C}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Nz extends Vl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Pz extends Vl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Ll.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=dp,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s)){const d=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Rk extends Vl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Ll.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=dp,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const d=o===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const p=d&&f.id===s;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class kz extends Nk{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class Rz extends Vl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Ll.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=dp;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===f});for(const d of this.data.options){const f=document.createElement("option");f.textContent=d.displayValue,f.value=d.exportValue,s.value.includes(d.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),o=()=>{d.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=d=>{const f=d?"value":"textContent",{options:p,multiple:m}=r;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const u=d=>{const f=d.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const f={value(p){o==null||o();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const v of r.options)v.selected=y.has(v.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){r.multiple=!0},remove(p){const m=r.options,y=p.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,S=>S.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:u(p)}),l=a(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:m,displayValue:y,exportValue:v}=p.detail.insert,S=r.children[m],g=document.createElement("option");g.textContent=y,g.value=v,S?S.before(g):r.append(g),e.setValue(t,{value:a(!0),items:u(p)}),l=a(!1)},items(p){const{items:m}=p.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:v,exportValue:S}=y,g=document.createElement("option");g.textContent=v,g.value=S,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(p)}),l=a(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,d)}),r.addEventListener("input",d=>{var m;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class q0 extends ut{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:ut._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Lz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${y1}${s}`).join(",")),this.container}}var Au,Wg,Gg,Eu,Qa,rt,Xr,Cu,bf,Sf,_u,Yr,Ms,Qr,Af,Zr,Ef,Za,Ja,De,Nm,K0,Lk,Mk,jk,Ik,Pm,km,X0;class Lz{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:u,parentRect:d,open:f}){_(this,De);_(this,Au,E(this,De,jk).bind(this));_(this,Wg,E(this,De,X0).bind(this));_(this,Gg,E(this,De,km).bind(this));_(this,Eu,E(this,De,Pm).bind(this));_(this,Qa,null);_(this,rt,null);_(this,Xr,null);_(this,Cu,null);_(this,bf,null);_(this,Sf,null);_(this,_u,null);_(this,Yr,!1);_(this,Ms,null);_(this,Qr,null);_(this,Af,null);_(this,Zr,null);_(this,Ef,null);_(this,Za,null);_(this,Ja,!1);var p;A(this,rt,e),A(this,Ef,r),A(this,Xr,o),A(this,Zr,a),A(this,Sf,l),A(this,Qa,t),A(this,Af,u),A(this,_u,d),A(this,bf,s),A(this,Cu,b1.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",c(this,Eu)),m.addEventListener("mouseenter",c(this,Gg)),m.addEventListener("mouseleave",c(this,Wg)),m.classList.add("popupTriggerArea");for(const m of s)(p=m.container)==null||p.addEventListener("keydown",c(this,Au));c(this,rt).hidden=!0,f&&E(this,De,Pm).call(this)}render(){if(c(this,Ms))return;const e=A(this,Ms,document.createElement("div"));if(e.className="popup",c(this,Qa)){const i=e.style.outlineColor=Y.makeHexColor(...c(this,Qa));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=Y.makeHexColor(...c(this,Qa).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=c(this,Ef),e.append(t),c(this,Cu)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Cu).valueOf()})),t.append(i)}const r=c(this,De,Nm);if(r)Tk.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(c(this,Xr));e.append(i)}c(this,rt).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,o=r.length;i<o;++i){const a=r[i];s.append(document.createTextNode(a)),i<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;c(this,Za)||A(this,Za,{contentsObj:c(this,Xr),richText:c(this,Zr)}),e&&A(this,Qr,null),t&&(A(this,Zr,E(this,De,Mk).call(this,t)),A(this,Xr,null)),(s=c(this,Ms))==null||s.remove(),A(this,Ms,null)}resetEdited(){var e;c(this,Za)&&({contentsObj:Tt(this,Xr)._,richText:Tt(this,Zr)._}=c(this,Za),A(this,Za,null),(e=c(this,Ms))==null||e.remove(),A(this,Ms,null),A(this,Qr,null))}forceHide(){A(this,Ja,this.isVisible),c(this,Ja)&&(c(this,rt).hidden=!0)}maybeShow(){c(this,Ja)&&(c(this,Ms)||E(this,De,km).call(this),A(this,Ja,!1),c(this,rt).hidden=!1)}get isVisible(){return c(this,rt).hidden===!1}}Au=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,Eu=new WeakMap,Qa=new WeakMap,rt=new WeakMap,Xr=new WeakMap,Cu=new WeakMap,bf=new WeakMap,Sf=new WeakMap,_u=new WeakMap,Yr=new WeakMap,Ms=new WeakMap,Qr=new WeakMap,Af=new WeakMap,Zr=new WeakMap,Ef=new WeakMap,Za=new WeakMap,Ja=new WeakMap,De=new WeakSet,Nm=function(){const e=c(this,Zr),t=c(this,Xr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Zr).html||null},K0=function(){var e,t,s;return((s=(t=(e=c(this,De,Nm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Lk=function(){var e,t,s;return((s=(t=(e=c(this,De,Nm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Mk=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,De,Lk),fontSize:c(this,De,K0)?`calc(${c(this,De,K0)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},jk=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Yr))&&E(this,De,Pm).call(this)},Ik=function(){if(c(this,Qr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=c(this,Sf);let o=!!c(this,_u),a=o?c(this,_u):c(this,Af);for(const y of c(this,bf))if(!a||Y.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=Y.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,f=l[0]+d,p=l[1];A(this,Qr,[100*(f-r)/t,100*(p-i)/s]);const{style:m}=c(this,rt);m.left=`${c(this,Qr)[0]}%`,m.top=`${c(this,Qr)[1]}%`},Pm=function(){A(this,Yr,!c(this,Yr)),c(this,Yr)?(E(this,De,km).call(this),c(this,rt).addEventListener("click",c(this,Eu)),c(this,rt).addEventListener("keydown",c(this,Au))):(E(this,De,X0).call(this),c(this,rt).removeEventListener("click",c(this,Eu)),c(this,rt).removeEventListener("keydown",c(this,Au)))},km=function(){c(this,Ms)||this.render(),this.isVisible?c(this,Yr)&&c(this,rt).classList.add("focused"):(E(this,De,Ik).call(this),c(this,rt).hidden=!1,c(this,rt).style.zIndex=parseInt(c(this,rt).style.zIndex)+1e3)},X0=function(){c(this,rt).classList.remove("focused"),!(c(this,Yr)||!this.isVisible)&&(c(this,rt).hidden=!0,c(this,rt).style.zIndex=parseInt(c(this,rt).style.zIndex)-1e3)};class Dk extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=le.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Cf;class Mz extends ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Cf,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:r}=vi(t.rect),i=this.svgFactory.create(s,r,!0),o=A(this,Cf,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Cf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cf=new WeakMap;var _f;class jz extends ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,_f,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:r}=vi(t.rect),i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=A(this,_f,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,_f)}addHighlightArea(){this.container.classList.add("highlightArea")}}_f=new WeakMap;var Tf;class Iz extends ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Tf,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:r}=vi(t.rect),i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=A(this,Tf,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Tf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tf=new WeakMap;var Nf;class Ok extends ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Nf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i}}=this;if(!s)return this.container;const{width:o,height:a}=vi(t),l=this.svgFactory.create(o,a,!0);let u=[];for(let f=0,p=s.length;f<p;f+=2){const m=s[f]-t[0],y=t[3]-s[f+1];u.push(`${m},${y}`)}u=u.join(" ");const d=A(this,Nf,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Nf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nf=new WeakMap;class Dz extends Ok{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Oz extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Pf;class P1 extends ut{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});_(this,Pf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?le.HIGHLIGHT:le.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:s,borderStyle:r,popupRef:i}}=this,{width:o,height:a}=vi(t),l=this.svgFactory.create(o,a,!0);for(const u of s){let d=[];for(let p=0,m=u.length;p<m;p+=2){const y=u[p]-t[0],v=t[3]-u[p+1];d.push(`${y},${v}`)}d=d.join(" ");const f=this.svgFactory.createElement(this.svgElementName);c(this,Pf).push(f),f.setAttribute("points",d),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),l.append(f)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,Pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pf=new WeakMap;class Fk extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=le.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Fz extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Hz extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class zz extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Hk extends ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=le.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kf,Rf,Y0;class $z extends ut{constructor(t){var r;super(t,{isRenderable:!0});_(this,Rf);_(this,kf,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,Rf,Y0).bind(this)),A(this,kf,r);const{isMac:i}=pn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&E(this,Rf,Y0).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,kf)}addHighlightArea(){this.container.classList.add("highlightArea")}}kf=new WeakMap,Rf=new WeakSet,Y0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Lf,el,tl,Mf,Il,zk,Q0,AE;let Bz=(AE=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a}){_(this,Il);_(this,Lf,null);_(this,el,null);_(this,tl,new Map);_(this,Mf,null);this.div=e,A(this,Lf,t),A(this,el,s),A(this,Mf,a||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return c(this,tl).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;kl(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new N1,annotationStorage:e.annotationStorage||new A1,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===vt.POPUP;if(l){const f=r.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:p}=vi(a.rect);if(f<=0||p<=0)continue}i.data=a;const u=Cz.create(i);if(!u.isRenderable)continue;if(!l&&a.popupRef){const f=r.get(a.popupRef);f?f.push(u):r.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await E(this,Il,zk).call(this,d,a.id),u._isEditable&&(c(this,tl).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}E(this,Il,Q0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,kl(t,{rotation:e.rotation}),E(this,Il,Q0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,tl).values())}getEditableAnnotation(e){return c(this,tl).get(e)}},Lf=new WeakMap,el=new WeakMap,tl=new WeakMap,Mf=new WeakMap,Il=new WeakSet,zk=async function(e,t){var o,a;const s=e.firstChild||e,r=s.id=`${y1}${t}`,i=await((o=c(this,Mf))==null?void 0:o.getAriaAttributes(r));if(i)for(const[l,u]of i)s.setAttribute(l,u);this.div.append(e),(a=c(this,Lf))==null||a.moveElementInDOM(this.div,e,s,!1)},Q0=function(){if(!c(this,el))return;const e=this.div;for(const[t,s]of c(this,el)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:i}=r;i?i.nodeName==="CANVAS"?i.replaceWith(s):i.classList.contains("annotationContent")?i.after(s):i.before(s):r.append(s)}c(this,el).clear()},AE);const Kp=/\r\n?|\n/g;var js,Fn,jf,nl,Hn,mt,$k,Bk,Uk,Rm,wi,Lm,Mm,Vk,J0,Wk;const He=class He extends Le{constructor(t){super({...t,name:"freeTextEditor"});_(this,mt);_(this,js);_(this,Fn,"");_(this,jf,`${this.id}-editor`);_(this,nl,null);_(this,Hn);A(this,js,t.color||He._defaultColor||Le._defaultLineColor),A(this,Hn,t.fontSize||He._defaultFontSize)}static get _keyboardManager(){const t=He.prototype,s=o=>o.isEmpty(),r=Rl.TRANSLATE_SMALL,i=Rl.TRANSLATE_BIG;return we(this,"_keyboardManager",new up([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){Le.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ne.FREETEXT_SIZE:He._defaultFontSize=s;break;case ne.FREETEXT_COLOR:He._defaultColor=s;break}}updateParams(t,s){switch(t){case ne.FREETEXT_SIZE:E(this,mt,$k).call(this,s);break;case ne.FREETEXT_COLOR:E(this,mt,Bk).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ne.FREETEXT_SIZE,He._defaultFontSize],[ne.FREETEXT_COLOR,He._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[ne.FREETEXT_SIZE,c(this,Hn)],[ne.FREETEXT_COLOR,c(this,js)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-He._internalPadding*t,-(He._internalPadding+c(this,Hn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(le.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,nl,new AbortController);const t=this._uiManager.combinedSignal(c(this,nl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,jf)),this._isDraggable=!0,(t=c(this,nl))==null||t.abort(),A(this,nl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Fn),s=A(this,Fn,E(this,mt,Uk).call(this).trimEnd());if(t===s)return;const r=i=>{if(A(this,Fn,i),!i){this.remove();return}E(this,mt,Mm).call(this),this._uiManager.rebuild(this),E(this,mt,Rm).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),E(this,mt,Rm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){He._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,jf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Hn)}px * var(--scale-factor))`,r.color=c(this,js),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Eg(this,this.div,["dblclick","keydown"]),this.width){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,v;switch(this.rotation){case 0:y=t+(a[0]-p)/d,v=s+this.height-(a[1]-m)/f;break;case 90:y=t+(a[0]-p)/d,v=s-(a[1]-m)/f,[l,u]=[u,-l];break;case 180:y=t-this.width+(a[0]-p)/d,v=s-(a[1]-m)/f,[l,u]=[-l,-u];break;case 270:y=t+(a[0]-p-this.height*f)/d,v=s+(a[1]-m-this.width*d)/f,[l,u]=[-u,l];break}this.setAt(y*i,v*o,l,u)}else this.setAt(t*i,s*o,this.width*i,this.height*o);E(this,mt,Mm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,v,S;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=E(y=He,wi,J0).call(y,s.getData("text")||"").replaceAll(Kp,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(Kp,"")),g!==this.editorDiv){let x=d;for(const b of this.editorDiv.childNodes){if(b===g){x=f;continue}x.push(E(v=He,wi,Lm).call(v,b))}}d.push(l.nodeValue.slice(0,u).replaceAll(Kp,""))}else if(l===this.editorDiv){let g=d,x=0;for(const b of this.editorDiv.childNodes)x++===u&&(g=f),g.push(E(S=He,wi,Lm).call(S,b))}A(this,Fn,`${d.join(`
`)}${i}${f.join(`
`)}`),E(this,mt,Mm).call(this);const p=new Range;let m=d.reduce((g,x)=>g+x.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const x=g.nodeValue.length;if(m<=x){p.setStart(g,m),p.setEnd(g,m);break}m-=x}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,r){var a;let i=null;if(t instanceof Dk){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:p,popupRef:m},textContent:y,textPosition:v,parent:{page:{pageNumber:S}}}=t;if(!y||y.length===0)return null;i=t={annotationType:le.FREETEXT,color:Array.from(u),fontSize:l,value:y.join(`
`),position:v,pageIndex:S-1,rect:d.slice(0),rotation:f,id:p,deleted:!1,popupRef:m}}const o=await super.deserialize(t,s,r);return A(o,Hn,t.fontSize),A(o,js,Y.makeHexColor(...t.color)),A(o,Fn,E(a=He,wi,J0).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=i,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=He._internalPadding*this.parentScale,r=this.getRect(s,s),i=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,js)),o={annotationType:le.FREETEXT,color:i,fontSize:c(this,Hn),value:E(this,mt,Vk).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!E(this,mt,Wk).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:r}=s;r.fontSize=`calc(${c(this,Hn)}px * var(--scale-factor))`,r.color=c(this,js),s.replaceChildren();for(const o of c(this,Fn).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const i=He._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:c(this,Fn)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};js=new WeakMap,Fn=new WeakMap,jf=new WeakMap,nl=new WeakMap,Hn=new WeakMap,mt=new WeakSet,$k=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-c(this,Hn))*this.parentScale),A(this,Hn,i),E(this,mt,Rm).call(this)},r=c(this,Hn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Bk=function(t){const s=i=>{A(this,js,this.editorDiv.style.color=i)},r=c(this,js);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Uk=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(E(r=He,wi,Lm).call(r,i)),s=i);return t.join(`
`)},Rm=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},wi=new WeakSet,Lm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Kp,"")},Mm=function(){if(this.editorDiv.replaceChildren(),!!c(this,Fn))for(const t of c(this,Fn).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Vk=function(){return c(this,Fn).replaceAll(" "," ")},J0=function(t){return t.replaceAll(" "," ")},Wk=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},_(He,wi),te(He,"_freeTextDefaultContent",""),te(He,"_internalPadding",0),te(He,"_defaultColor",null),te(He,"_defaultFontSize",10),te(He,"_type","freetext"),te(He,"_editorType",le.FREETEXT);let Z0=He;class Gk{toSVGPath(){Ue("Abstract method `toSVGPath` must be implemented.")}get box(){Ue("Abstract getter `box` must be implemented.")}serialize(e,t){Ue("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ue("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ue("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var zn,Is,Tu,Nu,gr,fe,sl,rl,If,Df,Pu,ku,yo,Of,qg,Kg,_t,Bd,qk,Kk,Xk,Yk,Qk,Zk;const Dr=class Dr{constructor({x:e,y:t},s,r,i,o,a=0){_(this,_t);_(this,zn);_(this,Is,[]);_(this,Tu);_(this,Nu);_(this,gr,[]);_(this,fe,new Float64Array(18));_(this,sl);_(this,rl);_(this,If);_(this,Df);_(this,Pu);_(this,ku);_(this,yo,[]);A(this,zn,s),A(this,ku,i*r),A(this,Nu,o),c(this,fe).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Tu,a),A(this,Df,c(Dr,Of)*r),A(this,If,c(Dr,Kg)*r),A(this,Pu,r),c(this,yo).push(e,t)}isEmpty(){return isNaN(c(this,fe)[8])}add({x:e,y:t}){var M;A(this,sl,e),A(this,rl,t);const[s,r,i,o]=c(this,zn);let[a,l,u,d]=c(this,fe).subarray(8,12);const f=e-u,p=t-d,m=Math.hypot(f,p);if(m<c(this,If))return!1;const y=m-c(this,Df),v=y/m,S=v*f,g=v*p;let x=a,b=l;a=u,l=d,u+=S,d+=g,(M=c(this,yo))==null||M.push(e,t);const C=-g/y,T=S/y,N=C*c(this,ku),P=T*c(this,ku);return c(this,fe).set(c(this,fe).subarray(2,8),0),c(this,fe).set([u+N,d+P],4),c(this,fe).set(c(this,fe).subarray(14,18),12),c(this,fe).set([u-N,d-P],16),isNaN(c(this,fe)[6])?(c(this,gr).length===0&&(c(this,fe).set([a+N,l+P],2),c(this,gr).push(NaN,NaN,NaN,NaN,(a+N-s)/i,(l+P-r)/o),c(this,fe).set([a-N,l-P],14),c(this,Is).push(NaN,NaN,NaN,NaN,(a-N-s)/i,(l-P-r)/o)),c(this,fe).set([x,b,a,l,u,d],6),!this.isEmpty()):(c(this,fe).set([x,b,a,l,u,d],6),Math.abs(Math.atan2(b-l,x-a)-Math.atan2(g,S))<Math.PI/2?([a,l,u,d]=c(this,fe).subarray(2,6),c(this,gr).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/i,((l+d)/2-r)/o),[a,l,x,b]=c(this,fe).subarray(14,18),c(this,Is).push(NaN,NaN,NaN,NaN,((x+a)/2-s)/i,((b+l)/2-r)/o),!0):([x,b,a,l,u,d]=c(this,fe).subarray(0,6),c(this,gr).push(((x+5*a)/6-s)/i,((b+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+d)/6-r)/o,((a+u)/2-s)/i,((l+d)/2-r)/o),[u,d,a,l,x,b]=c(this,fe).subarray(12,18),c(this,Is).push(((x+5*a)/6-s)/i,((b+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+d)/6-r)/o,((a+u)/2-s)/i,((l+d)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,gr),t=c(this,Is);if(isNaN(c(this,fe)[6])&&!this.isEmpty())return E(this,_t,qk).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,_t,Xk).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,_t,Kk).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new Jk(e,t,s,r,i,o)}getOutlines(){var f;const e=c(this,gr),t=c(this,Is),s=c(this,fe),[r,i,o,a]=c(this,zn),l=new Float64Array((((f=c(this,yo))==null?void 0:f.length)??0)+2);for(let p=0,m=l.length-2;p<m;p+=2)l[p]=(c(this,yo)[p]-r)/o,l[p+1]=(c(this,yo)[p+1]-i)/a;if(l[l.length-2]=(c(this,sl)-r)/o,l[l.length-1]=(c(this,rl)-i)/a,isNaN(s[6])&&!this.isEmpty())return E(this,_t,Yk).call(this,l);const u=new Float64Array(c(this,gr).length+24+c(this,Is).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}d=E(this,_t,Zk).call(this,u,d);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[p+m],u[d+1]=t[p+m+1],d+=2}return E(this,_t,Qk).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,zn),c(this,Pu),c(this,Tu),c(this,Nu))}};zn=new WeakMap,Is=new WeakMap,Tu=new WeakMap,Nu=new WeakMap,gr=new WeakMap,fe=new WeakMap,sl=new WeakMap,rl=new WeakMap,If=new WeakMap,Df=new WeakMap,Pu=new WeakMap,ku=new WeakMap,yo=new WeakMap,Of=new WeakMap,qg=new WeakMap,Kg=new WeakMap,_t=new WeakSet,Bd=function(){const e=c(this,fe).subarray(4,6),t=c(this,fe).subarray(16,18),[s,r,i,o]=c(this,zn);return[(c(this,sl)+(e[0]-t[0])/2-s)/i,(c(this,rl)+(e[1]-t[1])/2-r)/o,(c(this,sl)+(t[0]-e[0])/2-s)/i,(c(this,rl)+(t[1]-e[1])/2-r)/o]},qk=function(){const[e,t,s,r]=c(this,zn),[i,o,a,l]=E(this,_t,Bd).call(this);return`M${(c(this,fe)[2]-e)/s} ${(c(this,fe)[3]-t)/r} L${(c(this,fe)[4]-e)/s} ${(c(this,fe)[5]-t)/r} L${i} ${o} L${a} ${l} L${(c(this,fe)[16]-e)/s} ${(c(this,fe)[17]-t)/r} L${(c(this,fe)[14]-e)/s} ${(c(this,fe)[15]-t)/r} Z`},Kk=function(e){const t=c(this,Is);e.push(`L${t[4]} ${t[5]} Z`)},Xk=function(e){const[t,s,r,i]=c(this,zn),o=c(this,fe).subarray(4,6),a=c(this,fe).subarray(16,18),[l,u,d,f]=E(this,_t,Bd).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${l} ${u} L${d} ${f} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},Yk=function(e){const t=c(this,fe),[s,r,i,o]=c(this,zn),[a,l,u,d]=E(this,_t,Bd).call(this),f=new Float64Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,c(this,zn),c(this,Pu),c(this,Tu),c(this,Nu))},Qk=function(e,t){const s=c(this,Is);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Zk=function(e,t){const s=c(this,fe).subarray(4,6),r=c(this,fe).subarray(16,18),[i,o,a,l]=c(this,zn),[u,d,f,p]=E(this,_t,Bd).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],t),t+=24},_(Dr,Of,8),_(Dr,qg,2),_(Dr,Kg,c(Dr,Of)+c(Dr,qg));let _g=Dr;var Ru,il,Jr,Ff,$n,Hf,at,Pn,Ud,Vd,eR;class Jk extends Gk{constructor(t,s,r,i,o,a){super();_(this,Pn);_(this,Ru);_(this,il,null);_(this,Jr);_(this,Ff);_(this,$n);_(this,Hf);_(this,at);A(this,at,t),A(this,$n,s),A(this,Ru,r),A(this,Hf,i),A(this,Jr,o),A(this,Ff,a),E(this,Pn,eR).call(this,a);const{x:l,y:u,width:d,height:f}=c(this,il);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/d,t[p+1]=(t[p+1]-u)/f;for(let p=0,m=s.length;p<m;p+=2)s[p]=(s[p]-l)/d,s[p+1]=(s[p+1]-u)/f}toSVGPath(){const t=[`M${c(this,at)[4]} ${c(this,at)[5]}`];for(let s=6,r=c(this,at).length;s<r;s+=6){if(isNaN(c(this,at)[s])){t.push(`L${c(this,at)[s+4]} ${c(this,at)[s+5]}`);continue}t.push(`C${c(this,at)[s]} ${c(this,at)[s+1]} ${c(this,at)[s+2]} ${c(this,at)[s+3]} ${c(this,at)[s+4]} ${c(this,at)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,l=i-s;let u,d;switch(o){case 0:u=E(this,Pn,Ud).call(this,c(this,at),t,i,a,-l),d=E(this,Pn,Ud).call(this,c(this,$n),t,i,a,-l);break;case 90:u=E(this,Pn,Vd).call(this,c(this,at),t,s,a,l),d=E(this,Pn,Vd).call(this,c(this,$n),t,s,a,l);break;case 180:u=E(this,Pn,Ud).call(this,c(this,at),r,s,-a,l),d=E(this,Pn,Ud).call(this,c(this,$n),r,s,-a,l);break;case 270:u=E(this,Pn,Vd).call(this,c(this,at),r,i,-a,-l),d=E(this,Pn,Vd).call(this,c(this,$n),r,i,-a,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,il)}newOutliner(t,s,r,i,o,a=0){return new _g(t,s,r,i,o,a)}getNewOutline(t,s){const{x:r,y:i,width:o,height:a}=c(this,il),[l,u,d,f]=c(this,Ru),p=o*d,m=a*f,y=r*d+l,v=i*f+u,S=this.newOutliner({x:c(this,$n)[0]*p+y,y:c(this,$n)[1]*m+v},c(this,Ru),c(this,Hf),t,c(this,Ff),s??c(this,Jr));for(let g=2;g<c(this,$n).length;g+=2)S.add({x:c(this,$n)[g]*p+y,y:c(this,$n)[g+1]*m+v});return S.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Ru=new WeakMap,il=new WeakMap,Jr=new WeakMap,Ff=new WeakMap,$n=new WeakMap,Hf=new WeakMap,at=new WeakMap,Pn=new WeakSet,Ud=function(t,s,r,i,o){const a=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)a[l]=s+t[l]*i,a[l+1]=r+t[l+1]*o;return a},Vd=function(t,s,r,i,o){const a=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)a[l]=s+t[l+1]*i,a[l+1]=r+t[l]*o;return a},eR=function(t){const s=c(this,at);let r=s[4],i=s[5],o=r,a=i,l=r,u=i,d=r,f=i;const p=t?Math.max:Math.min;for(let g=6,x=s.length;g<x;g+=6){if(isNaN(s[g]))o=Math.min(o,s[g+4]),a=Math.min(a,s[g+5]),l=Math.max(l,s[g+4]),u=Math.max(u,s[g+5]),f<s[g+5]?(d=s[g+4],f=s[g+5]):f===s[g+5]&&(d=p(d,s[g+4]));else{const b=Y.bezierBoundingBox(r,i,...s.slice(g,g+6));o=Math.min(o,b[0]),a=Math.min(a,b[1]),l=Math.max(l,b[2]),u=Math.max(u,b[3]),f<b[3]?(d=b[2],f=b[3]):f===b[3]&&(d=p(d,b[2]))}r=s[g+4],i=s[g+5]}const m=o-c(this,Jr),y=a-c(this,Jr),v=l-o+2*c(this,Jr),S=u-a+2*c(this,Jr);A(this,il,{x:m,y,width:v,height:S,lastPoint:[d,f]})};var zf,xo,Ds,gn,tR,jm,nR,sR,ew;class tE{constructor(e,t=0,s=0,r=!0){_(this,gn);_(this,zf);_(this,xo,[]);_(this,Ds,[]);let i=1/0,o=-1/0,a=1/0,l=-1/0;const d=10**-4;for(const{x:g,y:x,width:b,height:C}of e){const T=Math.floor((g-t)/d)*d,N=Math.ceil((g+b+t)/d)*d,P=Math.floor((x-t)/d)*d,k=Math.ceil((x+C+t)/d)*d,M=[T,P,k,!0],j=[N,P,k,!1];c(this,xo).push(M,j),i=Math.min(i,T),o=Math.max(o,N),a=Math.min(a,P),l=Math.max(l,k)}const f=o-i+2*s,p=l-a+2*s,m=i-s,y=a-s,v=c(this,xo).at(r?-1:-2),S=[v[0],v[2]];for(const g of c(this,xo)){const[x,b,C]=g;g[0]=(x-m)/f,g[1]=(b-y)/p,g[2]=(C-y)/p}A(this,zf,{x:m,y,width:f,height:p,lastPoint:S})}getOutlines(){c(this,xo).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,xo))t[3]?(e.push(...E(this,gn,ew).call(this,t)),E(this,gn,nR).call(this,t)):(E(this,gn,sR).call(this,t),e.push(...E(this,gn,ew).call(this,t)));return E(this,gn,tR).call(this,e)}}zf=new WeakMap,xo=new WeakMap,Ds=new WeakMap,gn=new WeakSet,tR=function(e){const t=[],s=new Set;for(const o of e){const[a,l,u]=o;t.push([a,l,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],u=t[o+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,u,d,f]=o;s.delete(o);let p=a,m=l;for(i=[a,u],r.push(i);;){let y;if(s.has(d))y=d;else if(s.has(f))y=f;else break;s.delete(y),[a,l,u,d,f]=y,p!==a&&(i.push(p,m,a,m===l?l:u),p=a),m=m===l?u:l}i.push(p,m)}return new Uz(r,c(this,zf))},jm=function(e){const t=c(this,Ds);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},nR=function([,e,t]){const s=E(this,gn,jm).call(this,e);c(this,Ds).splice(s,0,[e,t])},sR=function([,e,t]){const s=E(this,gn,jm).call(this,e);for(let r=s;r<c(this,Ds).length;r++){const[i,o]=c(this,Ds)[r];if(i!==e)break;if(i===e&&o===t){c(this,Ds).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=c(this,Ds)[r];if(i!==e)break;if(i===e&&o===t){c(this,Ds).splice(r,1);return}}},ew=function(e){const[t,s,r]=e,i=[[t,s,r]],o=E(this,gn,jm).call(this,r);for(let a=0;a<o;a++){const[l,u]=c(this,Ds)[a];for(let d=0,f=i.length;d<f;d++){const[,p,m]=i[d];if(!(u<=p||m<=l)){if(p>=l){if(m>u)i[d][1]=u;else{if(f===1)return[];i.splice(d,1),d--,f--}continue}i[d][2]=l,m>u&&i.push([t,u,m])}}}return i};var $f,Lu;class Uz extends Gk{constructor(t,s){super();_(this,$f);_(this,Lu);A(this,Lu,t),A(this,$f,s)}toSVGPath(){const t=[];for(const s of c(this,Lu)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],l=r-t,u=i-s;for(const d of c(this,Lu)){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=t+d[p]*l,f[p+1]=i-d[p+1]*u;a.push(f)}return a}get box(){return c(this,$f)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}$f=new WeakMap,Lu=new WeakMap;class tw extends _g{newFreeDrawOutline(e,t,s,r,i,o){return new Vz(e,t,s,r,i,o)}get classNamesForDrawing(){return["highlight","free"]}}class Vz extends Jk{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,s,r,i,o=0){return new tw(e,t,s,r,i,o)}}var Os,ol,Mu,xt,Bf,ju,Uf,Vf,wo,Fs,Iu,Wf,Ie,nw,sw,rw,oa,rR,Fi;const wn=class wn{constructor({editor:e=null,uiManager:t=null}){_(this,Ie);_(this,Os,null);_(this,ol,null);_(this,Mu);_(this,xt,null);_(this,Bf,!1);_(this,ju,!1);_(this,Uf,null);_(this,Vf);_(this,wo,null);_(this,Fs,null);_(this,Iu);var s;e?(A(this,ju,!1),A(this,Iu,ne.HIGHLIGHT_COLOR),A(this,Uf,e)):(A(this,ju,!0),A(this,Iu,ne.HIGHLIGHT_DEFAULT_COLOR)),A(this,Fs,(e==null?void 0:e._uiManager)||t),A(this,Vf,c(this,Fs)._eventBus),A(this,Mu,(e==null?void 0:e.color)||((s=c(this,Fs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(wn,Wf)||A(wn,Wf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return we(this,"_keyboardManager",new up([[["Escape","mac+Escape"],wn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wn.prototype._moveToPrevious],[["Home","mac+Home"],wn.prototype._moveToBeginning],[["End","mac+End"],wn.prototype._moveToEnd]]))}renderButton(){const e=A(this,Os,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,Fs)._signal;e.addEventListener("click",E(this,Ie,oa).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Ie,rw).bind(this),{signal:t});const s=A(this,ol,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=c(this,Mu),e.append(s),e}renderMainDropdown(){const e=A(this,xt,E(this,Ie,nw).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,Os)){E(this,Ie,oa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Ie,sw).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,Ie,Fi)){E(this,Ie,oa).call(this,e);return}if(e.target===c(this,Os)){(t=c(this,xt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,xt))==null?void 0:t.firstChild)||e.target===c(this,Os)){c(this,Ie,Fi)&&this._hideDropdownFromKeyboard();return}c(this,Ie,Fi)||E(this,Ie,oa).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,Ie,Fi)){E(this,Ie,oa).call(this,e);return}(t=c(this,xt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Ie,Fi)){E(this,Ie,oa).call(this,e);return}(t=c(this,xt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,xt))==null||e.classList.add("hidden"),(t=c(this,wo))==null||t.abort(),A(this,wo,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,ju)){if(!c(this,Ie,Fi)){(e=c(this,Uf))==null||e.unselect();return}this.hideDropdown(),c(this,Os).focus({preventScroll:!0,focusVisible:c(this,Bf)})}}updateColor(e){if(c(this,ol)&&(c(this,ol).style.backgroundColor=e),!c(this,xt))return;const t=c(this,Fs).highlightColors.values();for(const s of c(this,xt).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,Os))==null||e.remove(),A(this,Os,null),A(this,ol,null),(t=c(this,xt))==null||t.remove(),A(this,xt,null)}};Os=new WeakMap,ol=new WeakMap,Mu=new WeakMap,xt=new WeakMap,Bf=new WeakMap,ju=new WeakMap,Uf=new WeakMap,Vf=new WeakMap,wo=new WeakMap,Fs=new WeakMap,Iu=new WeakMap,Wf=new WeakMap,Ie=new WeakSet,nw=function(){const e=document.createElement("div"),t=c(this,Fs)._signal;e.addEventListener("contextmenu",ws,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of c(this,Fs).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",c(wn,Wf)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.setAttribute("aria-selected",r===c(this,Mu)),i.addEventListener("click",E(this,Ie,sw).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",E(this,Ie,rw).bind(this),{signal:t}),e},sw=function(e,t){t.stopPropagation(),c(this,Vf).dispatch("switchannotationeditorparams",{source:this,type:c(this,Iu),value:e})},rw=function(e){wn._keyboardManager.exec(this,e)},oa=function(e){if(c(this,Ie,Fi)){this.hideDropdown();return}if(A(this,Bf,e.detail===0),c(this,wo)||(A(this,wo,new AbortController),window.addEventListener("pointerdown",E(this,Ie,rR).bind(this),{signal:c(this,Fs).combinedSignal(c(this,wo))})),c(this,xt)){c(this,xt).classList.remove("hidden");return}const t=A(this,xt,E(this,Ie,nw).call(this));c(this,Os).append(t)},rR=function(e){var t;(t=c(this,xt))!=null&&t.contains(e.target)||this.hideDropdown()},Fi=function(){return c(this,xt)&&!c(this,xt).classList.contains("hidden")},_(wn,Wf,null);let Tg=wn;var Du,Gf,ei,al,Ou,as,qf,Kf,ll,Hs,Qt,Cn,Fu,ti,wt,Hu,ls,Xf,re,iw,Im,iR,oR,aR,ow,aa,ps,rc,lR,Dm,Wd,cR,uR,dR,hR,fR;const Te=class Te extends Le{constructor(t){super({...t,name:"highlightEditor"});_(this,re);_(this,Du,null);_(this,Gf,0);_(this,ei);_(this,al,null);_(this,Ou,null);_(this,as,null);_(this,qf,null);_(this,Kf,0);_(this,ll,null);_(this,Hs,null);_(this,Qt,null);_(this,Cn,!1);_(this,Fu,null);_(this,ti);_(this,wt,null);_(this,Hu,"");_(this,ls);_(this,Xf,"");this.color=t.color||Te._defaultColor,A(this,ls,t.thickness||Te._defaultThickness),A(this,ti,t.opacity||Te._defaultOpacity),A(this,ei,t.boxes||null),A(this,Xf,t.methodOfCreation||""),A(this,Hu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,Cn,!0),E(this,re,Im).call(this,t),E(this,re,aa).call(this)):c(this,ei)&&(A(this,Du,t.anchorNode),A(this,Gf,t.anchorOffset),A(this,qf,t.focusNode),A(this,Kf,t.focusOffset),E(this,re,iw).call(this),E(this,re,aa).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Te.prototype;return we(this,"_keyboardManager",new up([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Cn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,ls),methodOfCreation:c(this,Xf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;Le.initialize(t,s),Te._defaultColor||(Te._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ne.HIGHLIGHT_DEFAULT_COLOR:Te._defaultColor=s;break;case ne.HIGHLIGHT_THICKNESS:Te._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,Fu)}updateParams(t,s){switch(t){case ne.HIGHLIGHT_COLOR:E(this,re,iR).call(this,s);break;case ne.HIGHLIGHT_THICKNESS:E(this,re,oR).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ne.HIGHLIGHT_DEFAULT_COLOR,Te._defaultColor],[ne.HIGHLIGHT_THICKNESS,Te._defaultThickness]]}get propertiesToUpdate(){return[[ne.HIGHLIGHT_COLOR,this.color||Te._defaultColor],[ne.HIGHLIGHT_THICKNESS,c(this,ls)||Te._defaultThickness],[ne.HIGHLIGHT_FREE,c(this,Cn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,Ou,new Tg({editor:this})),t.addColorPicker(c(this,Ou))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,re,Wd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,re,Wd).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){E(this,re,ow).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,re,aa).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?E(this,re,ow).call(this):t&&(E(this,re,aa).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;c(this,Cn)?(t=(t-this.rotation+360)%360,r=E(i=Te,ps,rc).call(i,c(this,Hs).box,t)):r=E(o=Te,ps,rc).call(o,this,t),s.rotate(c(this,Qt),t),s.rotate(c(this,wt),t),s.updateBox(c(this,Qt),r),s.updateBox(c(this,wt),E(a=Te,ps,rc).call(a,c(this,as).box,t))}render(){if(this.div)return this.div;const t=super.render();c(this,Hu)&&(t.setAttribute("aria-label",c(this,Hu)),t.setAttribute("role","mark")),c(this,Cn)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,re,lR).bind(this),{signal:this._uiManager._signal});const s=A(this,ll,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,al);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Eg(this,c(this,ll),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(this,wt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(this,wt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,re,Dm).call(this,!0);break;case 1:case 3:E(this,re,Dm).call(this,!1);break}}select(){var t,s;super.select(),c(this,wt)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,wt),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(c(this,wt),"selected"))}unselect(){var t;super.unselect(),c(this,wt)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,wt),"selected"),c(this,Cn)||E(this,re,Dm).call(this,!1))}get _mustFixPosition(){return!c(this,Cn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(c(this,Qt),t),this.parent.drawLayer.show(c(this,wt),t))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:l,width:u,height:d}=r.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=v=>{v.preventDefault(),v.stopPropagation()},y=v=>{f.abort(),E(this,ps,hR).call(this,t,v)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",m,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ws,{signal:p}),r.addEventListener("pointermove",E(this,ps,dR).bind(this,t),{signal:p}),this._freeHighlight=new tw({x:i,y:o},[a,l,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,s,r){var v,S,g,x;let i=null;if(t instanceof Fk){const{data:{quadPoints:b,rect:C,rotation:T,id:N,color:P,opacity:k,popupRef:M},parent:{page:{pageNumber:j}}}=t;i=t={annotationType:le.HIGHLIGHT,color:Array.from(P),opacity:k,quadPoints:b,boxes:null,pageIndex:j-1,rect:C.slice(0),rotation:T,id:N,deleted:!1,popupRef:M}}else if(t instanceof P1){const{data:{inkLists:b,rect:C,rotation:T,id:N,color:P,borderStyle:{rawWidth:k},popupRef:M},parent:{page:{pageNumber:j}}}=t;i=t={annotationType:le.HIGHLIGHT,color:Array.from(P),thickness:k,inkLists:b,boxes:null,pageIndex:j-1,rect:C.slice(0),rotation:T,id:N,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=t,d=await super.deserialize(t,s,r);d.color=Y.makeHexColor(...o),A(d,ti,u||1),l&&A(d,ls,t.thickness),d.annotationElementId=t.id||null,d._initialData=i;const[f,p]=d.pageDimensions,[m,y]=d.pageTranslation;if(a){const b=A(d,ei,[]);for(let C=0;C<a.length;C+=8)b.push({x:(a[C]-m)/f,y:1-(a[C+1]-y)/p,width:(a[C+2]-a[C])/f,height:(a[C+1]-a[C+5])/p});E(v=d,re,iw).call(v),E(S=d,re,aa).call(S),d.rotate(d.rotation)}else if(l){A(d,Cn,!0);const b=l[0],C={x:b[0]-m,y:p-(b[1]-y)},T=new tw(C,[0,0,f,p],1,c(d,ls)/2,!0,.001);for(let k=0,M=b.length;k<M;k+=2)C.x=b[k]-m,C.y=p-(b[k+1]-y),T.add(C);const{id:N,clipPathId:P}=s.drawLayer.draw(T,d.color,d._defaultOpacity,!0);E(g=d,re,Im).call(g,{highlightOutlines:T.getOutlines(),highlightId:N,clipPathId:P}),E(x=d,re,aa).call(x)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=Le._colorManager.convert(this.color),i={annotationType:le.HIGHLIGHT,color:r,opacity:c(this,ti),thickness:c(this,ls),quadPoints:E(this,re,cR).call(this),outlines:E(this,re,uR).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:E(this,re,Wd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,re,fR).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Du=new WeakMap,Gf=new WeakMap,ei=new WeakMap,al=new WeakMap,Ou=new WeakMap,as=new WeakMap,qf=new WeakMap,Kf=new WeakMap,ll=new WeakMap,Hs=new WeakMap,Qt=new WeakMap,Cn=new WeakMap,Fu=new WeakMap,ti=new WeakMap,wt=new WeakMap,Hu=new WeakMap,ls=new WeakMap,Xf=new WeakMap,re=new WeakSet,iw=function(){const t=new tE(c(this,ei),.001);A(this,Hs,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Hs).box;const s=new tE(c(this,ei),.0025,.001,this._uiManager.direction==="ltr");A(this,as,s.getOutlines());const{lastPoint:r}=c(this,as).box;A(this,Fu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Im=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,p;if(A(this,Hs,t),A(this,as,t.getNewOutline(c(this,ls)/2+1.5,.0025)),s>=0)A(this,Qt,s),A(this,al,r),this.parent.drawLayer.finalizeLine(s,t),A(this,wt,this.parent.drawLayer.drawOutline(c(this,as)));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,Qt),t),this.parent.drawLayer.updateBox(c(this,Qt),E(f=Te,ps,rc).call(f,c(this,Hs).box,(m-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,wt),c(this,as)),this.parent.drawLayer.updateBox(c(this,wt),E(p=Te,ps,rc).call(p,c(this,as).box,m))}const{x:o,y:a,width:l,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[m,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/m,this.height=u*m/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/m,this.height=u*m/y;break}}const{lastPoint:d}=c(this,as).box;A(this,Fu,[(d[0]-o)/l,(d[1]-a)/u])},iR=function(t){const s=(o,a)=>{var l,u,d;this.color=o,(l=this.parent)==null||l.drawLayer.changeColor(c(this,Qt),o),(u=c(this,Ou))==null||u.updateColor(o),A(this,ti,a),(d=this.parent)==null||d.drawLayer.changeOpacity(c(this,Qt),a)},r=this.color,i=c(this,ti);this.addCommands({cmd:s.bind(this,t,Te._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},oR=function(t){const s=c(this,ls),r=i=>{A(this,ls,i),E(this,re,aR).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},aR=function(t){if(!c(this,Cn))return;E(this,re,Im).call(this,{highlightOutlines:c(this,Hs).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},ow=function(){c(this,Qt)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Qt)),A(this,Qt,null),this.parent.drawLayer.remove(c(this,wt)),A(this,wt,null))},aa=function(t=this.parent){c(this,Qt)===null&&({id:Tt(this,Qt)._,clipPathId:Tt(this,al)._}=t.drawLayer.draw(c(this,Hs),this.color,c(this,ti)),A(this,wt,t.drawLayer.drawOutline(c(this,as))),c(this,ll)&&(c(this,ll).style.clipPath=c(this,al)))},ps=new WeakSet,rc=function({x:t,y:s,width:r,height:i},o){switch(o){case 90:return{x:1-s-i,y:t,width:i,height:r};case 180:return{x:1-t-r,y:1-s-i,width:r,height:i};case 270:return{x:s,y:1-t-r,width:i,height:r}}return{x:t,y:s,width:r,height:i}},lR=function(t){Te._keyboardManager.exec(this,t)},Dm=function(t){if(!c(this,Du))return;const s=window.getSelection();t?s.setPosition(c(this,Du),c(this,Gf)):s.setPosition(c(this,qf),c(this,Kf))},Wd=function(){return c(this,Cn)?this.rotation:0},cR=function(){if(c(this,Cn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,ei),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:d,width:f,height:p}of o){const m=u*t+r,y=(1-d-p)*s+i;a[l]=a[l+4]=m,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=m+f*t,a[l+5]=a[l+7]=y+p*s,l+=8}return a},uR=function(t){return c(this,Hs).serialize(t,E(this,re,Wd).call(this))},dR=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},hR=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},fR=function(t){const{color:s}=this._initialData;return t.color.some((r,i)=>r!==s[i])},_(Te,ps),te(Te,"_defaultColor",null),te(Te,"_defaultOpacity",1),te(Te,"_defaultThickness",12),te(Te,"_type","highlight"),te(Te,"_editorType",le.HIGHLIGHT),te(Te,"_freeHighlightId",-1),te(Te,"_freeHighlight",null),te(Te,"_freeHighlightClipId","");let Ng=Te;var cl,ul,vr,ni,cs,dl,hl,fl,si,zu,pl,ml,bo,V,pR,mR,gR,vR,lw,yR,cw,xR,wR,bR,SR,AR,la,uw,dw,hw,Om,Fm,ic,fw,Hm,Ni,ER,pw,CR,_R,mw,zm,Gd;const Ke=class Ke extends Le{constructor(t){super({...t,name:"inkEditor"});_(this,V);_(this,cl,0);_(this,ul,0);_(this,vr,null);_(this,ni,new Path2D);_(this,cs,!1);_(this,dl,null);_(this,hl,!1);_(this,fl,!1);_(this,si,null);_(this,zu,null);_(this,pl,0);_(this,ml,0);_(this,bo,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,s){Le.initialize(t,s)}static updateDefaultParams(t,s){switch(t){case ne.INK_THICKNESS:Ke._defaultThickness=s;break;case ne.INK_COLOR:Ke._defaultColor=s;break;case ne.INK_OPACITY:Ke._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case ne.INK_THICKNESS:E(this,V,pR).call(this,s);break;case ne.INK_COLOR:E(this,V,mR).call(this,s);break;case ne.INK_OPACITY:E(this,V,gR).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ne.INK_THICKNESS,Ke._defaultThickness],[ne.INK_COLOR,Ke._defaultColor||Le._defaultLineColor],[ne.INK_OPACITY,Math.round(Ke._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ne.INK_THICKNESS,this.thickness||Ke._defaultThickness],[ne.INK_COLOR,this.color||Ke._defaultColor||Le._defaultLineColor],[ne.INK_OPACITY,Math.round(100*(this.opacity??Ke._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(E(this,V,Om).call(this),E(this,V,Fm).call(this)),this.isAttachedToDOM||(this.parent.add(this),E(this,V,ic).call(this)),E(this,V,Gd).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,vr)&&(clearTimeout(c(this,vr)),A(this,vr,null)),(t=c(this,si))==null||t.disconnect(),A(this,si,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,r=this.width*t,i=this.height*s;this.setDimensions(r,i)}enableEditMode(){c(this,cs)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,E(this,V,uw).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),E(this,V,dw).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,cs)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),A(this,cs,!0),this.div.classList.add("disabled"),E(this,V,Gd).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||c(this,cs)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),E(this,V,yR).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),E(this,V,cw).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),E(this,V,hw).call(this,t)}canvasPointerleave(t){E(this,V,hw).call(this,t)}get isResizable(){return!this.isEmpty()&&c(this,cs)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,i,o,a]=E(this,V,vR).call(this);if(this.setAt(r,i,0,0),this.setDims(o,a),E(this,V,Om).call(this),this.width){const[l,u]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*u),this.setAt(t*l,s*u,this.width*l,this.height*u),A(this,fl,!0),E(this,V,ic).call(this),this.setDims(this.width*l,this.height*u),E(this,V,la).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return E(this,V,Fm).call(this),this.div}setDimensions(t,s){const r=Math.round(t),i=Math.round(s);if(c(this,pl)===r&&c(this,ml)===i)return;A(this,pl,r),A(this,ml,i),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=s/a,this.fixAndSetPosition(),c(this,cs)&&E(this,V,fw).call(this,t,s),E(this,V,ic).call(this),E(this,V,la).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,s,r){var S,g,x;if(t instanceof P1)return null;const i=await super.deserialize(t,s,r);i.thickness=t.thickness,i.color=Y.makeHexColor(...t.color),i.opacity=t.opacity;const[o,a]=i.pageDimensions,l=i.width*o,u=i.height*a,d=i.parentScale,f=t.thickness/2;A(i,cs,!0),A(i,pl,Math.round(l)),A(i,ml,Math.round(u));const{paths:p,rect:m,rotation:y}=t;for(let{bezier:b}of p){b=E(S=Ke,Ni,CR).call(S,b,m,y);const C=[];i.paths.push(C);let T=d*(b[0]-f),N=d*(b[1]-f);for(let k=2,M=b.length;k<M;k+=6){const j=d*(b[k]-f),D=d*(b[k+1]-f),R=d*(b[k+2]-f),O=d*(b[k+3]-f),I=d*(b[k+4]-f),B=d*(b[k+5]-f);C.push([[T,N],[j,D],[R,O],[I,B]]),T=I,N=B}const P=E(this,Ni,ER).call(this,C);i.bezierPath2D.push(P)}const v=E(g=i,V,mw).call(g);return A(i,ul,Math.max(Le.MIN_SIZE,v[2]-v[0])),A(i,cl,Math.max(Le.MIN_SIZE,v[3]-v[1])),E(x=i,V,fw).call(x,l,u),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=Le._colorManager.convert(this.ctx.strokeStyle);return{annotationType:le.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:E(this,V,_R).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};cl=new WeakMap,ul=new WeakMap,vr=new WeakMap,ni=new WeakMap,cs=new WeakMap,dl=new WeakMap,hl=new WeakMap,fl=new WeakMap,si=new WeakMap,zu=new WeakMap,pl=new WeakMap,ml=new WeakMap,bo=new WeakMap,V=new WeakSet,pR=function(t){const s=i=>{this.thickness=i,E(this,V,Gd).call(this)},r=this.thickness;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},mR=function(t){const s=i=>{this.color=i,E(this,V,la).call(this)},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gR=function(t){const s=i=>{this.opacity=i,E(this,V,la).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},vR=function(){const{parentRotation:t,parentDimensions:[s,r]}=this;switch(t){case 90:return[0,r,r,s];case 180:return[s,r,s,r];case 270:return[s,0,r,s];default:return[0,0,s,r]}},lw=function(){const{ctx:t,color:s,opacity:r,thickness:i,parentScale:o,scaleFactor:a}=this;t.lineWidth=i*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${hH(r)}`},yR=function(t,s){this.canvas.addEventListener("contextmenu",ws,{signal:this._uiManager._signal}),E(this,V,dw).call(this),A(this,dl,new AbortController);const r=this._uiManager.combinedSignal(c(this,dl));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,c(this,fl)||(A(this,fl,!0),E(this,V,ic).call(this),this.thickness||(this.thickness=Ke._defaultThickness),this.color||(this.color=Ke._defaultColor||Le._defaultLineColor),this.opacity??(this.opacity=Ke._defaultOpacity)),this.currentPath.push([t,s]),A(this,hl,!1),E(this,V,lw).call(this),A(this,bo,()=>{E(this,V,bR).call(this),c(this,bo)&&window.requestAnimationFrame(c(this,bo))}),window.requestAnimationFrame(c(this,bo))},cw=function(t,s){const[r,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&s===i)return;const o=this.currentPath;let a=c(this,ni);if(o.push([t,s]),A(this,hl,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,s);return}o.length===3&&(A(this,ni,a=new Path2D),a.moveTo(...o[0])),E(this,V,SR).call(this,a,...o.at(-3),...o.at(-2),t,s)},xR=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);c(this,ni).lineTo(...t)},wR=function(t,s){A(this,bo,null),t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),E(this,V,cw).call(this,t,s),E(this,V,xR).call(this);let r;if(this.currentPath.length!==1)r=E(this,V,AR).call(this);else{const u=[t,s];r=[[u,u.slice(),u.slice(),u]]}const i=c(this,ni),o=this.currentPath;this.currentPath=[],A(this,ni,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(r),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(E(this,V,Om).call(this),E(this,V,Fm).call(this)),E(this,V,Gd).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},bR=function(){if(!c(this,hl))return;A(this,hl,!1);const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),r=s.map(a=>a[0]),i=s.map(a=>a[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(c(this,ni)),o.restore()},SR=function(t,s,r,i,o,a,l){const u=(s+i)/2,d=(r+o)/2,f=(i+a)/2,p=(o+l)/2;t.bezierCurveTo(u+2*(i-u)/3,d+2*(o-d)/3,f+2*(i-f)/3,p+2*(o-p)/3,f,p)},AR=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let r,[i,o]=t[0];for(r=1;r<t.length-2;r++){const[m,y]=t[r],[v,S]=t[r+1],g=(m+v)/2,x=(y+S)/2,b=[i+2*(m-i)/3,o+2*(y-o)/3],C=[g+2*(m-g)/3,x+2*(y-x)/3];s.push([[i,o],b,C,[g,x]]),[i,o]=[g,x]}const[a,l]=t[r],[u,d]=t[r+1],f=[i+2*(a-i)/3,o+2*(l-o)/3],p=[u+2*(a-u)/3,d+2*(l-d)/3];return s.push([[i,o],f,p,[u,d]]),s},la=function(){if(this.isEmpty()){E(this,V,Hm).call(this);return}E(this,V,lw).call(this);const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),E(this,V,Hm).call(this);for(const r of this.bezierPath2D)s.stroke(r)},uw=function(){if(c(this,zu))return;A(this,zu,new AbortController);const t=this._uiManager.combinedSignal(c(this,zu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},dw=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},hw=function(t){var s;(s=c(this,dl))==null||s.abort(),A(this,dl,null),E(this,V,uw).call(this),c(this,vr)&&clearTimeout(c(this,vr)),A(this,vr,setTimeout(()=>{A(this,vr,null),this.canvas.removeEventListener("contextmenu",ws)},10)),E(this,V,wR).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Om=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Fm=function(){A(this,si,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),c(this,si).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,si))==null||t.disconnect(),A(this,si,null)},{once:!0})},ic=function(){if(!c(this,fl))return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),E(this,V,Hm).call(this)},fw=function(t,s){const r=E(this,V,zm).call(this),i=(t-r)/c(this,ul),o=(s-r)/c(this,cl);this.scaleFactor=Math.min(i,o)},Hm=function(){const t=E(this,V,zm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ni=new WeakSet,ER=function(t){const s=new Path2D;for(let r=0,i=t.length;r<i;r++){const[o,a,l,u]=t[r];r===0&&s.moveTo(...o),s.bezierCurveTo(a[0],a[1],l[0],l[1],u[0],u[1])}return s},pw=function(t,s,r){const[i,o,a,l]=s;switch(r){case 0:for(let u=0,d=t.length;u<d;u+=2)t[u]+=i,t[u+1]=l-t[u+1];break;case 90:for(let u=0,d=t.length;u<d;u+=2){const f=t[u];t[u]=t[u+1]+i,t[u+1]=f+o}break;case 180:for(let u=0,d=t.length;u<d;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,d=t.length;u<d;u+=2){const f=t[u];t[u]=a-t[u+1],t[u+1]=l-f}break;default:throw new Error("Invalid rotation")}return t},CR=function(t,s,r){const[i,o,a,l]=s;switch(r){case 0:for(let u=0,d=t.length;u<d;u+=2)t[u]-=i,t[u+1]=l-t[u+1];break;case 90:for(let u=0,d=t.length;u<d;u+=2){const f=t[u];t[u]=t[u+1]-o,t[u+1]=f-i}break;case 180:for(let u=0,d=t.length;u<d;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,d=t.length;u<d;u+=2){const f=t[u];t[u]=l-t[u+1],t[u+1]=a-f}break;default:throw new Error("Invalid rotation")}return t},_R=function(t,s,r,i){var d,f;const o=[],a=this.thickness/2,l=t*s+a,u=t*r+a;for(const p of this.paths){const m=[],y=[];for(let v=0,S=p.length;v<S;v++){const[g,x,b,C]=p[v];if(g[0]===C[0]&&g[1]===C[1]&&S===1){const O=t*g[0]+l,I=t*g[1]+u;m.push(O,I),y.push(O,I);break}const T=t*g[0]+l,N=t*g[1]+u,P=t*x[0]+l,k=t*x[1]+u,M=t*b[0]+l,j=t*b[1]+u,D=t*C[0]+l,R=t*C[1]+u;v===0&&(m.push(T,N),y.push(T,N)),m.push(P,k,M,j,D,R),y.push(P,k),v===S-1&&y.push(D,R)}o.push({bezier:E(d=Ke,Ni,pw).call(d,m,i,this.rotation),points:E(f=Ke,Ni,pw).call(f,y,i,this.rotation)})}return o},mw=function(){let t=1/0,s=-1/0,r=1/0,i=-1/0;for(const o of this.paths)for(const[a,l,u,d]of o){const f=Y.bezierBoundingBox(...a,...l,...u,...d);t=Math.min(t,f[0]),r=Math.min(r,f[1]),s=Math.max(s,f[2]),i=Math.max(i,f[3])}return[t,r,s,i]},zm=function(){return c(this,cs)?Math.ceil(this.thickness*this.parentScale):0},Gd=function(t=!1){if(this.isEmpty())return;if(!c(this,cs)){E(this,V,la).call(this);return}const s=E(this,V,mw).call(this),r=E(this,V,zm).call(this);A(this,ul,Math.max(Le.MIN_SIZE,s[2]-s[0])),A(this,cl,Math.max(Le.MIN_SIZE,s[3]-s[1]));const i=Math.ceil(r+c(this,ul)*this.scaleFactor),o=Math.ceil(r+c(this,cl)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=i/a,this.height=o/l,this.setAspectRatio(i,o);const u=this.translationX,d=this.translationY;this.translationX=-s[0],this.translationY=-s[1],E(this,V,ic).call(this),E(this,V,la).call(this),A(this,pl,i),A(this,ml,o),this.setDims(i,o);const f=t?r/this.scaleFactor/2:0;this.translate(u-this.translationX-f,d-this.translationY-f)},_(Ke,Ni),te(Ke,"_defaultColor",null),te(Ke,"_defaultOpacity",1),te(Ke,"_defaultThickness",1),te(Ke,"_type","ink"),te(Ke,"_editorType",le.INK);let aw=Ke;var Ye,Ht,So,ri,Ao,$u,yr,ii,xr,Bn,Bu,ye,qd,Kd,$m,vw,TR,Bm,yw,Um,NR,PR;const uh=class uh extends Le{constructor(t){super({...t,name:"stampEditor"});_(this,ye);_(this,Ye,null);_(this,Ht,null);_(this,So,null);_(this,ri,null);_(this,Ao,null);_(this,$u,"");_(this,yr,null);_(this,ii,null);_(this,xr,null);_(this,Bn,!1);_(this,Bu,!1);A(this,ri,t.bitmapUrl),A(this,Ao,t.bitmapFile)}static initialize(t,s){Le.initialize(t,s)}static get supportedTypes(){return we(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return we(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(le.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,s;c(this,Ht)&&(A(this,Ye,null),this._uiManager.imageManager.deleteId(c(this,Ht)),(t=c(this,yr))==null||t.remove(),A(this,yr,null),(s=c(this,ii))==null||s.disconnect(),A(this,ii,null),c(this,xr)&&(clearTimeout(c(this,xr)),A(this,xr,null))),super.remove()}rebuild(){if(!this.parent){c(this,Ht)&&E(this,ye,$m).call(this);return}super.rebuild(),this.div!==null&&(c(this,Ht)&&c(this,yr)===null&&E(this,ye,$m).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,So)||c(this,Ye)||c(this,ri)||c(this,Ao)||c(this,Ht))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,Ye)?E(this,ye,vw).call(this):E(this,ye,$m).call(this),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(t*r,s*i,this.width*r,this.height*i)}return this.div}copyCanvas(t,s,r=!1){var m;t||(t=224);const{width:i,height:o}=c(this,Ye),a=new h0;let l=c(this,Ye),u=i,d=o,f=null;if(s){if(i>s||o>s){const k=Math.min(s/i,s/o);u=Math.floor(i*k),d=Math.floor(o*k)}f=document.createElement("canvas");const y=f.width=Math.ceil(u*a.sx),v=f.height=Math.ceil(d*a.sy);c(this,Bn)||(l=E(this,ye,Bm).call(this,y,v));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let g="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",x="#42414d");const b=15,C=b*a.sx,T=b*a.sy,N=new OffscreenCanvas(C*2,T*2),P=N.getContext("2d");P.fillStyle=g,P.fillRect(0,0,C*2,T*2),P.fillStyle=x,P.fillRect(0,0,C,T),P.fillRect(C,T,C,T),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,y,v),S.drawImage(l,0,0,l.width,l.height,0,0,y,v)}let p=null;if(r){let y,v;if(a.symmetric&&l.width<t&&l.height<t)y=l.width,v=l.height;else if(l=c(this,Ye),i>t||o>t){const x=Math.min(t/i,t/o);y=Math.floor(i*x),v=Math.floor(o*x),c(this,Bn)||(l=E(this,ye,Bm).call(this,y,v))}const g=new OffscreenCanvas(y,v).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,y,v),p={width:y,height:v,data:g.getImageData(0,0,y,v).data}}return{canvas:f,width:u,height:d,imageData:p}}getImageForAltText(){return c(this,yr)}static async deserialize(t,s,r){var v;let i=null;if(t instanceof Hk){const{data:{rect:S,rotation:g,id:x,structParent:b,popupRef:C},container:T,parent:{page:{pageNumber:N}}}=t,P=T.querySelector("canvas"),k=r.imageManager.getFromCanvas(T.id,P);P.remove();const M=((v=await s._structTree.getAriaAttributes(`${y1}${x}`))==null?void 0:v.get("aria-label"))||"";i=t={annotationType:le.STAMP,bitmapId:k.id,bitmap:k.bitmap,pageIndex:N-1,rect:S.slice(0),rotation:g,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:b,popupRef:C}}const o=await super.deserialize(t,s,r),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:p}=t;d&&r.imageManager.isValidId(d)?(A(o,Ht,d),l&&A(o,Ye,l)):A(o,ri,u),A(o,Bn,f);const[m,y]=o.pageDimensions;return o.width=(a[2]-a[0])/m,o.height=(a[3]-a[1])/y,o.annotationElementId=t.id||null,p&&(o.altTextData=p),o._initialData=i,A(o,Bu,!!i),o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:le.STAMP,bitmapId:c(this,Ht),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Bn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=E(this,ye,Um).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=E(this,ye,PR).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const a=c(this,Bn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(c(this,Ht)))s.stamps.set(c(this,Ht),{area:a,serialized:r}),r.bitmap=E(this,ye,Um).call(this,!1);else if(c(this,Bn)){const l=s.stamps.get(c(this,Ht));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,ye,Um).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Ye=new WeakMap,Ht=new WeakMap,So=new WeakMap,ri=new WeakMap,Ao=new WeakMap,$u=new WeakMap,yr=new WeakMap,ii=new WeakMap,xr=new WeakMap,Bn=new WeakMap,Bu=new WeakMap,ye=new WeakSet,qd=function(t,s=!1){if(!t){this.remove();return}A(this,Ye,t.bitmap),s||(A(this,Ht,t.id),A(this,Bn,t.isSvg)),t.file&&A(this,$u,t.file.name),E(this,ye,vw).call(this)},Kd=function(){if(A(this,So,null),this._uiManager.enableWaiting(!1),!!c(this,yr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ye)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Ye)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},$m=function(){if(c(this,Ht)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Ht)).then(r=>E(this,ye,qd).call(this,r,!0)).finally(()=>E(this,ye,Kd).call(this));return}if(c(this,ri)){const r=c(this,ri);A(this,ri,null),this._uiManager.enableWaiting(!0),A(this,So,this._uiManager.imageManager.getFromUrl(r).then(i=>E(this,ye,qd).call(this,i)).finally(()=>E(this,ye,Kd).call(this)));return}if(c(this,Ao)){const r=c(this,Ao);A(this,Ao,null),this._uiManager.enableWaiting(!0),A(this,So,this._uiManager.imageManager.getFromFile(r).then(i=>E(this,ye,qd).call(this,i)).finally(()=>E(this,ye,Kd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=uh.supportedTypesStr;const s=this._uiManager._signal;A(this,So,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ye,qd).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>E(this,ye,Kd).call(this))),t.click()},vw=function(){const{div:t}=this;let{width:s,height:r}=c(this,Ye);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const f=Math.min(a*i/s,a*o/r);s*=f,r*=f}const[l,u]=this.parentDimensions;this.setDims(s*l/i,r*u/o),this._uiManager.enableWaiting(!1);const d=A(this,yr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,ye,yw).call(this,s,r),E(this,ye,NR).call(this),c(this,Bu)||(this.parent.addUndoableEditor(this),A(this,Bu,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,$u)&&d.setAttribute("aria-label",c(this,$u))},TR=function(t,s){var a;const[r,i]=this.parentDimensions;this.width=t/r,this.height=s/i,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,xr)!==null&&clearTimeout(c(this,xr)),A(this,xr,setTimeout(()=>{A(this,xr,null),E(this,ye,yw).call(this,t,s)},200))},Bm=function(t,s){const{width:r,height:i}=c(this,Ye);let o=r,a=i,l=c(this,Ye);for(;o>2*t||a>2*s;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,u,d,0,0,o,a),l=f.transferToImageBitmap()}return l},yw=function(t,s){const r=new h0,i=Math.ceil(t*r.sx),o=Math.ceil(s*r.sy),a=c(this,yr);if(!a||a.width===i&&a.height===o)return;a.width=i,a.height=o;const l=c(this,Bn)?c(this,Ye):E(this,ye,Bm).call(this,i,o),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(l,0,0,l.width,l.height,0,0,i,o)},Um=function(t){if(t){if(c(this,Bn)){const i=this._uiManager.imageManager.getSvgUrl(c(this,Ht));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Ye),s.getContext("2d").drawImage(c(this,Ye),0,0),s.toDataURL()}if(c(this,Bn)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*Vo.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Vo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(c(this,Ye),0,0,c(this,Ye).width,c(this,Ye).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(c(this,Ye))},NR=function(){this._uiManager._signal&&(A(this,ii,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&E(this,ye,TR).call(this,s.width,s.height)})),c(this,ii).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,ii))==null||t.disconnect(),A(this,ii,null)},{once:!0}))},PR=function(t){var u;const{rect:s,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,o=t.rect.every((d,f)=>Math.abs(d-s[f])<1),a=t.pageIndex===r,l=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===i;return{isSame:o&&a&&l,isSameAltText:l}},te(uh,"_type","stamp"),te(uh,"_editorType",le.STAMP);let gw=uh;var gl,Uu,wr,Eo,oi,Un,Co,Vu,Wu,Zt,ai,Q,_o,Bt,kR,ww,bw,Sw,Vm;const As=class As{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:d}){_(this,Bt);_(this,gl);_(this,Uu,!1);_(this,wr,null);_(this,Eo,null);_(this,oi,null);_(this,Un,new Map);_(this,Co,!1);_(this,Vu,!1);_(this,Wu,!1);_(this,Zt,null);_(this,ai,null);_(this,Q);const f=[...c(As,_o).values()];if(!As._initialized){As._initialized=!0;for(const p of f)p.initialize(d,e)}e.registerEditorTypes(f),A(this,Q,e),this.pageIndex=t,this.div=s,A(this,gl,i),A(this,wr,o),this.viewport=u,A(this,Zt,l),this.drawLayer=a,this._structTree=r,c(this,Q).addLayer(this)}get isEmpty(){return c(this,Un).size===0}get isInvisible(){return this.isEmpty&&c(this,Q).getMode()===le.NONE}updateToolbar(e){c(this,Q).updateToolbar(e)}updateMode(e=c(this,Q).getMode()){switch(E(this,Bt,Vm).call(this),e){case le.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case le.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case le.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of c(As,_o).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Zt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(c(this,Q).getMode()!==le.INK)return;if(!e){for(const s of c(this,Un).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,Q).setEditingState(e)}addCommands(e){c(this,Q).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,wr))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of c(this,Un).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,Q).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!c(this,wr))return;const t=c(this,wr).getEditableAnnotations();for(const s of t){if(s.hide(),c(this,Q).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;A(this,Wu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of c(this,Un).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(c(this,wr)){const i=c(this,wr).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(c(this,Q).isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(c(this,Q).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}E(this,Bt,Vm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of c(As,_o).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Wu,!1)}getEditableAnnotation(e){var t;return((t=c(this,wr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Q).getActive()!==e&&c(this,Q).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Zt))!=null&&e.div&&!c(this,ai)){A(this,ai,new AbortController);const t=c(this,Q).combinedSignal(c(this,ai));c(this,Zt).div.addEventListener("pointerdown",E(this,Bt,kR).bind(this),{signal:t}),c(this,Zt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Zt))!=null&&e.div&&c(this,ai)&&(c(this,ai).abort(),A(this,ai,null),c(this,Zt).div.classList.remove("highlighting"))}enableClick(){if(c(this,Eo))return;A(this,Eo,new AbortController);const e=c(this,Q).combinedSignal(c(this,Eo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=c(this,Eo))==null||e.abort(),A(this,Eo,null)}attach(e){c(this,Un).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Q).isDeletedAnnotationElement(t)&&c(this,Q).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Un).delete(e.id),(t=c(this,gl))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Wu)&&e.annotationElementId&&c(this,Q).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Q).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,Vu)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Q).addDeletedAnnotationElement(e.annotationElementId),Le.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Q).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,Q).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,oi)&&(e._focusEventsAllowed=!1,A(this,oi,setTimeout(()=>{A(this,oi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,Q)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,gl))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return c(this,Q).getId()}combinedSignal(e){return c(this,Q).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Bt,ww))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,Q).updateToolbar(e),c(this,Q).updateMode(e);const{offsetX:s,offsetY:r}=E(this,Bt,Sw).call(this),i=this.getNextId(),o=E(this,Bt,bw).call(this,{parent:this,id:i,x:s,y:r,uiManager:c(this,Q),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(As,_o).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Q)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=E(this,Bt,bw).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,Q),isCentered:t,...s});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(E(this,Bt,Sw).call(this),!0)}setSelected(e){c(this,Q).setSelected(e)}toggleSelected(e){c(this,Q).toggleSelected(e)}unselect(e){c(this,Q).unselect(e)}pointerup(e){const{isMac:t}=pn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,Co)){if(A(this,Co,!1),!c(this,Uu)){A(this,Uu,!0);return}if(c(this,Q).getMode()===le.STAMP){c(this,Q).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,Q).getMode()===le.HIGHLIGHT&&this.enableTextSelection(),c(this,Co)){A(this,Co,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;A(this,Co,!0);const s=c(this,Q).getActive();A(this,Uu,!s||s.isEmpty())}findNewParent(e,t,s){const r=c(this,Q).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=c(this,Q).getActive())==null?void 0:e.parent)===this&&(c(this,Q).commitOrRemove(),c(this,Q).setActiveEditor(null)),c(this,oi)&&(clearTimeout(c(this,oi)),A(this,oi,null));for(const s of c(this,Un).values())(t=c(this,gl))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,Un).clear(),c(this,Q).removeLayer(this)}render({viewport:e}){this.viewport=e,kl(this.div,e);for(const t of c(this,Q).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Q).commitOrRemove(),E(this,Bt,Vm).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,kl(this.div,{rotation:s}),t!==s)for(const r of c(this,Un).values())r.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Q).viewParameters.realScale}};gl=new WeakMap,Uu=new WeakMap,wr=new WeakMap,Eo=new WeakMap,oi=new WeakMap,Un=new WeakMap,Co=new WeakMap,Vu=new WeakMap,Wu=new WeakMap,Zt=new WeakMap,ai=new WeakMap,Q=new WeakMap,_o=new WeakMap,Bt=new WeakSet,kR=function(e){c(this,Q).unselectAll();const{target:t}=e;if(t===c(this,Zt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Zt).div.contains(t)){const{isMac:s}=pn.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,Q).showAllEditors("highlight",!0,!0),c(this,Zt).div.classList.add("free"),this.toggleDrawing(),Ng.startHighlighting(this,c(this,Q).direction==="ltr",{target:c(this,Zt).div,x:e.x,y:e.y}),c(this,Zt).div.addEventListener("pointerup",()=>{c(this,Zt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Q)._signal}),e.preventDefault()}},ww=function(){return c(As,_o).get(c(this,Q).getMode())},bw=function(e){const t=c(this,Bt,ww);return t?new t.prototype.constructor(e):null},Sw=function(){const{x:e,y:t,width:s,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+r),u=(i+a)/2-e,d=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:f,offsetY:p}},Vm=function(){A(this,Vu,!0);for(const e of c(this,Un).values())e.isEmpty()&&e.remove();A(this,Vu,!1)},te(As,"_initialized",!1),_(As,_o,new Map([Z0,aw,gw,Ng].map(e=>[e._editorType,e])));let xw=As;var br,Yf,ht,li,Qf,Ew,Dl,Cw,RR;const Dt=class Dt{constructor({pageIndex:e}){_(this,Dl);_(this,br,null);_(this,Yf,0);_(this,ht,new Map);_(this,li,new Map);this.pageIndex=e}setParent(e){if(!c(this,br)){A(this,br,e);return}if(c(this,br)!==e){if(c(this,ht).size>0)for(const t of c(this,ht).values())t.remove(),e.append(t);A(this,br,e)}}static get _svgFactory(){return we(this,"_svgFactory",new N1)}draw(e,t,s,r=!1){const i=Tt(this,Yf)._++,o=E(this,Dl,Cw).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=Dt._svgFactory.createElement("defs");o.append(a);const l=Dt._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("d",e.toSVGPath()),r&&c(this,li).set(i,l);const d=E(this,Dl,RR).call(this,a,u),f=Dt._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",t),o.setAttribute("fill-opacity",s),f.setAttribute("href",`#${u}`),c(this,ht).set(i,o),{id:i,clipPathId:`url(#${d})`}}drawOutline(e){const t=Tt(this,Yf)._++,s=E(this,Dl,Cw).call(this,e.box);s.classList.add(...e.classNamesForOutlining);const r=Dt._svgFactory.createElement("defs");s.append(r);const i=Dt._svgFactory.createElement("path");r.append(i);const o=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",o),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const d=Dt._svgFactory.createElement("mask");r.append(d),a=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",a),d.setAttribute("maskUnits","objectBoundingBox");const f=Dt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Dt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Dt._svgFactory.createElement("use");s.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const u=l.cloneNode();return s.append(u),l.classList.add("mainOutline"),u.classList.add("secondaryOutline"),c(this,ht).set(t,s),t}finalizeLine(e,t){const s=c(this,li).get(e);c(this,li).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){c(this,ht).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){c(this,li).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;E(s=Dt,Qf,Ew).call(s,c(this,ht).get(e),t)}show(e,t){c(this,ht).get(e).classList.toggle("hidden",!t)}rotate(e,t){c(this,ht).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){c(this,ht).get(e).setAttribute("fill",t)}changeOpacity(e,t){c(this,ht).get(e).setAttribute("fill-opacity",t)}addClass(e,t){c(this,ht).get(e).classList.add(t)}removeClass(e,t){c(this,ht).get(e).classList.remove(t)}getSVGRoot(e){return c(this,ht).get(e)}remove(e){c(this,li).delete(e),c(this,br)!==null&&(c(this,ht).get(e).remove(),c(this,ht).delete(e))}destroy(){A(this,br,null);for(const e of c(this,ht).values())e.remove();c(this,ht).clear(),c(this,li).clear()}};br=new WeakMap,Yf=new WeakMap,ht=new WeakMap,li=new WeakMap,Qf=new WeakSet,Ew=function(e,{x:t=0,y:s=0,width:r=1,height:i=1}={}){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},Dl=new WeakSet,Cw=function(e){var s;const t=Dt._svgFactory.create(1,1,!0);return c(this,br).append(t),t.setAttribute("aria-hidden",!0),E(s=Dt,Qf,Ew).call(s,t,e),t},RR=function(e,t){const s=Dt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Dt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},_(Dt,Qf);let Aw=Dt;var Wz=se.AbortException,Gz=se.AnnotationEditorLayer,qz=se.AnnotationEditorParamsType,Kz=se.AnnotationEditorType,Xz=se.AnnotationEditorUIManager,LR=se.AnnotationLayer,MR=se.AnnotationMode,Yz=se.ColorPicker,Qz=se.DOMSVGFactory,Zz=se.DrawLayer,Jz=se.FeatureTest,k1=se.GlobalWorkerOptions,e$=se.ImageKind,t$=se.InvalidPDFException,n$=se.MissingPDFException,s$=se.OPS,r$=se.OutputScale,i$=se.PDFDataRangeTransport,o$=se.PDFDateString,a$=se.PDFWorker,l$=se.PasswordResponses,c$=se.PermissionFlag,u$=se.PixelsPerInch,d$=se.RenderingCancelledException,jR=se.TextLayer,h$=se.UnexpectedResponseException,f$=se.Util,p$=se.VerbosityLevel,m$=se.XfaLayer,g$=se.build,v$=se.createValidAbsoluteUrl,y$=se.fetchData,IR=se.getDocument,x$=se.getFilenameFromUrl,w$=se.getPdfFilenameFromUrl,b$=se.getXfaPageViewport,S$=se.isDataScheme,A$=se.isPdfFile,E$=se.noContextMenu,C$=se.normalizeUnicode,_$=se.setLayerDimensions,T$=se.shadow,DR=se.version;const N$=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Wz,AnnotationEditorLayer:Gz,AnnotationEditorParamsType:qz,AnnotationEditorType:Kz,AnnotationEditorUIManager:Xz,AnnotationLayer:LR,AnnotationMode:MR,ColorPicker:Yz,DOMSVGFactory:Qz,DrawLayer:Zz,FeatureTest:Jz,GlobalWorkerOptions:k1,ImageKind:e$,InvalidPDFException:t$,MissingPDFException:n$,OPS:s$,OutputScale:r$,PDFDataRangeTransport:i$,PDFDateString:o$,PDFWorker:a$,PasswordResponses:l$,PermissionFlag:c$,PixelsPerInch:u$,RenderingCancelledException:d$,TextLayer:jR,UnexpectedResponseException:h$,Util:f$,VerbosityLevel:p$,XfaLayer:m$,build:g$,createValidAbsoluteUrl:v$,fetchData:y$,getDocument:IR,getFilenameFromUrl:x$,getPdfFilenameFromUrl:w$,getXfaPageViewport:b$,isDataScheme:S$,isPdfFile:A$,noContextMenu:E$,normalizeUnicode:C$,setLayerDimensions:_$,shadow:T$,version:DR},Symbol.toStringTag,{value:"Module"}));var Nt=function(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))},P$=["onCopy","onCut","onPaste"],k$=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],R$=["onFocus","onBlur"],L$=["onInput","onInvalid","onReset","onSubmit"],M$=["onLoad","onError"],j$=["onKeyDown","onKeyPress","onKeyUp"],I$=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],D$=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],O$=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],F$=["onSelect"],H$=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],z$=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],$$=["onScroll"],B$=["onWheel"],U$=["onAnimationStart","onAnimationEnd","onAnimationIteration"],V$=["onTransitionEnd"],W$=["onToggle"],G$=["onChange"],q$=Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt([],P$,!0),k$,!0),R$,!0),L$,!0),M$,!0),j$,!0),I$,!0),D$,!0),O$,!0),F$,!0),H$,!0),z$,!0),$$,!0),B$,!0),U$,!0),V$,!0),G$,!0),W$,!0);function OR(n,e){var t={};return q$.forEach(function(s){var r=n[s];r&&(e?t[s]=function(i){return r(i,e(s))}:t[s]=r)}),t}function hp(n){var e=!1,t=new Promise(function(s,r){n.then(function(i){return!e&&s(i)}).catch(function(i){return!e&&r(i)})});return{promise:t,cancel:function(){e=!0}}}var K$="Invariant failed";function Fe(n,e){if(!n)throw new Error(K$)}var X$=function(){},Y$=X$;const tn=Iw(Y$);var nE=Object.prototype.hasOwnProperty;function sE(n,e,t){for(t of n.keys())if(Mc(t,e))return t}function Mc(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Mc(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=sE(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=sE(e,r),!r)||!Mc(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(nE.call(n,t)&&++s&&!nE.call(e,t)||!(t in e)||!Mc(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}const FR=w.createContext(null);function jc({children:n,type:e}){return h.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const Q$="noopener noreferrer nofollow";class Z${constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Fe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Fe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Fe(this.pdfDocument),Fe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Fe(Array.isArray(t));const s=t[0];new Promise(r=>{Fe(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{Fe(!1)}):typeof s=="number"?r(s):Fe(!1)}).then(r=>{const i=r+1;Fe(this.pdfViewer),Fe(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Fe(this.pdfViewer),Fe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||Q$,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const rE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Ov=typeof window<"u",HR=Ov&&window.location.protocol==="file:";function J$(n){return typeof n<"u"}function na(n){return J$(n)&&n!==null}function eB(n){return typeof n=="string"}function tB(n){return n instanceof ArrayBuffer}function nB(n){return Fe(Ov),n instanceof Blob}function _w(n){return eB(n)&&/^data:/.test(n)}function iE(n){Fe(_w(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function sB(){return Ov&&window.devicePixelRatio||1}const zR="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function oE(){tn(!HR,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${zR}`)}function rB(){tn(!HR,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${zR}`)}function Ml(n){n!=null&&n.cancel&&n.cancel()}function Tw(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function iB(n){return n.name==="RenderingCancelledException"}function oB(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}function aB(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function id(){return w.useReducer(aB,{value:void 0,error:void 0})}var lB=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(f){o(f)}}function l(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})},aE=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const{PDFDataRangeTransport:cB}=N$,uB=(n,e)=>{switch(e){case rE.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case rE.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function lE(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const dB=w.forwardRef(function(e,t){var{children:s,className:r,error:i="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:l,inputRef:u,imageResourcesPath:d,loading:f="Loading PDF…",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:v,onLoadSuccess:S,onPassword:g=uB,onSourceError:x,onSourceSuccess:b,options:C,renderMode:T,rotate:N}=e,P=aE(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[k,M]=id(),{value:j,error:D}=k,[R,O]=id(),{value:I,error:B}=R,H=w.useRef(new Z$),F=w.useRef([]),L=w.useRef(void 0),z=w.useRef(void 0);l&&l!==L.current&&lE(l)&&(tn(!Mc(l,L.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),L.current=l),C&&C!==z.current&&(tn(!Mc(C,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=C);const G=w.useRef({scrollPageIntoView:ce=>{const{dest:_e,pageNumber:nt,pageIndex:We=nt-1}=ce;if(m){m({dest:_e,pageIndex:We,pageNumber:nt});return}const ns=F.current[We];if(ns){ns.scrollIntoView();return}tn(!1,`An internal link leading to page ${nt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});w.useImperativeHandle(t,()=>({linkService:H,pages:F,viewer:G}),[]);function X(){b&&b()}function Z(){D&&(tn(!1,D.toString()),x&&x(D))}function ie(){M({type:"RESET"})}w.useEffect(ie,[l,M]);const be=w.useCallback(()=>lB(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return _w(l)?{data:iE(l)}:(oE(),{url:l});if(l instanceof cB)return{range:l};if(tB(l))return{data:l};if(Ov&&nB(l))return{data:yield oB(l)};if(Fe(typeof l=="object"),Fe(lE(l)),"url"in l&&typeof l.url=="string"){if(_w(l.url)){const{url:ce}=l,_e=aE(l,["url"]),nt=iE(ce);return Object.assign({data:nt},_e)}oE()}return l}),[l]);w.useEffect(()=>{const ce=hp(be());return ce.promise.then(_e=>{M({type:"RESOLVE",value:_e})}).catch(_e=>{M({type:"REJECT",error:_e})}),()=>{Ml(ce)}},[be,M]),w.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){Z();return}X()}},[j]);function tt(){I&&(S&&S(I),F.current=new Array(I.numPages),H.current.setDocument(I))}function pe(){B&&(tn(!1,B.toString()),y&&y(B))}w.useEffect(function(){O({type:"RESET"})},[O,j]),w.useEffect(function(){if(!j)return;const _e=C?Object.assign(Object.assign({},j),C):j,nt=IR(_e);v&&(nt.onProgress=v),g&&(nt.onPassword=g);const We=nt,ns=We.promise.then(ea=>{O({type:"RESOLVE",value:ea})}).catch(ea=>{We.destroyed||O({type:"REJECT",error:ea})});return()=>{ns.finally(()=>We.destroy())}},[C,O,j]),w.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){pe();return}tt()}},[I]),w.useEffect(function(){H.current.setViewer(G.current),H.current.setExternalLinkRel(o),H.current.setExternalLinkTarget(a)},[o,a]);const U=w.useCallback((ce,_e)=>{F.current[ce]=_e},[]),ve=w.useCallback(ce=>{delete F.current[ce]},[]),je=w.useMemo(()=>({imageResourcesPath:d,linkService:H.current,onItemClick:m,pdf:I,registerPage:U,renderMode:T,rotate:N,unregisterPage:ve}),[d,m,I,U,T,N,ve]),J=w.useMemo(()=>OR(P,()=>I),[P,I]);function Se(){return h.jsx(FR.Provider,{value:je,children:s})}function Ae(){return l?I==null?h.jsx(jc,{type:"loading",children:typeof f=="function"?f():f}):I===!1?h.jsx(jc,{type:"error",children:typeof i=="function"?i():i}):Se():h.jsx(jc,{type:"no-data",children:typeof p=="function"?p():p})}return h.jsx("div",Object.assign({className:ud("react-pdf__Document",r),ref:u,style:{"--scale-factor":"1"}},J,{children:Ae()}))});function $R(){return w.useContext(FR)}function BR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){t.forEach(function(o){typeof o=="function"?o(i):o&&(o.current=i)})}}const UR=w.createContext(null),VR={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},hB=/^H(\d+)$/;function fB(n){return n in VR}function Fv(n){return"children"in n}function WR(n){return Fv(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function pB(n){const e={};if(Fv(n)){const{role:t}=n,s=t.match(hB);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(fB(t)){const r=VR[t];r&&(e.role=r)}}return e}function GR(n){const e={};if(Fv(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),WR(n)){const[t]=n.children;if(t){const s=GR(t);return Object.assign(Object.assign({},e),s)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function mB(n){return n?Object.assign(Object.assign({},pB(n)),GR(n)):null}function qR({className:n,node:e}){const t=w.useMemo(()=>mB(e),[e]),s=w.useMemo(()=>!Fv(e)||WR(e)?null:e.children.map((r,i)=>h.jsx(qR,{node:r},i)),[e]);return h.jsx("span",Object.assign({className:n},t,{children:s}))}function Hv(){return w.useContext(UR)}function gB(){const n=Hv();Fe(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=id(),{value:i,error:o}=s,{customTextRenderer:a,page:l}=n;function u(){i&&t&&t(i)}function d(){o&&(tn(!1,o.toString()),e&&e(o))}return w.useEffect(function(){r({type:"RESET"})},[r,l]),w.useEffect(function(){if(a||!l)return;const p=hp(l.getStructTree()),m=p;return p.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>Ml(m)},[a,l,r]),w.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}u()}},[i]),i?h.jsx(qR,{className:"react-pdf__Page__structTree structTree",node:i}):null}const cE=MR;function vB(n){const e=Hv();Fe(e);const t=Object.assign(Object.assign({},e),n),{_className:s,canvasBackground:r,devicePixelRatio:i=sB(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:u,renderTextLayer:d,rotate:f,scale:p}=t,{canvasRef:m}=n;Fe(l);const y=w.useRef(null);function v(){l&&a&&a(Tw(l,p))}function S(C){iB(C)||(tn(!1,C.toString()),o&&o(C))}const g=w.useMemo(()=>l.getViewport({scale:p*i,rotation:f}),[i,l,f,p]),x=w.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);w.useEffect(function(){if(!l)return;l.cleanup();const{current:T}=y;if(!T)return;T.width=g.width,T.height=g.height,T.style.width=`${Math.floor(x.width)}px`,T.style.height=`${Math.floor(x.height)}px`,T.style.visibility="hidden";const N={annotationMode:u?cE.ENABLE_FORMS:cE.ENABLE,canvasContext:T.getContext("2d",{alpha:!1}),viewport:g};r&&(N.background=r);const P=l.render(N),k=P;return P.promise.then(()=>{T.style.visibility="",v()}).catch(S),()=>Ml(k)},[r,l,u,g,x]);const b=w.useCallback(()=>{const{current:C}=y;C&&(C.width=0,C.height=0)},[]);return w.useEffect(()=>b,[b]),h.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:BR(m,y),style:{display:"block",userSelect:"none"},children:d?h.jsx(gB,{}):null})}function yB(n){return"str"in n}function xB(){const n=Hv();Fe(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:u,scale:d}=n;Fe(o);const[f,p]=id(),{value:m,error:y}=f,v=w.useRef(null);tn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){m&&s&&s(m)}function g(){y&&(tn(!1,y.toString()),t&&t(y))}w.useEffect(function(){p({type:"RESET"})},[o,p]),w.useEffect(function(){if(!o)return;const k=hp(o.getTextContent()),M=k;return k.promise.then(j=>{p({type:"RESOLVE",value:j})}).catch(j=>{p({type:"REJECT",error:j})}),()=>Ml(M)},[o,p]),w.useEffect(()=>{if(m!==void 0){if(m===!1){g();return}S()}},[m]);const x=w.useCallback(()=>{i&&i()},[i]),b=w.useCallback(P=>{tn(!1,P.toString()),r&&r(P)},[r]);function C(){const P=v.current;P&&P.classList.add("selecting")}function T(){const P=v.current;P&&P.classList.remove("selecting")}const N=w.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return w.useLayoutEffect(function(){if(!o||!m)return;const{current:k}=v;if(!k)return;k.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),j={container:k,textContentSource:M,viewport:N},D=new jR(j),R=D;return D.render().then(()=>{const O=document.createElement("div");O.className="endOfContent",k.append(O);const I=k.querySelectorAll('[role="presentation"]');if(e){let B=0;m.items.forEach((H,F)=>{if(!yB(H))return;const L=I[B];if(!L)return;const z=e(Object.assign({pageIndex:a,pageNumber:l,itemIndex:F},H));L.innerHTML=z,B+=H.str&&H.hasEOL?2:1})}x()}).catch(b),()=>Ml(R)},[e,b,x,o,a,l,m,N]),h.jsx("div",{className:ud("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:C,ref:v})}function wB(){const n=$R(),e=Hv();Fe(e);const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:s,linkService:r,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:u,pdf:d,renderForms:f,rotate:p,scale:m=1}=t;Fe(d),Fe(u),Fe(r);const[y,v]=id(),{value:S,error:g}=y,x=w.useRef(null);tn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function b(){S&&o&&o(S)}function C(){g&&(tn(!1,g.toString()),i&&i(g))}w.useEffect(function(){v({type:"RESET"})},[v,u]),w.useEffect(function(){if(!u)return;const M=hp(u.getAnnotations()),j=M;return M.promise.then(D=>{v({type:"RESOLVE",value:D})}).catch(D=>{v({type:"REJECT",error:D})}),()=>{Ml(j)}},[v,u]),w.useEffect(()=>{if(S!==void 0){if(S===!1){C();return}b()}},[S]);function T(){l&&l()}function N(k){tn(!1,`${k}`),a&&a(k)}const P=w.useMemo(()=>u.getViewport({scale:m,rotation:p}),[u,p,m]);return w.useEffect(function(){if(!d||!u||!r||!S)return;const{current:M}=x;if(!M)return;const j=P.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:M,l10n:null,page:u,structTreeLayer:null,viewport:j},R={annotations:S,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:s,linkService:r,page:u,renderForms:f,viewport:j};M.innerHTML="";try{new LR(D).render(R),T()}catch(O){N(O)}return()=>{}},[S,s,r,u,d,f,P]),h.jsx("div",{className:ud("react-pdf__Page__annotations","annotationLayer"),ref:x})}var bB=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const uE=1;function SB(n){const e=$R(),t=Object.assign(Object.assign({},e),n),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:u,customTextRenderer:d,devicePixelRatio:f,error:p="Failed to load the page.",height:m,inputRef:y,loading:v="Loading page…",noData:S="No page specified.",onGetAnnotationsError:g,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:C,onGetTextError:T,onGetTextSuccess:N,onLoadError:P,onLoadSuccess:k,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:j,onRenderError:D,onRenderSuccess:R,onRenderTextLayerError:O,onRenderTextLayerSuccess:I,pageIndex:B,pageNumber:H,pdf:F,registerPage:L,renderAnnotationLayer:z=!0,renderForms:G=!1,renderMode:X="canvas",renderTextLayer:Z=!0,rotate:ie,scale:be=uE,unregisterPage:tt,width:pe}=t,U=bB(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ve,je]=id(),{value:J,error:Se}=ve,Ae=w.useRef(null);Fe(F);const ce=na(H)?H-1:B??null,_e=H??(na(B)?B+1:null),nt=ie??(J?J.rotate:null),We=w.useMemo(()=>{if(!J)return null;let Gl=1;const mp=be??uE;if(pe||m){const gp=J.getViewport({scale:1,rotation:nt});pe?Gl=pe/gp.width:m&&(Gl=m/gp.height)}return mp*Gl},[m,J,nt,be,pe]);w.useEffect(function(){return()=>{na(ce)&&r&&tt&&tt(ce)}},[r,F,ce,tt]);function ns(){if(k){if(!J||!We)return;k(Tw(J,We))}if(r&&L){if(!na(ce)||!Ae.current)return;L(ce,Ae.current)}}function ea(){Se&&(tn(!1,Se.toString()),P&&P(Se))}w.useEffect(function(){je({type:"RESET"})},[je,F,ce]),w.useEffect(function(){if(!F||!_e)return;const mp=hp(F.getPage(_e)),gp=mp;return mp.promise.then(Uv=>{je({type:"RESOLVE",value:Uv})}).catch(Uv=>{je({type:"REJECT",error:Uv})}),()=>Ml(gp)},[je,F,_e]),w.useEffect(()=>{if(J!==void 0){if(J===!1){ea();return}ns()}},[J,We]);const Wl=w.useMemo(()=>J&&na(ce)&&_e&&na(nt)&&na(We)?{_className:s,canvasBackground:i,customTextRenderer:d,devicePixelRatio:f,onGetAnnotationsError:g,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:C,onGetTextError:T,onGetTextSuccess:N,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:j,onRenderError:D,onRenderSuccess:R,onRenderTextLayerError:O,onRenderTextLayerSuccess:I,page:J,pageIndex:ce,pageNumber:_e,renderForms:G,renderTextLayer:Z,rotate:nt,scale:We}:null,[s,i,d,f,g,x,b,C,T,N,M,j,D,R,O,I,J,ce,_e,G,Z,nt,We]),RL=w.useMemo(()=>OR(U,()=>J&&(We?Tw(J,We):void 0)),[U,J,We]),pp=`${ce}@${We}/${nt}`;function LL(){switch(X){case"custom":return Fe(u),h.jsx(u,{},`${pp}_custom`);case"none":return null;case"canvas":default:return h.jsx(vB,{canvasRef:o},`${pp}_canvas`)}}function ML(){return Z?h.jsx(xB,{},`${pp}_text`):null}function jL(){return z?h.jsx(wB,{},`${pp}_annotations`):null}function IL(){return h.jsxs(UR.Provider,{value:Wl,children:[LL(),ML(),jL(),a]})}function DL(){return _e?F===null||J===void 0||J===null?h.jsx(jc,{type:"loading",children:typeof v=="function"?v():v}):F===!1||J===!1?h.jsx(jc,{type:"error",children:typeof p=="function"?p():p}):IL():h.jsx(jc,{type:"no-data",children:typeof S=="function"?S():S})}return h.jsx("div",Object.assign({className:ud(s,l),"data-page-number":_e,ref:BR(y,Ae),style:{"--scale-factor":`${We}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},RL,{children:DL()}))}rB();k1.workerSrc="pdf.worker.mjs";k1.workerSrc=`//unpkg.com/pdfjs-dist@${DR}/build/pdf.worker.min.js`;function AB({documentId:n,page:e,className:t}){const s=w.useRef(null),[r,i]=w.useState(!0),[o,a]=w.useState(null),[l,u]=w.useState(1),[d,f]=w.useState(1.2),p=`/api/documents/${n}/file`,m=({numPages:S})=>{u(S),i(!1),a(null)},y=S=>{console.error("PDF load error:",S),a("Failed to load PDF document"),i(!1)},v=S=>{console.error("PDF page load error:",S),a("Failed to load PDF page")};return r?h.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${t}`,style:{minHeight:"792px"},children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),h.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading document..."})]})}):o?h.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${t}`,style:{minHeight:"792px"},children:h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-red-600",children:o})})}):h.jsxs("div",{className:`w-full h-full ${t} relative`,style:{minHeight:"792px"},children:[h.jsxs("div",{className:"mb-4 flex justify-center space-x-2",children:[h.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Open PDF in New Tab"}),h.jsx("a",{href:p,download:!0,className:"inline-flex items-center px-3 py-1 text-sm border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:"Download PDF"})]}),r&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-10",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Loading PDF..."})]})}),h.jsxs("div",{ref:s,className:"relative",children:[h.jsxs("div",{className:"w-full border border-gray-200 shadow-lg overflow-hidden rounded-lg bg-white",children:[h.jsx(dB,{file:p,onLoadSuccess:m,onLoadError:y,loading:h.jsx("div",{className:"flex items-center justify-center h-96",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Loading PDF document..."})]})}),error:h.jsx("div",{className:"p-8 text-center",children:h.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"PDF Display Issue"}),h.jsx("p",{className:"text-yellow-700 mb-4",children:'Unable to display PDF directly. Use "Open PDF in New Tab" to view the document.'}),h.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mt-4",children:[h.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Document Signature Area"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This represents your document page for signature field placement."}),h.jsx("div",{className:"h-96 border-2 border-dashed border-blue-300 bg-blue-50 rounded-lg flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-blue-700 font-medium",children:"Click signature tools to place fields here"}),h.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"Fields will map to your actual PDF document"})]})})]})]})}),children:h.jsx(SB,{pageNumber:Math.min(e,l),scale:d,onLoadError:v,className:"mx-auto",renderTextLayer:!0,renderAnnotationLayer:!0})}),!o&&!r&&l>1&&h.jsxs("div",{className:"border-t border-gray-200 p-3 bg-gray-50 flex justify-between items-center",children:[h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",Math.min(e,l)," of ",l]})}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>f(d*.8),className:"px-2 py-1 text-xs border rounded hover:bg-gray-100",disabled:d<=.5,children:"Zoom Out"}),h.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(d*100),"%"]}),h.jsx("button",{onClick:()=>f(d*1.25),className:"px-2 py-1 text-xs border rounded hover:bg-gray-100",disabled:d>=3,children:"Zoom In"})]})]})]}),o&&h.jsxs("div",{className:"w-full border border-gray-200 shadow-lg bg-white",children:[h.jsx("div",{className:"bg-blue-50 border-b border-blue-200 p-3",children:h.jsxs("p",{className:"text-sm text-blue-800",children:[h.jsx("strong",{children:"Document Preview:"}),' Interactive area for signature field placement. Use "Open PDF in New Tab" to view the actual document content.']})}),h.jsxs("div",{className:"mx-auto bg-white shadow-inner relative",style:{width:"612px",height:"792px",maxWidth:"100%",backgroundImage:"linear-gradient(0deg, #f9f9f9 1px, transparent 1px), linear-gradient(90deg, #f9f9f9 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[h.jsx("div",{className:"absolute inset-4 border-2 border-dashed border-gray-300 rounded-lg",children:h.jsxs("div",{className:"p-6 h-full flex flex-col justify-center text-center",children:[h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Document Preview Area"}),h.jsxs("p",{className:"text-blue-700",children:["Document ID: ",n," - Page ",e]})]}),h.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-left flex-1",children:[h.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-center",children:"Signature Field Placement Guide"}),h.jsxs("div",{className:"space-y-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-gray-800",children:"How to add signature fields:"}),h.jsxs("ol",{className:"text-gray-600 mt-1 space-y-1 list-decimal list-inside",children:[h.jsx("li",{children:"Open the PDF in a new tab to see the document"}),h.jsx("li",{children:"Note where you want signature fields placed"}),h.jsx("li",{children:"Use the signature tools to add fields to this preview area"}),h.jsx("li",{children:"Fields will be mapped to the correct positions in the final PDF"})]})]}),h.jsxs("div",{className:"border-t pt-4",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:"Available field types:"}),h.jsxs("ul",{className:"text-gray-600 mt-1 space-y-1",children:[h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Signature:"})," For electronic signatures"]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Text:"})," For typed information"]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Date:"})," For date fields"]}),h.jsxs("li",{children:["• ",h.jsx("strong",{children:"Initials:"})," For initial fields"]})]})]})]})]}),h.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:[h.jsx("strong",{children:"Ready for Signatures:"})," This area represents your document page. Click signature field buttons on the left to place them here."]}),h.jsxs("div",{className:"mt-4 border-t pt-4",children:[h.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Common signature positions:"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"p-2 bg-gray-100 rounded border-dashed border border-gray-300",children:["Bottom Right",h.jsx("br",{}),h.jsx("span",{className:"text-gray-400",children:"Signature"})]}),h.jsxs("div",{className:"p-2 bg-gray-100 rounded border-dashed border border-gray-300",children:["Bottom Left",h.jsx("br",{}),h.jsx("span",{className:"text-gray-400",children:"Date"})]})]})]})]})}),h.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",children:h.jsx("div",{style:{backgroundImage:"linear-gradient(0deg, #3b82f6 1px, transparent 1px), linear-gradient(90deg, #3b82f6 1px, transparent 1px)",backgroundSize:"50px 50px"},className:"w-full h-full"})})]})]})]})]})}function EB(){const{id:n}=G_(),[e,t]=w.useState(1),[s,r]=w.useState(100),[i,o]=w.useState(!1),[a,l]=w.useState(!1),[u,d]=w.useState(null),[f,p]=w.useState(null),{data:m,isLoading:y,refetch:v}=Ho({queryKey:[`/api/documents/${n}`],enabled:!!n}),S=xl({mutationFn:async R=>(await wl("POST","/api/signatures",R)).json(),onSuccess:()=>{v(),o(!1),d(null)}}),g=xl({mutationFn:async R=>(await wl("POST","/api/signature-fields",R)).json(),onSuccess:()=>{v(),p(null)}});if(y||!m)return h.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document..."})]})});const{document:x,signers:b,signatureFields:C}=m,T=b.find(R=>R.email==="mike@company.com"),N=R=>{R.signerId===(T==null?void 0:T.id)&&!R.completed&&(d(R),o(!0))},P=(R,O)=>{u&&T&&S.mutate({signerId:T.id,signatureFieldId:u.id,type:O,data:R})},k=R=>{p(R)},M=R=>{if(!f||!T)return;const O=R.currentTarget.getBoundingClientRect(),I=Math.round(R.clientX-O.left),B=Math.round(R.clientY-O.top),H={documentId:x.id,signerId:T.id,type:f,page:e,x:I,y:B,width:f==="signature"?200:f==="date"?120:150,height:f==="signature"?60:30,required:!0};g.mutate(H)},j=R=>{switch(R.status){case"signed":return h.jsxs("div",{className:"flex items-center justify-between h-full",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-xs font-medium text-green-700",children:["Signed by ",R.name]}),h.jsx("p",{className:"text-xs text-gray-500",children:R.signedAt?new Date(R.signedAt).toLocaleDateString():""})]}),h.jsx(nd,{className:"text-green-600 text-lg"})]});case"pending":return R.id===(T==null?void 0:T.id)?h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx(yc,{className:"text-primary text-lg mb-1 mx-auto"}),h.jsx("p",{className:"text-xs font-medium text-primary",children:"Click to Sign"}),h.jsx("p",{className:"text-xs text-gray-500",children:R.name})]})}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx(zo,{className:"text-yellow-600 text-lg mb-1 mx-auto"}),h.jsxs("p",{className:"text-xs font-medium text-yellow-700",children:["Awaiting ",R.name]})]})});default:return h.jsx("div",{children:"Unknown status"})}},D=R=>{const O=b.find(I=>I.id===R.signerId);return O?R.completed?"completed":O.id===(T==null?void 0:T.id)?"pending":"read-only":"read-only"};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(DT,{className:"h-8 w-8 text-primary"}),h.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SecureSign"})]}),h.jsx("div",{className:"flex items-center space-x-4",children:h.jsxs(ae,{variant:"outline",children:[h.jsx(vg,{className:"w-4 h-4 mr-2"}),"Download PDF"]})})]})})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[h.jsxs("div",{className:"lg:col-span-1",children:[h.jsx(lt,{className:"mb-6",children:h.jsxs(ft,{className:"p-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Details"}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Document Name"}),h.jsx("p",{className:"text-sm text-gray-900 mt-1",children:x.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),h.jsx("div",{className:"flex items-center mt-1",children:h.jsxs(bt,{className:"bg-yellow-100 text-yellow-800",children:[h.jsx(zo,{className:"w-3 h-3 mr-1"}),"Awaiting Signatures"]})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Created"}),h.jsx("p",{className:"text-sm text-gray-900 mt-1",children:new Date(x.createdAt).toLocaleDateString()})]})]}),h.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[h.jsxs("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["Signers (",b.filter(R=>R.status==="signed").length," of ",b.length,")"]}),h.jsx("div",{className:"space-y-3",children:b.map(R=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${R.status==="signed"?"bg-green-50":R.id===(T==null?void 0:T.id)?"bg-blue-50 border-2 border-primary":"bg-gray-50"}`,children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R.status==="signed"?"bg-green-500":"bg-primary"}`,children:R.status==="signed"?h.jsx(nd,{className:"text-white text-xs"}):h.jsx(yc,{className:"text-white text-xs"})}),h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[R.name,R.id===(T==null?void 0:T.id)?" (You)":""]}),h.jsx("p",{className:"text-xs text-gray-500",children:R.email})]})]}),h.jsx("span",{className:`text-xs font-medium ${R.status==="signed"?"text-green-600":R.id===(T==null?void 0:T.id)?"text-primary":"text-gray-500"}`,children:R.status==="signed"?"Signed":R.id===(T==null?void 0:T.id)?"Your Turn":"Pending"})]},R.id))})]}),h.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-6 space-y-2",children:[b.length===0&&h.jsxs(ae,{className:"w-full bg-primary hover:bg-blue-700",onClick:()=>l(!0),children:[h.jsx(pA,{className:"w-4 h-4 mr-2"}),"Invite Signers"]}),T&&h.jsxs(ae,{className:"w-full bg-primary hover:bg-blue-700",onClick:()=>{const R=C.find(O=>O.signerId===T.id&&!O.completed);R&&(d(R),o(!0))},children:[h.jsx(yc,{className:"w-4 h-4 mr-2"}),"Sign Document"]}),h.jsxs(ae,{variant:"outline",className:"w-full",children:[h.jsx(vg,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})}),h.jsx(B3,{documentId:x.id}),h.jsx(lt,{children:h.jsxs(ft,{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Signature Tools"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs(ae,{variant:"outline",className:"w-full justify-center border-dashed hover:border-primary hover:bg-blue-50",onClick:()=>k("signature"),disabled:!!f,children:[h.jsx(yc,{className:"w-4 h-4 mr-2"}),"Add Signature"]}),h.jsxs(ae,{variant:"outline",className:"w-full justify-center border-dashed hover:border-primary hover:bg-blue-50",onClick:()=>k("text"),disabled:!!f,children:[h.jsx(ND,{className:"w-4 h-4 mr-2"}),"Add Text Field"]}),h.jsxs(ae,{variant:"outline",className:"w-full justify-center border-dashed hover:border-primary hover:bg-blue-50",onClick:()=>k("date"),disabled:!!f,children:[h.jsx(IT,{className:"w-4 h-4 mr-2"}),"Add Date"]}),h.jsxs(ae,{variant:"outline",className:"w-full justify-center border-dashed hover:border-primary hover:bg-blue-50",onClick:()=>k("initials"),disabled:!!f,children:[h.jsx(pA,{className:"w-4 h-4 mr-2"}),"Add Initials"]})]}),f&&h.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[h.jsxs("p",{className:"text-sm text-blue-700 font-medium",children:["Click on the document to place the ",f," field"]}),h.jsx(ae,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>p(null),children:"Cancel"})]})]})})]}),h.jsx("div",{className:"lg:col-span-3",children:h.jsxs(lt,{children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:x.name}),h.jsxs(bt,{variant:"outline",children:["Page ",e," of ",x.pages]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ae,{variant:"outline",size:"sm",onClick:()=>r(Math.max(50,s-25)),disabled:s<=50,children:h.jsx(LD,{className:"w-4 h-4"})}),h.jsxs("span",{className:"text-sm text-gray-600 min-w-12 text-center",children:[s,"%"]}),h.jsx(ae,{variant:"outline",size:"sm",onClick:()=>r(Math.min(200,s+25)),disabled:s>=200,children:h.jsx(RD,{className:"w-4 h-4"})}),h.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),h.jsx(ae,{variant:"outline",size:"sm",onClick:()=>r(100),children:h.jsx(SD,{className:"w-4 h-4"})})]})]}),h.jsx("div",{className:"relative bg-gray-100 p-8 min-h-[800px]",children:h.jsxs("div",{className:`document-page relative ${f?"cursor-crosshair":""}`,onClick:M,style:{transform:`scale(${s/100})`,transformOrigin:"top center"},children:[h.jsx(AB,{documentId:x.id,page:e,className:"w-full h-full"}),C.filter(R=>R.page===e).map(R=>{const O=D(R),I=b.find(B=>B.id===R.signerId);return h.jsx("div",{className:`signature-field ${O}`,style:{left:R.x,top:R.y,width:R.width,height:R.height},onClick:B=>{B.stopPropagation(),N(R)},children:O==="completed"&&I||O==="pending"&&I?j(I):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx("p",{className:"text-xs text-gray-500",children:R.type})})},R.id)})]})}),h.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[h.jsx(ae,{variant:"outline",disabled:e<=1,onClick:()=>t(e-1),children:"Previous"}),h.jsx("div",{className:"flex items-center space-x-2",children:[...Array(x.pages)].map((R,O)=>h.jsx(ae,{variant:e===O+1?"default":"outline",size:"sm",className:"w-8 h-8 p-0",onClick:()=>t(O+1),children:O+1},O+1))}),h.jsx(ae,{variant:"outline",disabled:e>=x.pages,onClick:()=>t(e+1),children:"Next"})]})]})})]})}),h.jsx(x3,{open:i,onOpenChange:o,onSignatureComplete:P,field:u}),h.jsx(w3,{open:a,onOpenChange:l,documentId:x.id,onInviteComplete:()=>{l(!1),v()}})]})}function dE(n,[e,t]){return Math.min(t,Math.max(e,n))}function CB(n){const e=w.useRef({value:n,previous:n});return w.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var _B=[" ","Enter","ArrowUp","ArrowDown"],TB=[" ","Enter"],fp="Select",[zv,$v,NB]=Hb(fp),[pd,x5]=ki(fp,[NB,xv]),Bv=xv(),[PB,Zo]=pd(fp),[kB,RB]=pd(fp),KR=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:p,required:m,form:y}=n,v=Bv(e),[S,g]=w.useState(null),[x,b]=w.useState(null),[C,T]=w.useState(!1),N=c1(u),[P=!1,k]=td({prop:s,defaultProp:r,onChange:i}),[M,j]=td({prop:o,defaultProp:a,onChange:l}),D=w.useRef(null),R=S?y||!!S.closest("form"):!0,[O,I]=w.useState(new Set),B=Array.from(O).map(H=>H.props.value).join(";");return h.jsx(AF,{...v,children:h.jsxs(PB,{required:m,scope:e,trigger:S,onTriggerChange:g,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:T,contentId:pi(),value:M,onValueChange:j,open:P,onOpenChange:k,dir:N,triggerPointerDownPosRef:D,disabled:p,children:[h.jsx(zv.Provider,{scope:e,children:h.jsx(kB,{scope:n.__scopeSelect,onNativeOptionAdd:w.useCallback(H=>{I(F=>new Set(F).add(H))},[]),onNativeOptionRemove:w.useCallback(H=>{I(F=>{const L=new Set(F);return L.delete(H),L})},[]),children:t})}),R?h.jsxs(xL,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:M,onChange:H=>j(H.target.value),disabled:p,form:y,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(O)]},B):null]})})};KR.displayName=fp;var XR="SelectTrigger",YR=w.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=n,i=Bv(t),o=Zo(XR,t),a=o.disabled||s,l=Oe(e,o.onTriggerChange),u=$v(t),d=w.useRef("touch"),[f,p,m]=wL(v=>{const S=u().filter(b=>!b.disabled),g=S.find(b=>b.value===o.value),x=bL(S,v,g);x!==void 0&&o.onValueChange(x.value)}),y=v=>{a||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return h.jsx(fN,{asChild:!0,...i,children:h.jsx(he.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":yL(o.value)?"":void 0,...r,ref:l,onClick:ee(r.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&y(v)}),onPointerDown:ee(r.onPointerDown,v=>{d.current=v.pointerType;const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:ee(r.onKeyDown,v=>{const S=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(S&&v.key===" ")&&_B.includes(v.key)&&(y(),v.preventDefault())})})})});YR.displayName=XR;var QR="SelectValue",ZR=w.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,children:i,placeholder:o="",...a}=n,l=Zo(QR,t),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,f=Oe(e,l.onValueNodeChange);return gt(()=>{u(d)},[u,d]),h.jsx(he.span,{...a,ref:f,style:{pointerEvents:"none"},children:yL(l.value)?h.jsx(h.Fragment,{children:o}):i})});ZR.displayName=QR;var LB="SelectIcon",JR=w.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...r}=n;return h.jsx(he.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});JR.displayName=LB;var MB="SelectPortal",eL=n=>h.jsx(hv,{asChild:!0,...n});eL.displayName=MB;var jl="SelectContent",tL=w.forwardRef((n,e)=>{const t=Zo(jl,n.__scopeSelect),[s,r]=w.useState();if(gt(()=>{r(new DocumentFragment)},[]),!t.open){const i=s;return i?Hl.createPortal(h.jsx(nL,{scope:n.__scopeSelect,children:h.jsx(zv.Slot,{scope:n.__scopeSelect,children:h.jsx("div",{children:n.children})})}),i):null}return h.jsx(sL,{...n,ref:e})});tL.displayName=jl;var Ss=10,[nL,Jo]=pd(jl),jB="SelectContentImpl",IB=ed("SelectContent.RemoveScroll"),sL=w.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:v,avoidCollisions:S,...g}=n,x=Zo(jl,t),[b,C]=w.useState(null),[T,N]=w.useState(null),P=Oe(e,U=>C(U)),[k,M]=w.useState(null),[j,D]=w.useState(null),R=$v(t),[O,I]=w.useState(!1),B=w.useRef(!1);w.useEffect(()=>{if(b)return jN(b)},[b]),CN();const H=w.useCallback(U=>{const[ve,...je]=R().map(Ae=>Ae.ref.current),[J]=je.slice(-1),Se=document.activeElement;for(const Ae of U)if(Ae===Se||(Ae==null||Ae.scrollIntoView({block:"nearest"}),Ae===ve&&T&&(T.scrollTop=0),Ae===J&&T&&(T.scrollTop=T.scrollHeight),Ae==null||Ae.focus(),document.activeElement!==Se))return},[R,T]),F=w.useCallback(()=>H([k,b]),[H,k,b]);w.useEffect(()=>{O&&F()},[O,F]);const{onOpenChange:L,triggerPointerDownPosRef:z}=x;w.useEffect(()=>{if(b){let U={x:0,y:0};const ve=J=>{var Se,Ae;U={x:Math.abs(Math.round(J.pageX)-(((Se=z.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(J.pageY)-(((Ae=z.current)==null?void 0:Ae.y)??0))}},je=J=>{U.x<=10&&U.y<=10?J.preventDefault():b.contains(J.target)||L(!1),document.removeEventListener("pointermove",ve),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",je,{capture:!0})}}},[b,L,z]),w.useEffect(()=>{const U=()=>L(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[L]);const[G,X]=wL(U=>{const ve=R().filter(Se=>!Se.disabled),je=ve.find(Se=>Se.ref.current===document.activeElement),J=bL(ve,U,je);J&&setTimeout(()=>J.ref.current.focus())}),Z=w.useCallback((U,ve,je)=>{const J=!B.current&&!je;(x.value!==void 0&&x.value===ve||J)&&(M(U),J&&(B.current=!0))},[x.value]),ie=w.useCallback(()=>b==null?void 0:b.focus(),[b]),be=w.useCallback((U,ve,je)=>{const J=!B.current&&!je;(x.value!==void 0&&x.value===ve||J)&&D(U)},[x.value]),tt=s==="popper"?Nw:rL,pe=tt===Nw?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:v,avoidCollisions:S}:{};return h.jsx(nL,{scope:t,content:b,viewport:T,onViewportChange:N,itemRefCallback:Z,selectedItem:k,onItemLeave:ie,itemTextRefCallback:be,focusSelectedItem:F,selectedItemText:j,position:s,isPositioned:O,searchRef:G,children:h.jsx(s1,{as:IB,allowPinchZoom:!0,children:h.jsx(n1,{asChild:!0,trapped:x.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:ee(r,U=>{var ve;(ve=x.trigger)==null||ve.focus({preventScroll:!0}),U.preventDefault()}),children:h.jsx(rp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(tt,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:U=>U.preventDefault(),...g,...pe,onPlaced:()=>I(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:ee(g.onKeyDown,U=>{const ve=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!ve&&U.key.length===1&&X(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let J=R().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(U.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const Se=U.target,Ae=J.indexOf(Se);J=J.slice(Ae+1)}setTimeout(()=>H(J)),U.preventDefault()}})})})})})})});sL.displayName=jB;var DB="SelectItemAlignedPosition",rL=w.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=n,i=Zo(jl,t),o=Jo(jl,t),[a,l]=w.useState(null),[u,d]=w.useState(null),f=Oe(e,P=>d(P)),p=$v(t),m=w.useRef(!1),y=w.useRef(!0),{viewport:v,selectedItem:S,selectedItemText:g,focusSelectedItem:x}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&v&&S&&g){const P=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),j=g.getBoundingClientRect();if(i.dir!=="rtl"){const Se=j.left-k.left,Ae=M.left-Se,ce=P.left-Ae,_e=P.width+ce,nt=Math.max(_e,k.width),We=window.innerWidth-Ss,ns=dE(Ae,[Ss,Math.max(Ss,We-nt)]);a.style.minWidth=_e+"px",a.style.left=ns+"px"}else{const Se=k.right-j.right,Ae=window.innerWidth-M.right-Se,ce=window.innerWidth-P.right-Ae,_e=P.width+ce,nt=Math.max(_e,k.width),We=window.innerWidth-Ss,ns=dE(Ae,[Ss,Math.max(Ss,We-nt)]);a.style.minWidth=_e+"px",a.style.right=ns+"px"}const D=p(),R=window.innerHeight-Ss*2,O=v.scrollHeight,I=window.getComputedStyle(u),B=parseInt(I.borderTopWidth,10),H=parseInt(I.paddingTop,10),F=parseInt(I.borderBottomWidth,10),L=parseInt(I.paddingBottom,10),z=B+H+O+L+F,G=Math.min(S.offsetHeight*5,z),X=window.getComputedStyle(v),Z=parseInt(X.paddingTop,10),ie=parseInt(X.paddingBottom,10),be=P.top+P.height/2-Ss,tt=R-be,pe=S.offsetHeight/2,U=S.offsetTop+pe,ve=B+H+U,je=z-ve;if(ve<=be){const Se=D.length>0&&S===D[D.length-1].ref.current;a.style.bottom="0px";const Ae=u.clientHeight-v.offsetTop-v.offsetHeight,ce=Math.max(tt,pe+(Se?ie:0)+Ae+F),_e=ve+ce;a.style.height=_e+"px"}else{const Se=D.length>0&&S===D[0].ref.current;a.style.top="0px";const ce=Math.max(be,B+v.offsetTop+(Se?Z:0)+pe)+je;a.style.height=ce+"px",v.scrollTop=ve-be+v.offsetTop}a.style.margin=`${Ss}px 0`,a.style.minHeight=G+"px",a.style.maxHeight=R+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,a,u,v,S,g,i.dir,s]);gt(()=>b(),[b]);const[C,T]=w.useState();gt(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const N=w.useCallback(P=>{P&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return h.jsx(FB,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:h.jsx(he.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});rL.displayName=DB;var OB="SelectPopperPosition",Nw=w.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=Ss,...i}=n,o=Bv(t);return h.jsx(pN,{...o,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Nw.displayName=OB;var[FB,R1]=pd(jl,{}),Pw="SelectViewport",iL=w.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...r}=n,i=Jo(Pw,t),o=R1(Pw,t),a=Oe(e,i.onViewportChange),l=w.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),h.jsx(zv.Slot,{scope:t,children:h.jsx(he.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ee(r.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const m=Math.abs(l.current-d.scrollTop);if(m>0){const y=window.innerHeight-Ss*2,v=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),g=Math.max(v,S);if(g<y){const x=g+m,b=Math.min(y,x),C=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});iL.displayName=Pw;var oL="SelectGroup",[HB,zB]=pd(oL),$B=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=pi();return h.jsx(HB,{scope:t,id:r,children:h.jsx(he.div,{role:"group","aria-labelledby":r,...s,ref:e})})});$B.displayName=oL;var aL="SelectLabel",lL=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=zB(aL,t);return h.jsx(he.div,{id:r.id,...s,ref:e})});lL.displayName=aL;var Pg="SelectItem",[BB,cL]=pd(Pg),uL=w.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:i,...o}=n,a=Zo(Pg,t),l=Jo(Pg,t),u=a.value===s,[d,f]=w.useState(i??""),[p,m]=w.useState(!1),y=Oe(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,s,r)}),v=pi(),S=w.useRef("touch"),g=()=>{r||(a.onValueChange(s),a.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(BB,{scope:t,value:s,disabled:r,textId:v,isSelected:u,onItemTextChange:w.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(zv.ItemSlot,{scope:t,value:s,disabled:r,textValue:d,children:h.jsx(he.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:y,onFocus:ee(o.onFocus,()=>m(!0)),onBlur:ee(o.onBlur,()=>m(!1)),onClick:ee(o.onClick,()=>{S.current!=="mouse"&&g()}),onPointerUp:ee(o.onPointerUp,()=>{S.current==="mouse"&&g()}),onPointerDown:ee(o.onPointerDown,x=>{S.current=x.pointerType}),onPointerMove:ee(o.onPointerMove,x=>{var b;S.current=x.pointerType,r?(b=l.onItemLeave)==null||b.call(l):S.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ee(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:ee(o.onKeyDown,x=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(TB.includes(x.key)&&g(),x.key===" "&&x.preventDefault())})})})})});uL.displayName=Pg;var Xd="SelectItemText",dL=w.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,...i}=n,o=Zo(Xd,t),a=Jo(Xd,t),l=cL(Xd,t),u=RB(Xd,t),[d,f]=w.useState(null),p=Oe(e,g=>f(g),l.onItemTextChange,g=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,g,l.value,l.disabled)}),m=d==null?void 0:d.textContent,y=w.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:S}=u;return gt(()=>(v(y),()=>S(y)),[v,S,y]),h.jsxs(h.Fragment,{children:[h.jsx(he.span,{id:l.textId,...i,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hl.createPortal(i.children,o.valueNode):null]})});dL.displayName=Xd;var hL="SelectItemIndicator",fL=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return cL(hL,t).isSelected?h.jsx(he.span,{"aria-hidden":!0,...s,ref:e}):null});fL.displayName=hL;var kw="SelectScrollUpButton",pL=w.forwardRef((n,e)=>{const t=Jo(kw,n.__scopeSelect),s=R1(kw,n.__scopeSelect),[r,i]=w.useState(!1),o=Oe(e,s.onScrollButtonChange);return gt(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=l.scrollTop>0;i(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?h.jsx(gL,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});pL.displayName=kw;var Rw="SelectScrollDownButton",mL=w.forwardRef((n,e)=>{const t=Jo(Rw,n.__scopeSelect),s=R1(Rw,n.__scopeSelect),[r,i]=w.useState(!1),o=Oe(e,s.onScrollButtonChange);return gt(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),r?h.jsx(gL,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});mL.displayName=Rw;var gL=w.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=n,i=Jo("SelectScrollButton",t),o=w.useRef(null),a=$v(t),l=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),gt(()=>{var d;const u=a().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),h.jsx(he.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ee(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:ee(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:ee(r.onPointerLeave,()=>{l()})})}),UB="SelectSeparator",vL=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return h.jsx(he.div,{"aria-hidden":!0,...s,ref:e})});vL.displayName=UB;var Lw="SelectArrow",VB=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=Bv(t),i=Zo(Lw,t),o=Jo(Lw,t);return i.open&&o.position==="popper"?h.jsx(mN,{...r,...s,ref:e}):null});VB.displayName=Lw;function yL(n){return n===""||n===void 0}var xL=w.forwardRef((n,e)=>{const{value:t,...s}=n,r=w.useRef(null),i=Oe(e,r),o=CB(t);return w.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(f)}},[o,t]),h.jsx(ip,{asChild:!0,children:h.jsx("select",{...s,ref:i,defaultValue:t})})});xL.displayName="BubbleSelect";function wL(n){const e=Mn(n),t=w.useRef(""),s=w.useRef(0),r=w.useCallback(o=>{const a=t.current+o;e(a),function l(u){t.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=w.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,i]}function bL(n,e,t){const r=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=WB(n,Math.max(i,0));r.length===1&&(o=o.filter(u=>u!==t));const l=o.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==t?l:void 0}function WB(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var GB=KR,SL=YR,qB=ZR,KB=JR,XB=eL,AL=tL,YB=iL,EL=lL,CL=uL,QB=dL,ZB=fL,_L=pL,TL=mL,NL=vL;const Mw=GB,jw=qB,kg=w.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(SL,{ref:s,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,h.jsx(KB,{asChild:!0,children:h.jsx(Ub,{className:"h-4 w-4 opacity-50"})})]}));kg.displayName=SL.displayName;const PL=w.forwardRef(({className:n,...e},t)=>h.jsx(_L,{ref:t,className:Ce("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(xD,{className:"h-4 w-4"})}));PL.displayName=_L.displayName;const kL=w.forwardRef(({className:n,...e},t)=>h.jsx(TL,{ref:t,className:Ce("flex cursor-default items-center justify-center py-1",n),...e,children:h.jsx(Ub,{className:"h-4 w-4"})}));kL.displayName=TL.displayName;const Rg=w.forwardRef(({className:n,children:e,position:t="popper",...s},r)=>h.jsx(XB,{children:h.jsxs(AL,{ref:r,className:Ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[h.jsx(PL,{}),h.jsx(YB,{className:Ce("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(kL,{})]})}));Rg.displayName=AL.displayName;const JB=w.forwardRef(({className:n,...e},t)=>h.jsx(EL,{ref:t,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));JB.displayName=EL.displayName;const Us=w.forwardRef(({className:n,children:e,...t},s)=>h.jsxs(CL,{ref:s,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(ZB,{children:h.jsx(um,{className:"h-4 w-4"})})}),h.jsx(QB,{children:e})]}));Us.displayName=CL.displayName;const e5=w.forwardRef(({className:n,...e},t)=>h.jsx(NL,{ref:t,className:Ce("-mx-1 my-1 h-px bg-muted",n),...e}));e5.displayName=NL.displayName;function t5(){const{user:n}=lp(),[e,t]=w.useState(""),[s,r]=w.useState("all"),[i,o]=w.useState("7d"),{data:a=[],isLoading:l}=Ho({queryKey:["/api/audit/activity",i,s]}),{data:u=[],isLoading:d}=Ho({queryKey:["/api/audit/security"],enabled:(n==null?void 0:n.role)==="admin"}),f=g=>{switch(g){case"login":case"logout":case"register":return h.jsx(yg,{className:"w-4 h-4 text-blue-600"});case"file_upload":case"file_download":case"file_view":return h.jsx(hi,{className:"w-4 h-4 text-green-600"});case"document_created":case"document_signed":return h.jsx(hi,{className:"w-4 h-4 text-purple-600"});case"failed_login":case"unauthorized_access":return h.jsx(e0,{className:"w-4 h-4 text-red-600"});default:return h.jsx(hA,{className:"w-4 h-4 text-gray-600"})}},p=g=>{switch(g){case"critical":return h.jsx(bt,{variant:"destructive",children:"Critical"});case"high":return h.jsx(bt,{className:"bg-orange-500",children:"High"});case"medium":return h.jsx(bt,{className:"bg-yellow-500",children:"Medium"});case"low":return h.jsx(bt,{variant:"secondary",children:"Low"});default:return h.jsx(bt,{variant:"outline",children:g})}},m=g=>g?h.jsx(nd,{className:"w-4 h-4 text-green-600"}):h.jsx(Yx,{className:"w-4 h-4 text-red-600"}),y=g=>new Date(g).toLocaleString(),v=a.filter(g=>{const x=e===""||g.action.toLowerCase().includes(e.toLowerCase())||g.ipAddress.includes(e)||g.details&&JSON.stringify(g.details).toLowerCase().includes(e.toLowerCase()),b=s==="all"||g.action===s;return x&&b}),S=[...new Set(a.map(g=>g.action))];return h.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Audit Logs"}),h.jsx("p",{className:"text-gray-600",children:"Comprehensive system activity and security monitoring"})]}),h.jsx(lt,{className:"mb-6",children:h.jsx(ft,{className:"p-6",children:h.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[h.jsx("div",{className:"flex-1 min-w-64",children:h.jsxs("div",{className:"relative",children:[h.jsx(_D,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{placeholder:"Search logs...",value:e,onChange:g=>t(g.target.value),className:"pl-10"})]})}),h.jsxs(Mw,{value:s,onValueChange:r,children:[h.jsx(kg,{className:"w-48",children:h.jsx(jw,{placeholder:"Filter by action"})}),h.jsxs(Rg,{children:[h.jsx(Us,{value:"all",children:"All actions"}),S.map(g=>h.jsx(Us,{value:g,children:g},g))]})]}),h.jsxs(Mw,{value:i,onValueChange:o,children:[h.jsx(kg,{className:"w-40",children:h.jsx(jw,{})}),h.jsxs(Rg,{children:[h.jsx(Us,{value:"1d",children:"Last 24 hours"}),h.jsx(Us,{value:"7d",children:"Last 7 days"}),h.jsx(Us,{value:"30d",children:"Last 30 days"}),h.jsx(Us,{value:"90d",children:"Last 90 days"})]})]}),h.jsxs(ae,{variant:"outline",children:[h.jsx(vg,{className:"w-4 h-4 mr-2"}),"Export"]})]})})}),h.jsxs(h1,{defaultValue:"activity",className:"space-y-6",children:[h.jsxs(Tv,{className:"grid w-full max-w-md grid-cols-2",children:[h.jsx(mi,{value:"activity",children:"Activity Logs"}),h.jsx(mi,{value:"security",disabled:(n==null?void 0:n.role)!=="admin",children:"Security Audit"})]}),h.jsx(gi,{value:"activity",children:h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs(un,{className:"flex items-center space-x-2",children:[h.jsx(hA,{className:"w-5 h-5"}),h.jsx("span",{children:"System Activity"}),h.jsxs(bt,{variant:"secondary",children:[v.length," entries"]})]})}),h.jsx(ft,{children:l?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):v.length===0?h.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activity logs found for the selected criteria."}):h.jsx("div",{className:"space-y-2",children:v.map(g=>h.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:h.jsx("div",{className:"flex items-start justify-between",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[f(g.action),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"font-medium text-gray-900",children:g.action.replace(/_/g," ").toUpperCase()}),m(g.success),g.errorMessage&&h.jsxs("span",{className:"text-sm text-red-600",children:["(",g.errorMessage,")"]})]}),h.jsx("div",{className:"text-sm text-gray-600 mt-1",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"flex items-center space-x-1",children:[h.jsx(zo,{className:"w-3 h-3"}),h.jsx("span",{children:y(g.timestamp)})]}),h.jsxs("span",{children:["IP: ",g.ipAddress]}),g.userId&&h.jsxs("span",{children:["User ID: ",g.userId]})]})}),g.details&&h.jsxs("details",{className:"mt-2",children:[h.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"View details"}),h.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(g.details,null,2)})]})]})]})})},g.id))})})]})}),h.jsx(gi,{value:"security",children:h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs(un,{className:"flex items-center space-x-2",children:[h.jsx(Tc,{className:"w-5 h-5"}),h.jsx("span",{children:"Security Audit"}),h.jsxs(bt,{variant:"secondary",children:[u.length," entries"]})]})}),h.jsx(ft,{children:d?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u.length===0?h.jsx("div",{className:"text-center py-8 text-gray-500",children:"No security events found."}):h.jsx("div",{className:"space-y-2",children:u.map(g=>h.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(e0,{className:"w-4 h-4 text-red-600"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"font-medium text-gray-900",children:g.action.replace(/_/g," ").toUpperCase()}),p(g.risk_level),g.resolved?h.jsx(bt,{className:"bg-green-500",children:"Resolved"}):h.jsx(bt,{variant:"destructive",children:"Open"})]}),h.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"flex items-center space-x-1",children:[h.jsx(zo,{className:"w-3 h-3"}),h.jsx("span",{children:y(g.timestamp)})]}),h.jsxs("span",{children:["IP: ",g.ipAddress]}),g.userId&&h.jsxs("span",{children:["User ID: ",g.userId]})]}),g.resolved&&g.resolvedAt&&h.jsxs("div",{className:"text-green-600 mt-1",children:["Resolved on ",y(g.resolvedAt)]})]}),g.details&&h.jsxs("details",{className:"mt-2",children:[h.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"View details"}),h.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(g.details,null,2)})]})]})]}),!g.resolved&&h.jsx(ae,{size:"sm",variant:"outline",children:"Mark Resolved"})]})},g.id))})})]})})]})]})})}function n5(){const{toast:n}=zl(),[e,t]=w.useState("all"),{data:s,isLoading:r}=Ho({queryKey:["/api/compliance/records",e]}),i=async(u,d)=>{try{const f=await wl(`/api/documents/${u}/compliance/certificate?jurisdiction=${d}`,"GET"),p=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),m=URL.createObjectURL(p),y=document.createElement("a");y.href=m,y.download=`compliance-certificate-${u}-${d}.json`,y.click(),URL.revokeObjectURL(m),n({title:"Certificate Downloaded",description:"Compliance certificate has been downloaded successfully."})}catch{n({title:"Download Failed",description:"Failed to download compliance certificate.",variant:"destructive"})}},o=u=>{switch(u){case"compliant":return h.jsx(nd,{className:"h-4 w-4 text-green-600"});case"non_compliant":return h.jsx(Yx,{className:"h-4 w-4 text-red-600"});case"pending_verification":return h.jsx(zo,{className:"h-4 w-4 text-yellow-600"});default:return h.jsx(e0,{className:"h-4 w-4 text-gray-600"})}},a=u=>{const d={compliant:"bg-green-100 text-green-800",non_compliant:"bg-red-100 text-red-800",pending_verification:"bg-yellow-100 text-yellow-800"};return h.jsx(bt,{className:d[u]||"bg-gray-100 text-gray-800",children:u.replace("_"," ").toUpperCase()})},l=u=>{switch(u){case"NZ":return"🇳🇿";case"US":return"🇺🇸";case"BOTH":return"🌍";default:return"🏳️"}};return r?h.jsx("div",{className:"p-6",children:h.jsxs("div",{className:"animate-pulse space-y-4",children:[h.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(u=>h.jsx("div",{className:"h-48 bg-gray-200 rounded"},u))})]})}):h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Compliance Dashboard"}),h.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor electronic signature compliance for NZ and US legal requirements"})]}),h.jsx("div",{className:"flex items-center space-x-4",children:h.jsxs(Mw,{value:e,onValueChange:t,children:[h.jsx(kg,{className:"w-48",children:h.jsx(jw,{placeholder:"Filter by jurisdiction"})}),h.jsxs(Rg,{children:[h.jsx(Us,{value:"all",children:"All Jurisdictions"}),h.jsx(Us,{value:"NZ",children:"🇳🇿 New Zealand"}),h.jsx(Us,{value:"US",children:"🇺🇸 United States"}),h.jsx(Us,{value:"BOTH",children:"🌍 Both"})]})]})})]}),h.jsxs(h1,{defaultValue:"overview",className:"space-y-6",children:[h.jsxs(Tv,{className:"grid w-full grid-cols-3",children:[h.jsx(mi,{value:"overview",children:"Overview"}),h.jsx(mi,{value:"records",children:"Compliance Records"}),h.jsx(mi,{value:"requirements",children:"Legal Requirements"})]}),h.jsx(gi,{value:"overview",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs(lt,{children:[h.jsxs(Jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(un,{className:"text-sm font-medium",children:"Total Documents"}),h.jsx(hi,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsxs(ft,{children:[h.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.length)||0}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Under compliance monitoring"})]})]}),h.jsxs(lt,{children:[h.jsxs(Jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(un,{className:"text-sm font-medium",children:"Compliant"}),h.jsx(nd,{className:"h-4 w-4 text-green-600"})]}),h.jsxs(ft,{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600",children:(s==null?void 0:s.filter(u=>u.status==="compliant").length)||0}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Meeting all requirements"})]})]}),h.jsxs(lt,{children:[h.jsxs(Jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(un,{className:"text-sm font-medium",children:"Non-Compliant"}),h.jsx(Yx,{className:"h-4 w-4 text-red-600"})]}),h.jsxs(ft,{children:[h.jsx("div",{className:"text-2xl font-bold text-red-600",children:(s==null?void 0:s.filter(u=>u.status==="non_compliant").length)||0}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),h.jsxs(lt,{children:[h.jsxs(Jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(un,{className:"text-sm font-medium",children:"Pending"}),h.jsx(zo,{className:"h-4 w-4 text-yellow-600"})]}),h.jsxs(ft,{children:[h.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(s==null?void 0:s.filter(u=>u.status==="pending_verification").length)||0}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting verification"})]})]})]})}),h.jsx(gi,{value:"records",className:"space-y-4",children:h.jsx("div",{className:"grid gap-4",children:s==null?void 0:s.map(u=>h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[o(u.status),h.jsx(un,{className:"text-lg",children:u.documentName})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-lg",children:l(u.jurisdiction)}),a(u.status)]})]}),h.jsx("div",{className:"flex items-center space-x-2",children:u.status==="compliant"&&h.jsxs(ae,{size:"sm",variant:"outline",onClick:()=>i(u.documentId,u.jurisdiction),children:[h.jsx(vg,{className:"h-4 w-4 mr-2"}),"Certificate"]})})]})}),h.jsxs(ft,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Legal Framework"}),h.jsx("p",{className:"text-sm",children:u.legalFramework})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Verified Date"}),h.jsx("p",{className:"text-sm",children:new Date(u.verificationDate).toLocaleDateString()})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Compliance Requirements"}),h.jsx("div",{className:"space-y-2",children:u.requirements.map((d,f)=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[h.jsx("span",{className:"text-sm",children:d.requirement}),h.jsx(bt,{className:d.status==="met"?"bg-green-100 text-green-800":d.status==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:d.status.toUpperCase()})]},f))})]})]})]},u.id))})}),h.jsx(gi,{value:"requirements",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-lg",children:"🇳🇿"}),h.jsx(un,{children:"New Zealand Electronic Transactions Act 2002"})]})}),h.jsx(ft,{className:"space-y-4",children:h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-sm mb-2",children:"Key Requirements:"}),h.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[h.jsx("li",{children:"• Reliable method to identify the signatory"}),h.jsx("li",{children:"• Signatory's approval of the information"}),h.jsx("li",{children:"• Method appropriately links signature to information"}),h.jsx("li",{children:"• Method is reliable and appropriate"}),h.jsx("li",{children:"• Clear consent to electronic transactions"})]})]})})]}),h.jsxs(lt,{children:[h.jsx(Jt,{children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-lg",children:"🇺🇸"}),h.jsx(un,{children:"US UETA/ESIGN Act"})]})}),h.jsx(ft,{className:"space-y-4",children:h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-sm mb-2",children:"Key Requirements:"}),h.jsxs("ul",{className:"text-sm space-y-1 text-gray-600",children:[h.jsx("li",{children:"• Intent to sign electronically"}),h.jsx("li",{children:"• Consent to electronic records"}),h.jsx("li",{children:"• Record retention and integrity"}),h.jsx("li",{children:"• Attribution to the person"}),h.jsx("li",{children:"• Consumer consent disclosures"})]})]})})]})]})})]})]})}function Ql(){const[,n]=q_(),{login:e,isLoginLoading:t,loginError:s}=lp(),{toast:r}=zl(),[i,o]=w.useState(!1),[a,l]=w.useState({email:"",password:""}),u=async f=>{if(f.preventDefault(),!a.email||!a.password){r({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}try{await e(a),r({title:"Login successful",description:"Welcome back!"}),n("/")}catch(p){const m=p instanceof Error?p.message:"Login failed";r({title:"Login Failed",description:m.replace(/^\d+:\s*/,""),variant:"destructive"})}},d=f=>{l(p=>({...p,[f.target.name]:f.target.value}))};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"flex items-center justify-center mb-4",children:h.jsx(Tc,{className:"h-12 w-12 text-blue-600"})}),h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SecureSign"}),h.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),h.jsxs(lt,{className:"shadow-lg",children:[h.jsxs(Jt,{className:"space-y-1",children:[h.jsx(un,{className:"text-2xl text-center",children:"Welcome back"}),h.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Enter your credentials to access your documents"})]}),h.jsxs(ft,{children:[h.jsxs("form",{onSubmit:u,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(Vb,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:a.email,onChange:d,className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"password",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(Jx,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"password",name:"password",type:i?"text":"password",placeholder:"Enter your password",value:a.password,onChange:d,className:"pl-10 pr-10",required:!0}),h.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?h.jsx(Qx,{className:"h-4 w-4"}):h.jsx(Zx,{className:"h-4 w-4"})})]})]}),s&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:h.jsx("p",{className:"text-sm text-red-800",children:s instanceof Error?s.message:"Login failed"})}),h.jsx(ae,{type:"submit",className:"w-full",disabled:t,children:t?"Signing in...":"Sign in"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",h.jsx(ih,{href:"/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Sign up"})]})})]})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsx("p",{className:"text-xs text-gray-500",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})})}function s5(){const[,n]=q_(),{register:e,isRegisterLoading:t,registerError:s}=lp(),{toast:r}=zl(),[i,o]=w.useState(!1),[a,l]=w.useState(!1),[u,d]=w.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:""}),f=async m=>{if(m.preventDefault(),!u.username||!u.email||!u.password||!u.confirmPassword){r({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(u.password!==u.confirmPassword){r({title:"Error",description:"Passwords don't match",variant:"destructive"});return}if(u.password.length<6){r({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}try{await e(u),r({title:"Success",description:"Account created successfully! You've been logged in."}),n("/")}catch(y){r({title:"Registration Failed",description:y instanceof Error?y.message:"An error occurred during registration",variant:"destructive"})}},p=m=>{d(y=>({...y,[m.target.name]:m.target.value}))};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"flex items-center justify-center mb-4",children:h.jsx(Tc,{className:"h-12 w-12 text-blue-600"})}),h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SecureSign"}),h.jsx("p",{className:"text-gray-600 mt-2",children:"Create your account"})]}),h.jsxs(lt,{className:"shadow-lg",children:[h.jsxs(Jt,{className:"space-y-1",children:[h.jsx(un,{className:"text-2xl text-center",children:"Join SecureSign"}),h.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Start signing documents securely today"})]}),h.jsxs(ft,{children:[h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"firstName",children:"First Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(yg,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"firstName",name:"firstName",type:"text",placeholder:"John",value:u.firstName,onChange:p,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"lastName",children:"Last Name"}),h.jsx(dn,{id:"lastName",name:"lastName",type:"text",placeholder:"Doe",value:u.lastName,onChange:p})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"username",children:"Username *"}),h.jsxs("div",{className:"relative",children:[h.jsx(yg,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"username",name:"username",type:"text",placeholder:"Enter your username",value:u.username,onChange:p,className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"email",children:"Email *"}),h.jsxs("div",{className:"relative",children:[h.jsx(Vb,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"email",name:"email",type:"email",placeholder:"Enter your email",value:u.email,onChange:p,className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"phoneNumber",children:"Phone Number"}),h.jsxs("div",{className:"relative",children:[h.jsx(CD,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"phoneNumber",name:"phoneNumber",type:"tel",placeholder:"+1 (555) 123-4567",value:u.phoneNumber,onChange:p,className:"pl-10"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"password",children:"Password *"}),h.jsxs("div",{className:"relative",children:[h.jsx(Jx,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"password",name:"password",type:i?"text":"password",placeholder:"Create a password",value:u.password,onChange:p,className:"pl-10 pr-10",required:!0}),h.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?h.jsx(Qx,{className:"h-4 w-4"}):h.jsx(Zx,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Gn,{htmlFor:"confirmPassword",children:"Confirm Password *"}),h.jsxs("div",{className:"relative",children:[h.jsx(Jx,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),h.jsx(dn,{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",placeholder:"Confirm your password",value:u.confirmPassword,onChange:p,className:"pl-10 pr-10",required:!0}),h.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:a?h.jsx(Qx,{className:"h-4 w-4"}):h.jsx(Zx,{className:"h-4 w-4"})})]})]}),s&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:h.jsx("p",{className:"text-sm text-red-800",children:s instanceof Error?s.message:"Registration failed"})}),h.jsx(ae,{type:"submit",className:"w-full",disabled:t,children:t?"Creating account...":"Create account"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",h.jsx(ih,{href:"/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Sign in"})]})})]})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]})})}function r5(){return h.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:h.jsx(lt,{className:"w-full max-w-md mx-4",children:h.jsxs(ft,{className:"pt-6",children:[h.jsxs("div",{className:"flex mb-4 gap-2",children:[h.jsx(wD,{className:"h-8 w-8 text-red-500"}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),h.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function i5(){const{isAuthenticated:n,isLoading:e}=lp();return e?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):h.jsxs(zj,{children:[h.jsx(ta,{path:"/login",children:n?h.jsx(Ly,{}):h.jsx(Ql,{})}),h.jsx(ta,{path:"/register",children:n?h.jsx(Ly,{}):h.jsx(s5,{})}),h.jsx(ta,{path:"/document/:id",children:n?h.jsx(EB,{}):h.jsx(Ql,{})}),h.jsx(ta,{path:"/audit-logs",children:n?h.jsx(t5,{}):h.jsx(Ql,{})}),h.jsx(ta,{path:"/compliance",children:n?h.jsx(n5,{}):h.jsx(Ql,{})}),h.jsx(ta,{path:"/",children:n?h.jsx(Ly,{}):h.jsx(Ql,{})}),h.jsx(ta,{children:n?h.jsx(r5,{}):h.jsx(Ql,{})})]})}function o5(){return h.jsx(oI,{client:bI,children:h.jsxs($F,{children:[h.jsx(pO,{}),h.jsx(i5,{})]})})}D_(document.getElementById("root")).render(h.jsx(o5,{}));
